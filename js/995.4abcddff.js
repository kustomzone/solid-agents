"use strict";(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[995],{842:function(e,o,t){t.r(o),t.d(o,{default:function(){return f}});var n=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("b-button",{attrs:{variant:"primary"},on:{click:e.download}},[t("b-icon-file-arrow-down")],1),t("b-button",{attrs:{variant:"primary"},on:{click:function(o){return e.openFileUpload()}}},[t("b-icon-file-arrow-up")],1),t("input",{ref:"fileUpload",attrs:{type:"file",multiple:"",hidden:""},on:{change:e.loadFiles}})],1)},a=[],s=t(1519);class l{constructor(e={}){this.id=(0,s.Z)(),this.type="baseConnector",this.created=Date.now(),Object.assign(this,e)}debug(){console.log(this)}}var r=t(5297);class i extends l{constructor(e={}){super(e),void 0==e["type"]&&(this["type"]="LocalConnector")}async upload(e,o){const t=new FileReader;await t.addEventListener("load",(()=>{o(t.result)})),t.readAsText(e,"UTF-8")}async upload1(e){for(var o=0;o<e.length;o++){let n=e[o],a=n.name;var t=n.name.split(".").pop();const s=new FileReader;s.addEventListener("load",(()=>{var e=s.result;switch(console.log(typeof e,e),t){case"json":var o=JSON.parse(e);console.log(o),void 0!=o.nodes&&(console.log(o),r.Z.commit("soukai/setNeurones",o.nodes));break;default:alert("your file must be a .json file",a)}})),s.readAsText(n)}}downloadFile(e){var o=JSON.stringify(e.content,null,2);console.log("todo: poser la question compresser",o);var t=e.format||"json",n="",a="";let s="Brain_"+Date.now();var l=prompt("Choose a name for the exported file :",s);if(null!=l&&""!=l){switch(t){case"json":n="application/json",a=l+".json";break;case"ttl":n="text/turtle",a=l+".ttl";break;case"jsonld":n="application/ld+json",a=l+".jsonld";break;default:alert("Format de fichier non reconnu",t)}var r=new Blob([o],{type:n}),i=document.createElement("a");i.download=a,i.innerHTML="Download File",-1!=navigator.userAgent.indexOf("Chrome")?i.href=window.URL.createObjectURL(r):(i.href=window.URL.createObjectURL(r),i.target="_blank",i.style.display="none",document.body.appendChild(i));var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(c),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(i)}),1e3)}}}var c={name:"LocalConnectorConnector",data(){return{connector:new i}},mounted(){console.log(this.connector)},methods:{async loadFiles(e){const o=e.target.files;for(const t of o)this.connector.upload(t,this.processFile)},async processFile(e){console.log(e),console.log(e.name);let o=JSON.parse(e);console.log();for await(let t of o.nodes)console.log(t),await this.$newNode(t),await this.$store.dispatch("core/saveNode",t);console.log("end"),await this.$store.dispatch("core/getNodes")},openFileUpload(){this.$refs.fileUpload.click()},download(){console.log("download");let e={format:"json",content:{nodes:this.$store.state.core.nodes,links:this.$store.state.core.links}};this.connector.downloadFile(e)}}},d=c,u=t(1001),p=(0,u.Z)(d,n,a,!1,null,null,null),f=p.exports}}]);
//# sourceMappingURL=995.4abcddff.js.map