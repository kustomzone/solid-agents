(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[288],{73288:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return k}});var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Solid Soukai person : "+t._s(t.person)+" "),r("hr"),t._v(" persons : "+t._s(t.persons)+" "),r("hr")])},i=[],o=r(67906),a=r(16198),s=r(92751),u=r(76133),c=r(99418),l=r(49161),f=r(23796),h=(r(21249),r(52262),r(24506),r(53161)),d=r.n(h),p=r(67696),y=r(63754),v=r(61519),b=function(t){(0,c.Z)(r,t);var e=(0,l.Z)(r);function r(){return(0,u.Z)(this,r),e.apply(this,arguments)}return(0,s.Z)(r)}(h.SolidModel);(0,f.Z)(b,"rdfContexts",{foaf:"http://xmlns.com/foaf/0.1/",vcard:"http://www.w3.org/2006/vcard/ns#"}),(0,f.Z)(b,"rdfsClasses",["foaf:Person"]),(0,f.Z)(b,"fields",{name:{type:p.FieldType.String,rdfProperty:"foaf:name"}});var g=r(50476),w=function(t){(0,c.Z)(r,t);var e=(0,l.Z)(r);function r(){return(0,u.Z)(this,r),e.apply(this,arguments)}return(0,s.Z)(r)}(h.SolidModel);(0,f.Z)(w,"rdfsClasses",["http://xmlns.com/foaf/0.1/Person"]),(0,f.Z)(w,"fields",{name:{type:p.FieldType.String,rdfProperty:"http://xmlns.com/foaf/0.1/name"}}),d().loadSolidModels(),p.Soukai.loadModels({Person:w,UserSolid:b}),p.Soukai.useEngine(new h.SolidEngine(y.fetch.bind(window)));var m={name:"SoukaiSolidTest",data:function(){return{person:null,persons:null}},mounted:function(){this.test1()},methods:{test1:function(){var t=this;return(0,a.Z)((0,o.Z)().mark((function e(){var r,n,i,a,s,u,c;return(0,o.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.pod){e.next=27;break}return r="https://pod.inrupt.com/andriesvh/profile/card#me",g.log(r),e.next=5,b.from(r).all();case 5:return n=e.sent,e.next=8,n.map((function(t){return t.getAttributes()}));case 8:return i=e.sent,g.log(i),g.log("user pod",i),a="https://spoggy-test2.solidcommunity.net/public/soukai-test/",e.next=14,w.from(a).all();case 14:return s=e.sent,e.next=17,s.map((function(t){return t.getAttributes()}));case 17:return t.persons=e.sent,u={name:"John Doe",url:a+(0,v.Z)()+"#it"},e.next=21,w.at("https://spoggy-test2.solidcommunity.net/public/soukai-test/").create(u);case 21:return c=e.sent,e.t0=g,e.next=25,c;case 25:e.t1=e.sent,e.t0.log.call(e.t0,"person",e.t1);case 27:case"end":return e.stop()}}),e)})))()}},watch:{pod:function(){this.test1()}},computed:{pod:function(){return this.$store.state.solid.pod}}},x=m,_=r(1001),E=(0,_.Z)(x,n,i,!1,null,null,null),k=E.exports},6790:function(t,e,r){"use strict";var n=r(43157),i=r(26244),o=r(7207),a=r(49974),s=function(t,e,r,u,c,l,f,h){var d,p,y=c,v=0,b=!!f&&a(f,h);while(v<u)v in r&&(d=b?b(r[v],v,e):r[v],l>0&&n(d)?(p=i(d),y=s(t,e,d,p,y,l-1)-1):(o(y+1),t[y]=d),y++),v++;return y};t.exports=s},20403:function(t){var e=Math.log,r=Math.LOG10E;t.exports=Math.log10||function(t){return e(t)*r}},84944:function(t,e,r){"use strict";var n=r(82109),i=r(6790),o=r(47908),a=r(26244),s=r(19303),u=r(65417);n({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,e=o(this),r=a(e),n=u(e,0);return n.length=i(n,e,e,r,0,void 0===t?1:s(t)),n}})},33792:function(t,e,r){var n=r(51223);n("flat")},4855:function(t,e,r){"use strict";var n=r(60614),i=r(70111),o=r(3070),a=r(79518),s=r(5112),u=r(56339),c=s("hasInstance"),l=Function.prototype;c in l||o.f(l,c,{value:u((function(t){if(!n(this)||!i(t))return!1;var e=this.prototype;if(!i(e))return t instanceof this;while(t=a(t))if(e===t)return!0;return!1}),c)})},31354:function(t,e,r){"use strict";var n=r(82109),i=r(1702),o=r(19303),a=r(50863),s=r(38415),u=r(20403),c=r(47293),l=RangeError,f=String,h=isFinite,d=Math.abs,p=Math.floor,y=Math.pow,v=Math.round,b=i(1..toExponential),g=i(s),w=i("".slice),m="-6.9000e-11"===b(-69e-12,4)&&"1.25e+0"===b(1.255,2)&&"1.235e+4"===b(12345,3)&&"3e+1"===b(25,0),x=c((function(){b(1,1/0)}))&&c((function(){b(1,-1/0)})),_=!c((function(){b(1/0,1/0)}))&&!c((function(){b(NaN,1/0)})),E=!m||!x||!_;n({target:"Number",proto:!0,forced:E},{toExponential:function(t){var e=a(this);if(void 0===t)return b(e);var r=o(t);if(!h(e))return String(e);if(r<0||r>20)throw l("Incorrect fraction digits");if(m)return b(e,r);var n="",i="",s=0,c="",x="";if(e<0&&(n="-",e=-e),0===e)s=0,i=g("0",r+1);else{var _=u(e);s=p(_);var E=0,k=y(10,s-r);E=v(e/k),2*e>=(2*E+1)*k&&(E+=1),E>=y(10,r+1)&&(E/=10,s+=1),i=f(E)}return 0!==r&&(i=w(i,0,1)+"."+w(i,1)),0===s?(c="+",x="0"):(c=s>0?"+":"-",x=f(d(s))),i+="e"+c+x,n+i}})},52586:function(t,e,r){var n=r(82109),i=r(19670),o=r(31236).f;n({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var r=o(i(t),e);return!(r&&!r.configurable)&&delete t[e]}})},83593:function(t,e,r){var n=r(82109),i=r(46916),o=r(19670),a=r(70111),s=r(45032),u=r(47293),c=r(3070),l=r(31236),f=r(79518),h=r(79114);function d(t,e,r){var n,u,p,y=arguments.length<4?t:arguments[3],v=l.f(o(t),e);if(!v){if(a(u=f(t)))return d(u,e,r,y);v=h(0)}if(s(v)){if(!1===v.writable||!a(y))return!1;if(n=l.f(y,e)){if(n.get||n.set||!1===n.writable)return!1;n.value=r,c.f(y,e,n)}else c.f(y,e,h(0,r))}else{if(p=v.set,void 0===p)return!1;i(p,y,r)}return!0}var p=u((function(){var t=function(){},e=c.f(new t,"a",{configurable:!0});return!1!==Reflect.set(t.prototype,"a",1,e)}));n({target:"Reflect",stat:!0,forced:p},{set:d})},92401:function(t,e,r){var n=r(97235);n("hasInstance")},66760:function(t,e,r){r(41539),r(81299),r(74819),r(38880);var n=r(96338);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get.bind(),t.exports.__esModule=!0,t.exports["default"]=t.exports):(t.exports=i=function(t,e,r){var i=n(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},t.exports.__esModule=!0,t.exports["default"]=t.exports),i.apply(this,arguments)}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},96338:function(t,e,r){var n=r(40358);function i(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=n(t),null===t)break;return t}t.exports=i,t.exports.__esModule=!0,t.exports["default"]=t.exports},30020:function(t,e,r){var n=r(88484),i=r(68777),o=r(94950),a=r(97740);function s(t){return n(t)||i(t)||o(t)||a()}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},89914:function(t,e,r){"use strict";var n=r(50476),i=r(17964)["default"];
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */r(82526),r(41817),r(41539),r(82472),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(37380),r(1118),r(21703),r(18264),r(96649),r(96078),r(43290),r(47042),r(92222),r(39714),r(73210),r(74916),r(15306),r(26699),r(32023),r(9653),r(83753),r(50545),r(23123),r(68309);var o=r(93755),a=r(72853),s="function"===typeof Symbol&&"function"===typeof Symbol["for"]?Symbol["for"]("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50;var u=2147483647;function c(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(r){return!1}}function l(t){if(t>u)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,f.prototype),e}function f(t,e,r){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return y(t)}return h(t,e,r)}function h(t,e,r){if("string"===typeof t)return v(t,e);if(ArrayBuffer.isView(t))return g(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+i(t));if(Q(t,ArrayBuffer)||t&&Q(t.buffer,ArrayBuffer))return w(t,e,r);if("undefined"!==typeof SharedArrayBuffer&&(Q(t,SharedArrayBuffer)||t&&Q(t.buffer,SharedArrayBuffer)))return w(t,e,r);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return f.from(n,e,r);var o=m(t);if(o)return o;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return f.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+i(t))}function d(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function p(t,e,r){return d(t),t<=0?l(t):void 0!==e?"string"===typeof r?l(t).fill(e,r):l(t).fill(e):l(t)}function y(t){return d(t),l(t<0?0:0|x(t))}function v(t,e){if("string"===typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|E(t,e),n=l(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function b(t){for(var e=t.length<0?0:0|x(t.length),r=l(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function g(t){if(Q(t,Uint8Array)){var e=new Uint8Array(t);return w(e.buffer,e.byteOffset,e.byteLength)}return b(t)}function w(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,f.prototype),n}function m(t){if(f.isBuffer(t)){var e=0|x(t.length),r=l(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!==typeof t.length||tt(t.length)?l(0):b(t):"Buffer"===t.type&&Array.isArray(t.data)?b(t.data):void 0}function x(t){if(t>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),f.alloc(+t)}function E(t,e){if(f.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Q(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+i(t));var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Z(t).length;default:if(o)return n?-1:z(t).length;e=(""+e).toLowerCase(),o=!0}}function k(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return V(this,e,r);case"utf8":case"utf-8":return N(this,e,r);case"ascii":return M(this,e,r);case"latin1":case"binary":return U(this,e,r);case"base64":return P(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function S(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function O(t,e,r,n,i){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,tt(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"===typeof e&&(e=f.from(e,n)),f.isBuffer(e))return 0===e.length?-1:C(t,e,r,n,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):C(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function C(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=r;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function R(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(tt(s))return a;t[r+a]=s}return a}function I(t,e,r,n){return X(z(e,t.length-r),t,r,n)}function D(t,e,r,n){return X($(e),t,r,n)}function T(t,e,r,n){return X(Z(e),t,r,n)}function A(t,e,r,n){return X(Y(e,t.length-r),t,r,n)}function P(t,e,r){return 0===e&&r===t.length?o.fromByteArray(t):o.fromByteArray(t.slice(e,r))}function N(t,e,r){r=Math.min(t.length,r);var n=[],i=e;while(i<r){var o,a,s,u,c=t[i],l=null,f=c>239?4:c>223?3:c>191?2:1;if(i+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:o=t[i+1],128===(192&o)&&(u=(31&c)<<6|63&o,u>127&&(l=u));break;case 3:o=t[i+1],a=t[i+2],128===(192&o)&&128===(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a,u>2047&&(u<55296||u>57343)&&(l=u));break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s,u>65535&&u<1114112&&(l=u))}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}return L(n)}e.kMaxLength=u,f.TYPED_ARRAY_SUPPORT=c(),f.TYPED_ARRAY_SUPPORT||"undefined"===typeof n||"function"!==typeof n.error||n.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(t,e,r){return h(t,e,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(t,e,r){return p(t,e,r)},f.allocUnsafe=function(t){return y(t)},f.allocUnsafeSlow=function(t){return y(t)},f.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==f.prototype},f.compare=function(t,e){if(Q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),Q(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(t)||!f.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=f.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(Q(o,Uint8Array))i+o.length>n.length?f.from(o).copy(n,i):Uint8Array.prototype.set.call(n,o,i);else{if(!f.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i)}i+=o.length}return n},f.byteLength=E,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)S(this,e,e+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)S(this,e,e+3),S(this,e+1,e+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)S(this,e,e+7),S(this,e+1,e+6),S(this,e+2,e+5),S(this,e+3,e+4);return this},f.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?N(this,0,t):k.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(f.prototype[s]=f.prototype.inspect),f.prototype.compare=function(t,e,r,n,o){if(Q(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+i(t));if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,o>>>=0,this===t)return 0;for(var a=o-n,s=r-e,u=Math.min(a,s),c=this.slice(n,o),l=t.slice(e,r),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},f.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},f.prototype.indexOf=function(t,e,r){return O(this,t,e,r,!0)},f.prototype.lastIndexOf=function(t,e,r){return O(this,t,e,r,!1)},f.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return R(this,t,e,r);case"utf8":case"utf-8":return I(this,t,e,r);case"ascii":case"latin1":case"binary":return D(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function L(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);var r="",n=0;while(n<e)r+=String.fromCharCode.apply(String,t.slice(n,n+=j));return r}function M(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function U(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function V(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=et[t[o]];return i}function B(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function F(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function G(t,e,r,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function J(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function K(t,e,r,n,i){return e=+e,r>>>=0,i||J(t,e,r,4,34028234663852886e22,-34028234663852886e22),a.write(t,e,r,n,23,4),r+4}function q(t,e,r,n,i){return e=+e,r>>>=0,i||J(t,e,r,8,17976931348623157e292,-17976931348623157e292),a.write(t,e,r,n,52,8),r+8}f.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t+--e],i=1;while(e>0&&(i*=256))n+=this[t+--e]*i;return n},f.prototype.readUint8=f.prototype.readUInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),this[t]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(t,e){return t>>>=0,e||F(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=this[t],i=1,o=0;while(++o<e&&(i*=256))n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},f.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||F(t,e,this.length);var n=e,i=1,o=this[t+--n];while(n>0&&(i*=256))o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},f.prototype.readInt8=function(t,e){return t>>>=0,e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,e){t>>>=0,e||F(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt16BE=function(t,e){t>>>=0,e||F(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt32LE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,e){return t>>>=0,e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,e){return t>>>=0,e||F(t,4,this.length),a.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,e){return t>>>=0,e||F(t,4,this.length),a.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,e){return t>>>=0,e||F(t,8,this.length),a.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,e){return t>>>=0,e||F(t,8,this.length),a.read(this,t,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;G(this,t,e,r,i,0)}var o=1,a=0;this[e]=255&t;while(++a<r&&(o*=256))this[e+a]=t/o&255;return e+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;G(this,t,e,r,i,0)}var o=r-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,1,255,0),this[e]=255&t,e+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);G(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;this[e]=255&t;while(++o<r&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},f.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);G(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},f.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},f.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},f.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},f.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},f.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||G(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},f.prototype.writeFloatLE=function(t,e,r){return K(this,t,e,!0,r)},f.prototype.writeFloatBE=function(t,e,r){return K(this,t,e,!1,r)},f.prototype.writeDoubleLE=function(t,e,r){return q(this,t,e,!0,r)},f.prototype.writeDoubleBE=function(t,e,r){return q(this,t,e,!1,r)},f.prototype.copy=function(t,e,r,n){if(!f.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},f.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var i=t.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(t=i)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=f.isBuffer(t)?t:f.from(t,n),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var H=/[^+/0-9A-Za-z-_]/g;function W(t){if(t=t.split("=")[0],t=t.trim().replace(H,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if(r=t.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function $(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function Y(t,e){for(var r,n,i,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n)}return o}function Z(t){return o.toByteArray(W(t))}function X(t,e,r,n){for(var i=0;i<n;++i){if(i+r>=e.length||i>=t.length)break;e[i+r]=t[i]}return i}function Q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function tt(t){return t!==t}var et=function(){for(var t="0123456789abcdef",e=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}()},74384:function(t,e,r){"use strict";var n=r(17964)["default"];r(83753),r(38862),r(41539),r(2707),r(47941),t.exports=function t(e){return null===e||"object"!==n(e)||null!=e.toJSON?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((function(e,r,i){var o=0===i?"":",",a=void 0===r||"symbol"===n(r)?null:r;return e+o+t(a)}),"")+"]":"{"+Object.keys(e).sort().reduce((function(r,i,o){if(void 0===e[i]||"symbol"===n(e[i]))return r;var a=0===r.length?"":",";return r+a+t(i)+":"+t(e[i])}),"")+"}"}},81418:function(t,e,r){r(41539),r(78783),r(33948),r(41637),r(82526),r(41817),r(32165),r(18264),r(74916),r(77601),r(21703),r(21249),r(54747),r(36210),r(82472),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(37380),r(1118),r(69600),r(47042),r(39714),r(23123),r(73210),r(15306),r(87714),r(82801),r(1174),r(68309),function(t){(function(e){var r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(t){return t&&DataView.prototype.isPrototypeOf(t)}if(r.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(t){return t&&i.indexOf(Object.prototype.toString.call(t))>-1};function a(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function s(t){return"string"!==typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function h(t){var e=new FileReader,r=f(e);return e.readAsArrayBuffer(t),r}function d(t){var e=new FileReader,r=f(e);return e.readAsText(t),r}function p(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&n(t)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||o(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return d(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(p(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(m)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=a(t),e=s(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},c.prototype["delete"]=function(t){delete this.map[a(t)]},c.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},c.prototype.set=function(t,e){this.map[a(t)]=s(e)},c.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},c.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),u(t)},c.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),u(t)},c.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(t){var e=t.toUpperCase();return b.indexOf(e)>-1?e:t}function w(t,e){e=e||{};var r=e.body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=g(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function m(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(i))}})),e}function x(t){var e=new c,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach((function(t){var r=t.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();e.append(n,i)}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var E=[301,302,303,307,308];_.redirect=function(t,e){if(-1===E.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(S){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,n){return new Promise((function(i,o){var a=new w(t,n);if(a.signal&&a.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function u(){s.abort()}s.onload=function(){var t={status:s.status,statusText:s.statusText,headers:x(s.getAllResponseHeaders()||"")};t.url="responseURL"in s?s.responseURL:t.headers.get("X-Request-URL");var e="response"in s?s.response:s.responseText;i(new _(e,t))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",u),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",u)}),s.send("undefined"===typeof a._bodyInit?null:a._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=c,t.Request=w,t.Response=_),e.Headers=c,e.Request=w,e.Response=_,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0})})({})}("undefined"!==typeof self?self:this)},20157:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(37394),e),i(r(15707),e),i(r(62802),e),i(r(82240),e),i(r(38786),e),i(r(57331),e),i(r(443),e)},37394:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(5276)["default"],a=r(16742)["default"],s=r(17964)["default"],u=r(20172)["default"],c=r(20378)["default"];r(47941),r(92222),r(38862),r(69600),r(21703),r(23157),r(41539),r(78783),r(33948),r(21249),r(47042),r(74916),r(77601),Object.defineProperty(e,"__esModule",{value:!0}),e.defaultExpandOptions=e.ContextParser=void 0,r(81418);var l=r(15600),f=r(15707),h=r(62802),d=r(57331),p=r(443),y=r(74384),v=function(){function t(e){u(this,t),e=e||{},this.documentLoader=e.documentLoader||new h.FetchDocumentLoader,this.documentCache={},this.validateContext=!e.skipValidation,this.expandContentTypeToBase=!!e.expandContentTypeToBase,this.remoteContextsDepthLimit=e.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps=!("redirectSchemaOrgHttps"in e)||!!e.redirectSchemaOrgHttps}return c(t,[{key:"idifyReverseTerms",value:function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],i=t[n];if(i&&"object"===s(i)&&i["@reverse"]&&!i["@id"]){if("string"!==typeof i["@reverse"]||p.Util.isValidKeyword(i["@reverse"]))throw new f.ErrorCoded("Invalid @reverse value, must be absolute IRI or blank node: '".concat(i["@reverse"],"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);i["@id"]=i["@reverse"],p.Util.isPotentialKeyword(i["@reverse"])?delete i["@reverse"]:i["@reverse"]=!0}}return t}},{key:"expandPrefixedTerms",value:function(t,e){for(var r=t.getContextRaw(),n=0,i=Object.keys(r);n<i.length;n++){var o=i[n];if(p.Util.EXPAND_KEYS_BLACKLIST.indexOf(o)<0&&!p.Util.isReservedInternalKeyword(o)){var a=r[o];if(p.Util.isPotentialKeyword(o)&&p.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(o)>=0&&("@type"!==o||"object"===s(r[o])&&!r[o]["@protected"]&&"@set"!==r[o]["@container"]))throw new f.ErrorCoded("Keywords can not be aliased to something else.\nTried mapping ".concat(o," to ").concat(JSON.stringify(a)),f.ERROR_CODES.KEYWORD_REDEFINITION);if(p.Util.ALIAS_RANGE_BLACKLIST.indexOf(p.Util.getContextValueId(a))>=0)throw new f.ErrorCoded("Aliasing to certain keywords is not allowed.\nTried mapping ".concat(o," to ").concat(JSON.stringify(a)),f.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(a&&p.Util.isPotentialKeyword(p.Util.getContextValueId(a))&&!0===a["@prefix"])throw new f.ErrorCoded("Tried to use keyword aliases as prefix: '".concat(o,"': '").concat(JSON.stringify(a),"'"),f.ERROR_CODES.INVALID_TERM_DEFINITION);while(p.Util.isPrefixValue(r[o])){var u=r[o],c=!1;if("string"===typeof u)r[o]=t.expandTerm(u,!0),c=c||u!==r[o];else{var l=u["@id"],h=u["@type"],d=!("@prefix"in u)||p.Util.isValidIri(o);if("@id"in u)void 0!==l&&null!==l&&"string"===typeof l&&(r[o]["@id"]=t.expandTerm(l,!0),c=c||l!==r[o]["@id"]);else if(!p.Util.isPotentialKeyword(o)&&d){var y=t.expandTerm(o,!0);y!==o&&(r[o]["@id"]=y,c=!0)}!h||"string"!==typeof h||"@vocab"===h||u["@container"]&&u["@container"]["@type"]||!d||(r[o]["@type"]=t.expandTerm(h,!0),e&&h===r[o]["@type"]&&(r[o]["@type"]=t.expandTerm(h,!1)),c=c||h!==r[o]["@type"])}if(!c)break}}}}},{key:"normalize",value:function(t,e){var r=e.processingMode,n=e.normalizeLanguageTags;if(n||1===r)for(var i=0,o=Object.keys(t);i<o.length;i++){var a=o[i];if("@language"===a&&"string"===typeof t[a])t[a]=t[a].toLowerCase();else{var u=t[a];u&&"object"===s(u)&&"string"===typeof u["@language"]&&(u["@language"]=u["@language"].toLowerCase())}}}},{key:"containersToHash",value:function(t){for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],i=t[n];if(i&&"object"===s(i))if("string"===typeof i["@container"])i["@container"]=a({},i["@container"],!0);else if(Array.isArray(i["@container"])){var u,c={},l=o(i["@container"]);try{for(l.s();!(u=l.n()).done;){var f=u.value;c[f]=!0}}catch(h){l.e(h)}finally{l.f()}i["@container"]=c}}}},{key:"applyScopedProtected",value:function(t,e){var r=e.processingMode;if(r&&r>=1.1&&t["@protected"]){for(var n=0,i=Object.keys(t);n<i.length;n++){var o=i[n];if(!p.Util.isReservedInternalKeyword(o)&&(!p.Util.isPotentialKeyword(o)&&!p.Util.isTermProtected(t,o))){var a=t[o];a&&"object"===s(a)?"@protected"in t[o]||(t[o]["@protected"]=!0):t[o]={"@id":a,"@protected":!0}}}delete t["@protected"]}}},{key:"validateKeywordRedefinitions",value:function(t,e,r){for(var n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(p.Util.isTermProtected(t,o)){if("string"===typeof e[o]){var a=p.Util.isSimpleTermDefinitionPrefix(e[o],r);e[o]={"@id":e[o]},a&&(e[o]["@prefix"]=!0,t[o]["@prefix"]=!0)}var s=y(t[o]);e[o]["@protected"]=!0;var u=y(e[o]);if(s!==u)throw new f.ErrorCoded("Attempted to override the protected keyword ".concat(o," from ").concat(JSON.stringify(p.Util.getContextValueId(t[o]))," to ").concat(JSON.stringify(p.Util.getContextValueId(e[o]))),f.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}}}},{key:"validate",value:function(e,r){for(var n=r.processingMode,i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(!p.Util.isReservedInternalKeyword(a)){if(""===a)throw new f.ErrorCoded("The empty term is not allowed, got: '".concat(a,"': '").concat(JSON.stringify(e[a]),"'"),f.ERROR_CODES.INVALID_TERM_DEFINITION);var u=e[a],c=s(u);if(p.Util.isPotentialKeyword(a)){switch(a.substr(1)){case"vocab":if(null!==u&&"string"!==c)throw new f.ErrorCoded("Found an invalid @vocab IRI: ".concat(u),f.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(null!==u&&"string"!==c)throw new f.ErrorCoded("Found an invalid @base IRI: ".concat(e[a]),f.ERROR_CODES.INVALID_BASE_IRI);break;case"language":null!==u&&t.validateLanguage(u,!0,f.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(null!==u&&"number"!==c)throw new f.ErrorCoded("Found an invalid @version number: ".concat(u),f.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":null!==u&&t.validateDirection(u,!0);break;case"propagate":if(1===n)throw new f.ErrorCoded("Found an illegal @propagate keyword: ".concat(u),f.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(null!==u&&"boolean"!==c)throw new f.ErrorCoded("Found an invalid @propagate value: ".concat(u),f.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(p.Util.isValidKeyword(a)&&p.Util.isValidKeyword(p.Util.getContextValueId(u)))throw new f.ErrorCoded("Illegal keyword alias in term value, found: '".concat(a,"': '").concat(p.Util.getContextValueId(u),"'"),f.ERROR_CODES.KEYWORD_REDEFINITION)}else if(null!==u)switch(c){case"string":if(p.Util.getPrefix(u,e)===a)throw new f.ErrorCoded("Detected cyclical IRI mapping in context entry: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.CYCLIC_IRI_MAPPING);if(p.Util.isValidIriWeak(a)){if("@type"===u)throw new f.ErrorCoded("IRIs can not be mapped to @type, found: '".concat(a,"': '").concat(u,"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);if(p.Util.isValidIri(u)&&u!==new d.JsonLdContextNormalized(e).expandTerm(a))throw new f.ErrorCoded("IRIs can not be mapped to other IRIs, found: '".concat(a,"': '").concat(u,"'"),f.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!p.Util.isCompactIri(a)&&!("@id"in u)&&("@id"===u["@type"]?!e["@base"]:!e["@vocab"]))throw new f.ErrorCoded("Missing @id in context entry: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);for(var l=0,h=Object.keys(u);l<h.length;l++){var y=h[l],v=u[y];if(v)switch(y){case"@id":if(p.Util.isValidKeyword(v)&&"@type"!==v&&"@id"!==v&&"@graph"!==v)throw new f.ErrorCoded("Illegal keyword alias in term value, found: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);if(p.Util.isValidIriWeak(a)){if("@type"===v)throw new f.ErrorCoded("IRIs can not be mapped to @type, found: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);if(p.Util.isValidIri(v)&&v!==new d.JsonLdContextNormalized(e).expandTerm(a))throw new f.ErrorCoded("IRIs can not be mapped to other IRIs, found: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_IRI_MAPPING)}if("string"!==typeof v)throw new f.ErrorCoded("Detected non-string @id in context entry: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_IRI_MAPPING);if(p.Util.getPrefix(v,e)===a)throw new f.ErrorCoded("Detected cyclical IRI mapping in context entry: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if("@type"===u["@container"]&&"@id"!==v&&"@vocab"!==v)throw new f.ErrorCoded("@container: @type only allows @type: @id or @vocab, but got: '".concat(a,"': '").concat(v,"'"),f.ERROR_CODES.INVALID_TYPE_MAPPING);if("string"!==typeof v)throw new f.ErrorCoded("The value of an '@type' must be a string, got '".concat(JSON.stringify(c),"'"),f.ERROR_CODES.INVALID_TYPE_MAPPING);if("@id"!==v&&"@vocab"!==v&&(1===n||"@json"!==v)&&(1===n||"@none"!==v)&&("_"===v[0]||!p.Util.isValidIri(v)))throw new f.ErrorCoded("A context @type must be an absolute IRI, found: '".concat(a,"': '").concat(v,"'"),f.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if("string"===typeof v&&u["@id"]&&u["@id"]!==v)throw new f.ErrorCoded("Found non-matching @id and @reverse term values in '".concat(a,"':'").concat(v,"' and '").concat(u["@id"],"'"),f.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in u)throw new f.ErrorCoded("@nest is not allowed in the reverse property '".concat(a,"'"),f.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(1===n&&(Object.keys(v).length>1||p.Util.CONTAINERS_1_0.indexOf(Object.keys(v)[0])<0))throw new f.ErrorCoded("Invalid term @container for '".concat(a,"' ('").concat(Object.keys(v),"') in 1.0, must be only one of ").concat(p.Util.CONTAINERS_1_0.join(", ")),f.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(var b=0,g=Object.keys(v);b<g.length;b++){var w=g[b];if("@list"===w&&u["@reverse"])throw new f.ErrorCoded("Term value can not be @container: @list and @reverse at the same time on '".concat(a,"'"),f.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(p.Util.CONTAINERS.indexOf(w)<0)throw new f.ErrorCoded("Invalid term @container for '".concat(a,"' ('").concat(w,"'), must be one of ").concat(p.Util.CONTAINERS.join(", ")),f.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":t.validateLanguage(v,!0,f.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":t.validateDirection(v,!0);break;case"@prefix":if(null!==v&&"boolean"!==typeof v)throw new f.ErrorCoded("Found an invalid term @prefix boolean in: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in u)&&!p.Util.isValidIri(a))throw new f.ErrorCoded("Invalid @prefix definition for '".concat(a,"' ('").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(1===n||!u["@container"]||!u["@container"]["@index"])throw new f.ErrorCoded("Attempt to add illegal key to value object: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(p.Util.isPotentialKeyword(v)&&"@nest"!==v)throw new f.ErrorCoded("Found an invalid term @nest value in: '".concat(a,"': '").concat(JSON.stringify(u),"'"),f.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new f.ErrorCoded("Found an invalid term value: '".concat(a,"': '").concat(u,"'"),f.ERROR_CODES.INVALID_TERM_DEFINITION)}}}}},{key:"applyBaseEntry",value:function(t,e,r){return"string"===typeof t||(r&&!("@base"in t)&&e.parentContext&&"object"===s(e.parentContext)&&"@base"in e.parentContext&&(t["@base"]=e.parentContext["@base"],e.parentContext["@__baseDocument"]&&(t["@__baseDocument"]=!0)),e.baseIRI&&!e.external&&("@base"in t?null===t["@base"]||"string"!==typeof t["@base"]||p.Util.isValidIri(t["@base"])||(t["@base"]=l.resolve(t["@base"],e.parentContext&&e.parentContext["@base"]||e.baseIRI)):(t["@base"]=e.baseIRI,t["@__baseDocument"]=!0))),t}},{key:"normalizeContextIri",value:function(t,e){if(!p.Util.isValidIri(t))try{t=l.resolve(t,e)}catch(r){throw new Error("Invalid context IRI: ".concat(t))}return this.redirectSchemaOrgHttps&&t.startsWith("http://schema.org")&&(t="https://schema.org/"),t}},{key:"parseInnerContexts",value:function(){var t=i(n().mark((function t(e,r){var i,o,a,u,c;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=0,o=Object.keys(e);case 1:if(!(i<o.length)){t.next=24;break}if(a=o[i],u=e[a],!u||"object"!==s(u)){t.next=21;break}if(!("@context"in u)||null===u["@context"]||r.ignoreScopedContexts){t.next=21;break}if(!this.validateContext){t.next=18;break}return t.prev=7,c=Object.assign({},e),c[a]=Object.assign({},c[a]),delete c[a]["@context"],t.next=13,this.parse(u["@context"],Object.assign(Object.assign({},r),{parentContext:c,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}));case 13:t.next=18;break;case 15:throw t.prev=15,t.t0=t["catch"](7),new f.ErrorCoded(t.t0.message,f.ERROR_CODES.INVALID_SCOPED_CONTEXT);case 18:return t.next=20,this.parse(u["@context"],Object.assign(Object.assign({},r),{minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:e}));case 20:u["@context"]=t.sent.getContextRaw();case 21:i++,t.next=1;break;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t,this,[[7,15]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"parse",value:function(){var r=i(n().mark((function r(i){var o,u,c,l,h,y,v,b,g,w,m,x,_,E,k,S,O,C,R,I,D=this,T=arguments;return n().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(o=T.length>1&&void 0!==T[1]?T[1]:{},u=o.baseIRI,c=o.parentContext,l=o.external,h=o.processingMode,y=void 0===h?t.DEFAULT_PROCESSING_MODE:h,v=o.normalizeLanguageTags,b=o.ignoreProtection,g=o.minimalProcessing,w=c,m=o.remoteContexts||{},!(Object.keys(m).length>=this.remoteContextsDepthLimit)){r.next=6;break}throw new f.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),f.ERROR_CODES.CONTEXT_OVERFLOW);case 6:if(null!==i&&void 0!==i){r.next=12;break}if(b||!w||!p.Util.hasProtectedTerms(w)){r.next=9;break}throw new f.ErrorCoded("Illegal context nullification when terms are protected",f.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);case 9:return r.abrupt("return",new d.JsonLdContextNormalized(this.applyBaseEntry({},o,!1)));case 12:if("string"!==typeof i){r.next=29;break}if(x=this.normalizeContextIri(i,u),_=this.getOverriddenLoad(x,o),!_){r.next=17;break}return r.abrupt("return",new d.JsonLdContextNormalized(_));case 17:return r.t0=this,r.next=20,this.load(x);case 20:return r.t1=r.sent,r.t2=Object.assign(Object.assign({},o),{baseIRI:x,external:!0,remoteContexts:Object.assign(Object.assign({},m),a({},x,!0))}),r.next=24,r.t0.parse.call(r.t0,r.t1,r.t2);case 24:return E=r.sent,this.applyBaseEntry(E.getContextRaw(),o,!0),r.abrupt("return",E);case 29:if(!Array.isArray(i)){r.next=43;break}return k=[],r.next=33,Promise.all(i.map((function(t,e){if("string"===typeof t){var r=D.normalizeContextIri(t,u);k[e]=r;var n=D.getOverriddenLoad(r,o);return n||D.load(r)}return t})));case 33:if(S=r.sent,!g){r.next=36;break}return r.abrupt("return",new d.JsonLdContextNormalized(S));case 36:return r.next=38,S.reduce((function(t,e,r){return t.then((function(t){return D.parse(e,Object.assign(Object.assign({},o),{baseIRI:k[r]||o.baseIRI,external:!!k[r]||o.external,parentContext:t.getContextRaw(),remoteContexts:k[r]?Object.assign(Object.assign({},m),a({},k[r],!0)):m}))}))}),Promise.resolve(new d.JsonLdContextNormalized(w||{})));case 38:return O=r.sent,this.applyBaseEntry(O.getContextRaw(),o,!0),r.abrupt("return",O);case 43:if("object"!==s(i)){r.next=82;break}if(!("@context"in i)){r.next=48;break}return r.next=47,this.parse(i["@context"],o);case 47:return r.abrupt("return",r.sent);case 48:if(i=JSON.parse(JSON.stringify(i)),w&&!g&&(w=JSON.parse(JSON.stringify(w))),C={},l&&delete i["@base"],this.applyBaseEntry(i,o,!0),this.containersToHash(i),!g){r.next=56;break}return r.abrupt("return",new d.JsonLdContextNormalized(i));case 56:if(R={},!("@import"in i)){r.next=68;break}if(!(y>=1.1)){r.next=67;break}if("string"===typeof i["@import"]){r.next=61;break}throw new f.ErrorCoded("An @import value must be a string, but got "+s(i["@import"]),f.ERROR_CODES.INVALID_IMPORT_VALUE);case 61:return r.next=63,this.loadImportContext(this.normalizeContextIri(i["@import"],u));case 63:R=r.sent,delete i["@import"],r.next=68;break;case 67:throw new f.ErrorCoded("Context importing is not supported in JSON-LD 1.0",f.ERROR_CODES.INVALID_CONTEXT_ENTRY);case 68:return C=Object.assign(Object.assign(Object.assign(Object.assign({},C),"object"===s(w)?w:{}),R),i),I=new d.JsonLdContextNormalized(C),r.next=72,this.parseInnerContexts(C,o);case 72:return(C&&C["@version"]||t.DEFAULT_PROCESSING_MODE)>=1.1&&(i["@vocab"]&&"string"===typeof i["@vocab"]||""===i["@vocab"])&&i["@vocab"].indexOf(":")<0&&w&&"@vocab"in w&&(C["@vocab"]=w["@vocab"]+i["@vocab"]),this.idifyReverseTerms(C),this.expandPrefixedTerms(I,this.expandContentTypeToBase),!b&&w&&y>=1.1&&this.validateKeywordRedefinitions(w,C,e.defaultExpandOptions),this.normalize(C,{processingMode:y,normalizeLanguageTags:v}),this.applyScopedProtected(C,{processingMode:y}),this.validateContext&&this.validate(C,{processingMode:y}),r.abrupt("return",I);case 82:throw new f.ErrorCoded("Tried parsing a context that is not a string, array or object, but got ".concat(i),f.ERROR_CODES.INVALID_LOCAL_CONTEXT);case 83:case"end":return r.stop()}}),r,this)})));function o(t){return r.apply(this,arguments)}return o}()},{key:"load",value:function(){var t=i(n().mark((function t(e){var r,i;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=this.documentCache[e],!r){t.next=3;break}return t.abrupt("return","string"===typeof r?r:Array.isArray(r)?r.slice():Object.assign({},r));case 3:return t.prev=3,t.next=6,this.documentLoader.load(e);case 6:i=t.sent,t.next=12;break;case 9:throw t.prev=9,t.t0=t["catch"](3),new f.ErrorCoded("Failed to load remote context ".concat(e,": ").concat(t.t0.message),f.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED);case 12:if("@context"in i){t.next=14;break}throw new f.ErrorCoded("Missing @context in remote context at ".concat(e),f.ERROR_CODES.INVALID_REMOTE_CONTEXT);case 14:return t.abrupt("return",this.documentCache[e]=i["@context"]);case 15:case"end":return t.stop()}}),t,this,[[3,9]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getOverriddenLoad",value:function(t,e){if(t in(e.remoteContexts||{})){if(e.ignoreRemoteScopedContexts)return t;throw new f.ErrorCoded("Detected a cyclic context inclusion of "+t,f.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}},{key:"loadImportContext",value:function(){var t=i(n().mark((function t(e){var r;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.load(e);case 2:if(r=t.sent,"object"===s(r)&&!Array.isArray(r)){t.next=5;break}throw new f.ErrorCoded("An imported context must be a single object: "+e,f.ERROR_CODES.INVALID_REMOTE_CONTEXT);case 5:if(!("@import"in r)){t.next=7;break}throw new f.ErrorCoded("An imported context can not import another context: "+e,f.ERROR_CODES.INVALID_CONTEXT_ENTRY);case 7:return this.containersToHash(r),t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}],[{key:"validateLanguage",value:function(t,e,r){if("string"!==typeof t)throw new f.ErrorCoded("The value of an '@language' must be a string, got '".concat(JSON.stringify(t),"'"),r);if(!p.Util.REGEX_LANGUAGE_TAG.test(t)){if(e)throw new f.ErrorCoded("The value of an '@language' must be a valid language tag, got '".concat(JSON.stringify(t),"'"),r);return!1}return!0}},{key:"validateDirection",value:function(t,e){if("string"!==typeof t)throw new f.ErrorCoded("The value of an '@direction' must be a string, got '".concat(JSON.stringify(t),"'"),f.ERROR_CODES.INVALID_BASE_DIRECTION);if(!p.Util.REGEX_DIRECTION_TAG.test(t)){if(e)throw new f.ErrorCoded("The value of an '@direction' must be 'ltr' or 'rtl', got '".concat(JSON.stringify(t),"'"),f.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}}]),t}();e.ContextParser=v,v.DEFAULT_PROCESSING_MODE=1.1,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},15707:function(t,e,r){"use strict";var n=r(20378)["default"],i=r(20172)["default"],o=r(95967)["default"],a=r(13706)["default"],s=r(47254)["default"];r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=e.ErrorCoded=void 0;var u=function(t){o(r,t);var e=a(r);function r(t,n){var o;return i(this,r),o=e.call(this,t),o.code=n,o}return n(r)}(s(Error));e.ErrorCoded=u,function(t){t["COLLIDING_KEYWORDS"]="colliding keywords",t["CONFLICTING_INDEXES"]="conflicting indexes",t["CYCLIC_IRI_MAPPING"]="cyclic IRI mapping",t["INVALID_ID_VALUE"]="invalid @id value",t["INVALID_INDEX_VALUE"]="invalid @index value",t["INVALID_NEST_VALUE"]="invalid @nest value",t["INVALID_PREFIX_VALUE"]="invalid @prefix value",t["INVALID_PROPAGATE_VALUE"]="invalid @propagate value",t["INVALID_REVERSE_VALUE"]="invalid @reverse value",t["INVALID_IMPORT_VALUE"]="invalid @import value",t["INVALID_VERSION_VALUE"]="invalid @version value",t["INVALID_BASE_IRI"]="invalid base IRI",t["INVALID_CONTAINER_MAPPING"]="invalid container mapping",t["INVALID_CONTEXT_ENTRY"]="invalid context entry",t["INVALID_CONTEXT_NULLIFICATION"]="invalid context nullification",t["INVALID_DEFAULT_LANGUAGE"]="invalid default language",t["INVALID_INCLUDED_VALUE"]="invalid @included value",t["INVALID_IRI_MAPPING"]="invalid IRI mapping",t["INVALID_JSON_LITERAL"]="invalid JSON literal",t["INVALID_KEYWORD_ALIAS"]="invalid keyword alias",t["INVALID_LANGUAGE_MAP_VALUE"]="invalid language map value",t["INVALID_LANGUAGE_MAPPING"]="invalid language mapping",t["INVALID_LANGUAGE_TAGGED_STRING"]="invalid language-tagged string",t["INVALID_LANGUAGE_TAGGED_VALUE"]="invalid language-tagged value",t["INVALID_LOCAL_CONTEXT"]="invalid local context",t["INVALID_REMOTE_CONTEXT"]="invalid remote context",t["INVALID_REVERSE_PROPERTY"]="invalid reverse property",t["INVALID_REVERSE_PROPERTY_MAP"]="invalid reverse property map",t["INVALID_REVERSE_PROPERTY_VALUE"]="invalid reverse property value",t["INVALID_SCOPED_CONTEXT"]="invalid scoped context",t["INVALID_SCRIPT_ELEMENT"]="invalid script element",t["INVALID_SET_OR_LIST_OBJECT"]="invalid set or list object",t["INVALID_TERM_DEFINITION"]="invalid term definition",t["INVALID_TYPE_MAPPING"]="invalid type mapping",t["INVALID_TYPE_VALUE"]="invalid type value",t["INVALID_TYPED_VALUE"]="invalid typed value",t["INVALID_VALUE_OBJECT"]="invalid value object",t["INVALID_VALUE_OBJECT_VALUE"]="invalid value object value",t["INVALID_VOCAB_MAPPING"]="invalid vocab mapping",t["IRI_CONFUSED_WITH_PREFIX"]="IRI confused with prefix",t["KEYWORD_REDEFINITION"]="keyword redefinition",t["LOADING_DOCUMENT_FAILED"]="loading document failed",t["LOADING_REMOTE_CONTEXT_FAILED"]="loading remote context failed",t["MULTIPLE_CONTEXT_LINK_HEADERS"]="multiple context link headers",t["PROCESSING_MODE_CONFLICT"]="processing mode conflict",t["PROTECTED_TERM_REDEFINITION"]="protected term redefinition",t["CONTEXT_OVERFLOW"]="context overflow",t["INVALID_BASE_DIRECTION"]="invalid base direction",t["RECURSIVE_CONTEXT_INCLUSION"]="recursive context inclusion",t["INVALID_STREAMING_KEY_ORDER"]="invalid streaming key order"}(e.ERROR_CODES||(e.ERROR_CODES={}))},62802:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(5276)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"];r(41539),r(54747),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.FetchDocumentLoader=void 0,r(81418);var u=r(15707),c=r(12121),l=r(15600),f=function(){function t(e){a(this,t),this.fetcher=e}return s(t,[{key:"load",value:function(){var t=o(n().mark((function t(e){var r,o,a,s;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});case 2:if(r=t.sent,!r.ok||!r.headers){t.next=19;break}if(o=r.headers.get("Content-Type"),o&&(a=o.indexOf(";"),a>0&&(o=o.substr(0,a))),"application/ld+json"!==o){t.next=12;break}return t.next=9,r.json();case 9:return t.abrupt("return",t.sent);case 12:if(!r.headers.has("Link")){t.next=16;break}if(r.headers.forEach((function(t,r){if("link"===r){var n,o=c.parse(t),a=i(o.get("type","application/ld+json"));try{for(a.s();!(n=a.n()).done;){var u=n.value;if("alternate"===u.rel){if(s)throw new Error("Multiple JSON-LD alternate links were found on "+e);s=l.resolve(u.uri,e)}}}catch(f){a.e(f)}finally{a.f()}}})),!s){t.next=16;break}return t.abrupt("return",this.load(s));case 16:throw new u.ErrorCoded("Unsupported JSON-LD media type ".concat(o),u.ERROR_CODES.LOADING_DOCUMENT_FAILED);case 17:t.next=20;break;case 19:throw new Error(r.statusText||"Status code: ".concat(r.status));case 20:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e.FetchDocumentLoader=f},82240:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},38786:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})},57331:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];r(92222),r(38862),r(23157),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonLdContextNormalized=void 0;var o=r(15600),a=r(37394),s=r(15707),u=r(443),c=function(){function t(e){n(this,t),this.contextRaw=e}return i(t,[{key:"getContextRaw",value:function(){return this.contextRaw}},{key:"expandTerm",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.defaultExpandOptions,n=this.contextRaw[t];if(null===n||n&&null===n["@id"])return null;var i=!0;if(n&&e){var c=u.Util.getContextValueId(n);if(c&&c!==t){if("string"===typeof c&&(u.Util.isValidIri(c)||u.Util.isValidKeyword(c)))return c;u.Util.isPotentialKeyword(c)||(i=!1)}}var l=u.Util.getPrefix(t,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||""===f)&&f.indexOf(":")<0,d=this.contextRaw["@base"],p=u.Util.isPotentialKeyword(t);if(l){var y=this.contextRaw[l],v=u.Util.getContextValueId(y);if(v){if("string"!==typeof y&&r.allowPrefixForcing){if("_"!==v[0]&&!p&&!y["@prefix"]&&!(t in this.contextRaw))return t}else if(!u.Util.isSimpleTermDefinitionPrefix(v,r))return t;return v+t.substr(l.length+1)}}else{if(e&&(f||""===f||r.allowVocabRelativeToBase&&d&&h)&&!p&&!u.Util.isCompactIri(t)){if(h){if(r.allowVocabRelativeToBase)return(f||d?o.resolve(f,d):"")+t;throw new s.ErrorCoded("Relative vocab expansion for term '".concat(t,"' with vocab '").concat(f,"' is not allowed."),s.ERROR_CODES.INVALID_VOCAB_MAPPING)}return f+t}if(!e&&d&&!p&&!u.Util.isCompactIri(t))return o.resolve(t,d)}if(i)return t;throw new s.ErrorCoded("Invalid IRI mapping found for context entry '".concat(t,"': '").concat(JSON.stringify(n),"'"),s.ERROR_CODES.INVALID_IRI_MAPPING)}},{key:"compactIri",value:function(t,e){if(e&&this.contextRaw["@vocab"]&&t.startsWith(this.contextRaw["@vocab"]))return t.substr(this.contextRaw["@vocab"].length);if(!e&&this.contextRaw["@base"]&&t.startsWith(this.contextRaw["@base"]))return t.substr(this.contextRaw["@base"].length);var r={prefix:"",suffix:t};for(var n in this.contextRaw){var i=this.contextRaw[n];if(i&&!u.Util.isPotentialKeyword(n)){var o=u.Util.getContextValueId(i);if(t.startsWith(o)){var a=t.substr(o.length);if(a)a.length<r.suffix.length&&(r.prefix=n,r.suffix=a);else if(e)return n}}}return r.prefix?r.prefix+":"+r.suffix:t}}]),t}();e.JsonLdContextNormalized=c},443:function(t,e,r){"use strict";var n=r(17964)["default"],i=r(20172)["default"],o=r(20378)["default"];r(74916),r(77601),r(47941),r(23157),Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var a=function(){function t(){i(this,t)}return o(t,null,[{key:"isCompactIri",value:function(t){return t.indexOf(":")>0&&!(t&&"#"===t[0])}},{key:"getPrefix",value:function(t,e){if(t&&"#"===t[0])return null;var r=t.indexOf(":");if(r>=0){if(t.length>r+1&&"/"===t.charAt(r+1)&&"/"===t.charAt(r+2))return null;var n=t.substr(0,r);if("_"===n)return null;if(e[n])return n}return null}},{key:"getContextValueId",value:function(t){if(null===t||"string"===typeof t)return t;var e=t["@id"];return e||null}},{key:"isSimpleTermDefinitionPrefix",value:function(e,r){return!t.isPotentialKeyword(e)&&("_"===e[0]||r.allowPrefixNonGenDelims||t.isPrefixIriEndingWithGenDelim(e))}},{key:"isPotentialKeyword",value:function(e){return"string"===typeof e&&t.KEYWORD_REGEX.test(e)}},{key:"isPrefixIriEndingWithGenDelim",value:function(e){return t.ENDS_WITH_GEN_DELIM.test(e)}},{key:"isPrefixValue",value:function(t){return t&&("string"===typeof t||t&&"object"===n(t))}},{key:"isValidIri",value:function(e){return Boolean(e&&t.IRI_REGEX.test(e))}},{key:"isValidIriWeak",value:function(e){return!!e&&":"!==e[0]&&t.IRI_REGEX_WEAK.test(e)}},{key:"isValidKeyword",value:function(e){return t.VALID_KEYWORDS[e]}},{key:"isTermProtected",value:function(t,e){var r=t[e];return!("string"===typeof r)&&r&&r["@protected"]}},{key:"hasProtectedTerms",value:function(e){for(var r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];if(t.isTermProtected(e,i))return!0}return!1}},{key:"isReservedInternalKeyword",value:function(t){return t.startsWith("@__")}}]),t}();e.Util=a,a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"]},97077:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(64884),e)},95072:function(t,e,r){"use strict";var n=r(30020)["default"],i=r(20172)["default"],o=r(20378)["default"];r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.ContextTree=void 0;var a=function(){function t(){i(this,t),this.subTrees={}}return o(t,[{key:"getContext",value:function(t){if(t.length>0){var e=n(t),r=e[0],i=e.slice(1),o=this.subTrees[r];if(o){var a=o.getContext(i);if(a)return a.then((function(t){var e=t.context,r=t.depth;return{context:e,depth:r+1}}))}}return this.context?this.context.then((function(t){return{context:t,depth:0}})):null}},{key:"setContext",value:function(e,r){if(0===e.length)this.context=r;else{var i=n(e),o=i[0],a=i.slice(1),s=this.subTrees[o];s||(s=this.subTrees[o]=new t),s.setContext(a,r)}}},{key:"removeContext",value:function(t){this.setContext(t,null)}}]),t}();e.ContextTree=a},64884:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(5276)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"],u=r(159)["default"],c=r(95967)["default"],l=r(13706)["default"];r(41539),r(21703),r(40561),r(47042),r(74916),r(77601),r(21249),r(43290),r(33948),r(2707),r(27852),r(54747),r(92222),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonLdParser=void 0;var f=r(78296),h=r(20157),d=r(66639),p=r(54917),y=r(75288),v=r(59369),b=r(26016),g=r(94422),w=r(25323),m=r(30640),x=r(82822),_=r(25116),E=r(71867),k=r(64133),S=r(26453),O=r(989),C=r(51106),R=r(12121),I=function(t){c(r,t);var e=l(r);function r(t){var n;return a(this,r),n=e.call(this,{readableObjectMode:!0}),t=t||{},n.options=t,n.parsingContext=new O.ParsingContext(Object.assign({parser:u(n)},t)),n.util=new C.Util({dataFactory:t.dataFactory,parsingContext:n.parsingContext}),n.jsonParser=new f,n.contextJobs=[],n.typeJobs=[],n.contextAwaitingJobs=[],n.lastDepth=0,n.lastKeys=[],n.lastOnValueJob=Promise.resolve(),n.attachJsonParserListeners(),n.on("end",(function(){"undefined"!==typeof n.jsonParser.mode&&n.emit("error",new Error("Unclosed document"))})),n}return s(r,[{key:"import",value:function(t){var e=new d.PassThrough({readableObjectMode:!0});t.on("error",(function(t){return n.emit("error",t)})),t.on("data",(function(t){return e.push(t)})),t.on("end",(function(){return e.push(null)}));var n=e.pipe(new r(this.options));return n}},{key:"_transform",value:function(t,e,r){this.jsonParser.write(t),this.lastOnValueJob.then((function(){return r()}),(function(t){return r(t)}))}},{key:"newOnValueJob",value:function(){var t=o(n().mark((function t(e,o,a,s){var u,c,l,f,d,p,v,b,g,w,m,x;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(u=!0,!(s&&a<this.lastDepth)){t.next=13;break}return c=this.parsingContext.listPointerStack[this.lastDepth],c&&(c.value&&this.emit("data",this.util.dataFactory.quad(c.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),c.listId.listHead=!0,this.parsingContext.idStack[c.listRootDepth+1]=[c.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),t.next=6,y.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth);case 6:if(!t.sent){t.next=11;break}this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),u=!1,t.next=13;break;case 11:return t.next=13,this.flushBuffer(this.lastDepth,this.lastKeys);case 13:return t.next=15,this.util.unaliasKeyword(e[a],e,a);case 15:return l=t.sent,t.next=18,this.util.unaliasKeywordParent(e,a);case 18:f=t.sent,this.parsingContext.emittedStack[a]=!0,d=!0,h.Util.isValidKeyword(l)&&"@reverse"===f&&"@context"!==l&&this.emit("error",new h.ErrorCoded("Found the @id '".concat(o,"' inside an @reverse property"),h.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP)),p=!1,this.parsingContext.validationStack.length>1&&(p=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property),v=Math.max(1,this.parsingContext.validationStack.length-1);case 25:if(!(v<e.length-1)){t.next=42;break}if(t.t0=this.parsingContext.validationStack[v],t.t0){t.next=31;break}return t.next=30,this.validateKey(e.slice(0,v+1),v,p);case 30:t.t0=this.parsingContext.validationStack[v]=t.sent;case 31:if(b=t.t0,b.valid){t.next=38;break}return this.parsingContext.emittedStack[a]=!1,d=!1,t.abrupt("break",42);case 38:!p&&b.property&&(p=!0);case 39:v++,t.next=25;break;case 42:if(this.util.isLiteral(a)&&(d=!1),!d){t.next=67;break}g=i(r.ENTRY_HANDLERS),t.prev=45,g.s();case 47:if((w=g.n()).done){t.next=59;break}return m=w.value,t.next=51,m.test(this.parsingContext,this.util,l,e,a);case 51:if(x=t.sent,!x){t.next=57;break}return t.next=55,m.handle(this.parsingContext,this.util,l,e,o,a,x);case 55:return m.isStackProcessor()&&(this.parsingContext.processingStack[a]=!0),t.abrupt("break",59);case 57:t.next=47;break;case 59:t.next=64;break;case 61:t.prev=61,t.t1=t["catch"](45),g.e(t.t1);case 64:return t.prev=64,g.f(),t.finish(64);case 67:if(0!==a||!Array.isArray(o)){t.next=70;break}return t.next=70,this.util.validateValueIndexes(o);case 70:u&&a<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=a,this.lastKeys=e,this.parsingContext.unaliasedKeywordCacheStack.splice(a-1);case 74:case"end":return t.stop()}}),t,this,[[45,61,64,67]])})));function e(e,r,n,i){return t.apply(this,arguments)}return e}()},{key:"flushStacks",value:function(t){this.parsingContext.processingStack.splice(t,1),this.parsingContext.processingType.splice(t,1),this.parsingContext.emittedStack.splice(t,1),this.parsingContext.idStack.splice(t,1),this.parsingContext.graphStack.splice(t+1,1),this.parsingContext.graphContainerTermStack.splice(t,1),this.parsingContext.jsonLiteralStack.splice(t,1),this.parsingContext.validationStack.splice(t-1,2),this.parsingContext.literalStack.splice(t,this.parsingContext.literalStack.length-t)}},{key:"flushBuffer",value:function(){var t=o(n().mark((function t(e,r){var o,a,s,u,c,l,f,h,d,p,y,v,b,g,w,m,x,_,E,k,S,O,C,R,I;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=this.parsingContext.idStack[e],o||(o=this.parsingContext.idStack[e]=[this.util.dataFactory.blankNode()]),a=this.parsingContext.unidentifiedValuesBuffer[e],!a){t.next=49;break}s=i(o),t.prev=5,s.s();case 7:if((u=s.n()).done){t.next=38;break}return c=u.value,t.next=11,this.util.getDepthOffsetGraph(e,r);case 11:if(l=t.sent,!(this.parsingContext.graphStack[e]||l>=0)){t.next=16;break}t.t0=this.parsingContext.idStack[e-l-1],t.next=20;break;case 16:return t.next=18,this.util.getGraphContainerValue(r,e);case 18:t.t1=t.sent,t.t0=[t.t1];case 20:if(f=t.t0,!f){t.next=26;break}h=i(f);try{for(h.s();!(d=h.n()).done;){p=d.value,this.parsingContext.emittedStack[e]=!0,y=i(a);try{for(y.s();!(v=y.n()).done;)b=v.value,b.reverse?this.parsingContext.emitQuad(e,this.util.dataFactory.quad(b.object,b.predicate,c,p)):this.parsingContext.emitQuad(e,this.util.dataFactory.quad(c,b.predicate,b.object,p))}catch(n){y.e(n)}finally{y.f()}}}catch(n){h.e(n)}finally{h.f()}t.next=36;break;case 26:return t.t2=this.parsingContext,t.t3=e,t.next=30,this.util.getDepthOffsetGraph(e,r);case 30:t.t4=t.sent,t.t5=t.t3-t.t4,t.t6=t.t5-1,g=t.t2.getUnidentifiedGraphBufferSafe.call(t.t2,t.t6),w=i(a);try{for(w.s();!(m=w.n()).done;)x=m.value,x.reverse?g.push({object:c,predicate:x.predicate,subject:x.object}):g.push({object:x.object,predicate:x.predicate,subject:c})}catch(n){w.e(n)}finally{w.f()}case 36:t.next=7;break;case 38:t.next=43;break;case 40:t.prev=40,t.t7=t["catch"](5),s.e(t.t7);case 43:return t.prev=43,s.f(),t.finish(43);case 46:this.parsingContext.unidentifiedValuesBuffer.splice(e,1),this.parsingContext.literalStack.splice(e,1),this.parsingContext.jsonLiteralStack.splice(e,1);case 49:if(_=this.parsingContext.unidentifiedGraphsBuffer[e],_){E=i(o);try{for(E.s();!(k=E.n()).done;){S=k.value,O=1!==e||"BlankNode"!==S.termType||this.parsingContext.topLevelProperties?S:this.util.getDefaultGraph(),this.parsingContext.emittedStack[e]=!0,C=i(_);try{for(C.s();!(R=C.n()).done;)I=R.value,this.parsingContext.emitQuad(e,this.util.dataFactory.quad(I.subject,I.predicate,I.object,O))}catch(n){C.e(n)}finally{C.f()}}}catch(n){E.e(n)}finally{E.f()}this.parsingContext.unidentifiedGraphsBuffer.splice(e,1)}case 51:case"end":return t.stop()}}),t,this,[[5,40,43,46]])})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"validateKey",value:function(){var t=o(n().mark((function t(e,o,a){var s,u,c;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=i(r.ENTRY_HANDLERS),t.prev=1,s.s();case 3:if((u=s.n()).done){t.next=11;break}return c=u.value,t.next=7,c.validate(this.parsingContext,this.util,e,o,a);case 7:if(!t.sent){t.next=9;break}return t.abrupt("return",{valid:!0,property:a||c.isPropertyHandler()});case 9:t.next=3;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),s.e(t.t0);case 16:return t.prev=16,s.f(),t.finish(16);case 19:return t.abrupt("return",{valid:!1,property:!1});case 20:case"end":return t.stop()}}),t,this,[[1,13,16,19]])})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"attachJsonParserListeners",value:function(){var t=this;this.jsonParser.onValue=function(e){var r=t.jsonParser.stack.length,n=new Array(r+1).fill(0).map((function(e,n){return n===r?t.jsonParser.key:t.jsonParser.stack[n].key}));if(!t.isParsingContextInner(r)){var i=function(){return t.newOnValueJob(n,e,r,!0)};if(t.parsingContext.streamingProfile||t.parsingContext.contextTree.getContext(n.slice(0,-1)))t.lastOnValueJob=t.lastOnValueJob.then(i);else if("@context"===n[r]){var o=t.contextJobs[r];o||(o=t.contextJobs[r]=[]),o.push(i)}else"@type"===n[r]||"number"===typeof n[r]&&"@type"===n[r-1]?t.typeJobs.push({job:i,keys:n.slice(0,n.length-1)}):t.contextAwaitingJobs.push({job:i,keys:n});t.parsingContext.streamingProfile||0!==r||(t.lastOnValueJob=t.lastOnValueJob.then((function(){return t.executeBufferedJobs()})))}},this.jsonParser.onError=function(e){t.emit("error",e)}}},{key:"isParsingContextInner",value:function(t){for(var e=t;e>0;e--)if("@context"===this.jsonParser.stack[e-1].key)return!0;return!1}},{key:"executeBufferedJobs",value:function(){var t=o(n().mark((function t(){var e,r,o,a,s,u,c,l,f,h,d,p,y,v,b,g,w,m,x,_,E;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=i(this.contextJobs),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=25;break}if(o=r.value,!o){t.next=23;break}a=i(o),t.prev=7,a.s();case 9:if((s=a.n()).done){t.next=15;break}return u=s.value,t.next=13,u();case 13:t.next=9;break;case 15:t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](7),a.e(t.t0);case 20:return t.prev=20,a.f(),t.finish(20);case 23:t.next=3;break;case 25:t.next=30;break;case 27:t.prev=27,t.t1=t["catch"](1),e.e(t.t1);case 30:return t.prev=30,e.f(),t.finish(30);case 33:this.parsingContext.unaliasedKeywordCacheStack.splice(0),c=i(this.contextAwaitingJobs),t.prev=35,c.s();case 37:if((l=c.n()).done){t.next=68;break}if(f=l.value,!(this.typeJobs.length>0)){t.next=64;break}for(h=[],d=[],p=0;p<this.typeJobs.length;p++)y=this.typeJobs[p],C.Util.isPrefixArray(y.keys,f.keys)&&(h.push(y),d.push(p));v=h.sort((function(t,e){return t.keys.length-e.keys.length})),b=i(v),t.prev=45,b.s();case 47:if((g=b.n()).done){t.next=53;break}return w=g.value,t.next=51,w.job();case 51:t.next=47;break;case 53:t.next=58;break;case 55:t.prev=55,t.t2=t["catch"](45),b.e(t.t2);case 58:return t.prev=58,b.f(),t.finish(58);case 61:m=d.sort().reverse(),x=i(m);try{for(x.s();!(_=x.n()).done;)E=_.value,this.typeJobs.splice(E,1)}catch(n){x.e(n)}finally{x.f()}case 64:return t.next=66,f.job();case 66:t.next=37;break;case 68:t.next=73;break;case 70:t.prev=70,t.t3=t["catch"](35),c.e(t.t3);case 73:return t.prev=73,c.f(),t.finish(73);case 76:case"end":return t.stop()}}),t,this,[[1,27,30,33],[7,17,20,23],[35,70,73,76],[45,55,58,61]])})));function e(){return t.apply(this,arguments)}return e}()}],[{key:"fromHttpResponse",value:function(t,e,n,o){var a,s;if("application/ld+json"!==e){if("application/json"!==e&&!e.endsWith("+json"))throw new h.ErrorCoded("Unsupported JSON-LD media type ".concat(e),h.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(n&&n.has("Link")&&n.forEach((function(e,r){if("link"===r){var n,o=R.parse(e),s=i(o.get("rel","http://www.w3.org/ns/json-ld#context"));try{for(s.s();!(n=s.n()).done;){var u=n.value;if(a)throw new h.ErrorCoded("Multiple JSON-LD context link headers were found on "+t,h.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);a=u.uri}}catch(c){s.e(c)}finally{s.f()}}})),!a&&!(null===o||void 0===o?void 0:o.ignoreMissingContextLinkHeader))throw new h.ErrorCoded("Missing context link header for media type ".concat(e," on ").concat(t),h.ERROR_CODES.LOADING_DOCUMENT_FAILED)}if(n&&n.has("Content-Type")){var u=n.get("Content-Type"),c=/; *profile=([^"]*)/.exec(u);c&&"http://www.w3.org/ns/json-ld#streaming"===c[1]&&(s=!0)}return new r(Object.assign({baseIRI:t,context:a,streamingProfile:s},o||{}))}}]),r}(d.Transform);e.JsonLdParser=I,I.DEFAULT_PROCESSING_MODE="1.1",I.ENTRY_HANDLERS=[new p.EntryHandlerArrayValue,new g.EntryHandlerKeywordContext,new m.EntryHandlerKeywordId,new x.EntryHandlerKeywordIncluded,new w.EntryHandlerKeywordGraph,new _.EntryHandlerKeywordNest,new E.EntryHandlerKeywordType,new S.EntryHandlerKeywordValue,new y.EntryHandlerContainer,new k.EntryHandlerKeywordUnknownFallback,new b.EntryHandlerPredicate,new v.EntryHandlerInvalidFallback]},989:function(t,e,r){"use strict";var n=r(5276)["default"],i=r(17964)["default"],o=r(28861)["default"],a=r(13861)["default"],s=r(20172)["default"],u=r(20378)["default"];r(41539),r(92222),r(47042),r(40561),r(33948),Object.defineProperty(e,"__esModule",{value:!0}),e.ParsingContext=void 0;var c=r(20157),l=r(15707),f=r(95072),h=r(64884),d=function(){function t(e){var r=this;s(this,t),this.contextParser=new c.ContextParser({documentLoader:e.documentLoader,skipValidation:e.skipContextValidation}),this.streamingProfile=!!e.streamingProfile,this.baseIRI=e.baseIRI,this.produceGeneralizedRdf=!!e.produceGeneralizedRdf,this.allowSubjectList=!!e.allowSubjectList,this.processingMode=e.processingMode||h.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!e.strictValues,this.validateValueIndexes=!!e.validateValueIndexes,this.defaultGraph=e.defaultGraph,this.rdfDirection=e.rdfDirection,this.normalizeLanguageTags=e.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=e.streamingProfileAllowOutOfOrderPlainType,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new f.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=e.parser,e.context?(this.rootContext=this.parseContext(e.context),this.rootContext.then((function(t){return r.validateContext(t)}))):this.rootContext=Promise.resolve(new c.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}return u(t,[{key:"parseContext",value:function(){var t=a(o().mark((function t(e,r,n){return o().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.contextParser.parse(e,{baseIRI:this.baseIRI,ignoreProtection:n,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:r,processingMode:this.activeProcessingMode}));case 1:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()},{key:"validateContext",value:function(t){var e=t.getContextRaw()["@version"];if(e){if(this.activeProcessingMode&&e>this.activeProcessingMode)throw new l.ErrorCoded("Unsupported JSON-LD version '".concat(e,"' under active processing mode ").concat(this.activeProcessingMode,"."),l.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&e<this.activeProcessingMode)throw new l.ErrorCoded("Invalid JSON-LD version ".concat(e," under active processing mode ").concat(this.activeProcessingMode,"."),l.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=e}}},{key:"getContext",value:function(){var t=a(o().mark((function t(e){var r,n,a,s,u,l,f,h,d,p,y=arguments;return o().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=y.length>1&&void 0!==y[1]?y[1]:1,n=e;while("number"===typeof e[e.length-1])e=e.slice(0,e.length-1);return r&&(e=e.slice(0,-r)),t.next=6,this.getContextPropagationAware(e);case 6:a=t.sent,s=a.context,u=s.getContextRaw(),l=a.depth;case 10:if(!(l<n.length-r)){t.next=22;break}if(f=n[l],h=u[f],!h||"object"!==i(h)||!("@context"in h)){t.next=19;break}return t.next=16,this.parseContext(h,u,!0);case 16:d=t.sent.getContextRaw(),p=!(f in d)||d[f]["@context"]["@propagate"],!1===p&&l!==n.length-1-r||(u=d,delete u["@propagate"],u[f]=Object.assign({},u[f]),"@id"in h&&(u[f]["@id"]=h["@id"]),delete u[f]["@context"],!1!==p&&this.contextTree.setContext(n.slice(0,l+r),Promise.resolve(new c.JsonLdContextNormalized(u))));case 19:l++,t.next=10;break;case 22:return t.abrupt("return",new c.JsonLdContextNormalized(u));case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getContextPropagationAware",value:function(){var t=a(o().mark((function t(e){var r,n,a,s,u;return o().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.length,n=null;case 2:if(a=!1,!n||!("@__propagateFallback"in n.context.getContextRaw())){t.next=7;break}n.context=new c.JsonLdContextNormalized(n.context.getContextRaw()["@__propagateFallback"]),t.next=17;break;case 7:return n&&(e=e.slice(0,n.depth-1)),t.next=10,this.contextTree.getContext(e);case 10:if(t.t0=t.sent,t.t0){t.next=16;break}return t.next=14,this.rootContext;case 14:t.t1=t.sent,t.t0={context:t.t1,depth:0};case 16:n=t.t0;case 17:s=e[e.length-1],s in n.context.getContextRaw()&&(u=n.context.getContextRaw()[s],u&&"object"===i(u)&&"@context"in u&&(a=!0));case 19:if(n.depth>0&&!1===n.context.getContextRaw()["@propagate"]&&n.depth!==r&&!a){t.next=2;break}case 20:return 0===n.depth&&!1===n.context.getContextRaw()["@propagate"]&&n.depth!==r&&(n.context=new c.JsonLdContextNormalized({})),t.abrupt("return",n);case 22:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"newOnValueJob",value:function(){var t=a(o().mark((function t(e,r,n,i){return o().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.parser.newOnValueJob(e,r,n,i);case 2:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i){return t.apply(this,arguments)}return e}()},{key:"handlePendingContainerFlushBuffers",value:function(){var t=a(o().mark((function t(){var e,r,i;return o().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.pendingContainerFlushBuffers.length>0)){t.next=23;break}e=n(this.pendingContainerFlushBuffers),t.prev=2,e.s();case 4:if((r=e.n()).done){t.next=11;break}return i=r.value,t.next=8,this.parser.flushBuffer(i.depth,i.keys);case 8:this.parser.flushStacks(i.depth);case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.e(t.t0);case 16:return t.prev=16,e.f(),t.finish(16);case 19:return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),t.abrupt("return",!0);case 23:return t.abrupt("return",!1);case 24:case"end":return t.stop()}}),t,this,[[2,13,16,19]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"emitQuad",value:function(t,e){1===t&&(this.topLevelProperties=!0),this.parser.push(e)}},{key:"emitError",value:function(t){this.parser.emit("error",t)}},{key:"emitContext",value:function(t){this.parser.emit("context",t)}},{key:"getUnidentifiedValueBufferSafe",value:function(t){var e=this.unidentifiedValuesBuffer[t];return e||(e=[],this.unidentifiedValuesBuffer[t]=e),e}},{key:"getUnidentifiedGraphBufferSafe",value:function(t){var e=this.unidentifiedGraphsBuffer[t];return e||(e=[],this.unidentifiedGraphsBuffer[t]=e),e}},{key:"getExpandOptions",value:function(){return t.EXPAND_OPTIONS[this.activeProcessingMode]}},{key:"shiftStack",value:function(t,e){var r=this.idStack[t+e];if(r&&(this.idStack[t]=r,this.emittedStack[t]=!0,delete this.idStack[t+e]),this.pendingContainerFlushBuffers.length){var i,o=n(this.pendingContainerFlushBuffers);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.depth>=t+e&&(a.depth-=e,a.keys.splice(t,e))}}catch(s){o.e(s)}finally{o.f()}}this.unidentifiedValuesBuffer[t+e]&&(this.unidentifiedValuesBuffer[t]=this.unidentifiedValuesBuffer[t+e],delete this.unidentifiedValuesBuffer[t+e])}}]),t}();e.ParsingContext=d,d.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}}},51106:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(17964)["default"],o=r(5276)["default"],a=r(13861)["default"],s=r(20172)["default"],u=r(20378)["default"];r(92222),r(38862),r(21703),r(47941),r(47042),r(26833),r(41539),r(39714),r(33948),r(23157),r(35192),r(9653),r(74916),r(15306),r(31354),r(33161),Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var c=r(20157),l=r(85561),f=r(75288),h=r(74384),d=function(){function t(e){s(this,t),this.parsingContext=e.parsingContext,this.dataFactory=e.dataFactory||new l.DataFactory,this.rdfFirst=this.dataFactory.namedNode(t.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(t.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(t.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(t.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(t.RDF+"JSON")}return u(t,[{key:"validateValueIndexes",value:function(){var t=a(n().mark((function t(e){var r,a,s,u,l,f,h;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.parsingContext.validateValueIndexes){t.next=25;break}r={},a=o(e),t.prev=3,a.s();case 5:if((s=a.n()).done){t.next=17;break}if(u=s.value,!u||"object"!==i(u)){t.next=15;break}if(l=u["@id"],f=u["@index"],!l||!f){t.next=15;break}if(h=r[l],!h||h===f){t.next=14;break}throw new c.ErrorCoded("Conflicting @index value for ".concat(l),c.ERROR_CODES.CONFLICTING_INDEXES);case 14:r[l]=f;case 15:t.next=5;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](3),a.e(t.t0);case 22:return t.prev=22,a.f(),t.finish(22);case 25:case"end":return t.stop()}}),t,this,[[3,19,22,25]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"valueToTerm",value:function(){var e=a(n().mark((function e(r,o,a,s,u){var l,f,h,d,p,y,v,b,g,w;return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("@json"!==t.getContextValueType(r,o)){e.next=2;break}return e.abrupt("return",[this.dataFactory.literal(this.valueToJsonString(a),this.rdfJson)]);case 2:l=i(a),e.t0=l,e.next="object"===e.t0?6:"string"===e.t0?175:"boolean"===e.t0?185:"number"===e.t0?196:207;break;case 6:if(null!==a&&void 0!==a){e.next=8;break}return e.abrupt("return",[]);case 8:if(!Array.isArray(a)){e.next=18;break}if(!("@list"in t.getContextValueContainer(r,o))){e.next=15;break}if(0!==a.length){e.next=14;break}return e.abrupt("return",[this.rdfNil]);case 14:return e.abrupt("return",this.parsingContext.idStack[s+1]||[]);case 15:return e.next=17,this.validateValueIndexes(a);case 17:return e.abrupt("return",[]);case 18:return e.next=20,this.getContextSelfOrPropertyScoped(r,o);case 20:if(r=e.sent,!("@context"in a)){e.next=30;break}return e.t1=this.parsingContext,e.t2=a["@context"],e.next=26,this.parsingContext.getContext(u,0);case 26:return e.t3=e.sent.getContextRaw(),e.next=29,e.t1.parseContext.call(e.t1,e.t2,e.t3);case 29:r=e.sent;case 30:return e.next=32,this.unaliasKeywords(a,u,s,r);case 32:if(a=e.sent,!("@value"in a)){e.next=108;break}e.t4=n().keys(a);case 35:if((e.t5=e.t4()).done){e.next=54;break}o=e.t5.value,v=a[o],e.t6=o,e.next="@value"===e.t6?41:"@language"===e.t6?43:"@direction"===e.t6?45:"@type"===e.t6?47:"@index"===e.t6?49:51;break;case 41:return f=v,e.abrupt("break",52);case 43:return h=v,e.abrupt("break",52);case 45:return d=v,e.abrupt("break",52);case 47:return p=v,e.abrupt("break",52);case 49:return y=v,e.abrupt("break",52);case 51:throw new c.ErrorCoded("Unknown value entry '".concat(o,"' in @value: ").concat(JSON.stringify(a)),c.ERROR_CODES.INVALID_VALUE_OBJECT);case 52:e.next=35;break;case 54:return e.next=56,this.unaliasKeyword(p,u,s,!0,r);case 56:if(e.t7=e.sent,"@json"!==e.t7){e.next=59;break}return e.abrupt("return",[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)]);case 59:if(null!==f){e.next=61;break}return e.abrupt("return",[]);case 61:if("object"!==i(f)){e.next=63;break}throw new c.ErrorCoded("The value of an '@value' can not be an object, got '".concat(JSON.stringify(f),"'"),c.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);case 63:if(!this.parsingContext.validateValueIndexes||!y||"string"===typeof y){e.next=65;break}throw new c.ErrorCoded("The value of an '@index' must be a string, got '".concat(JSON.stringify(y),"'"),c.ERROR_CODES.INVALID_INDEX_VALUE);case 65:if(!h){e.next=71;break}if("string"===typeof f){e.next=68;break}throw new c.ErrorCoded("When an '@language' is set, the value of '@value' must be a string, got '".concat(JSON.stringify(f),"'"),c.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);case 68:if(c.ContextParser.validateLanguage(h,this.parsingContext.strictValues,c.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING)){e.next=70;break}return e.abrupt("return",[]);case 70:(this.parsingContext.normalizeLanguageTags||1===this.parsingContext.activeProcessingMode)&&(h=h.toLowerCase());case 71:if(!d){e.next=76;break}if("string"===typeof f){e.next=74;break}throw new Error("When an '@direction' is set, the value of '@value' must be a string, got '".concat(JSON.stringify(f),"'"));case 74:if(c.ContextParser.validateDirection(d,this.parsingContext.strictValues)){e.next=76;break}return e.abrupt("return",[]);case 76:if(!(h&&d&&this.parsingContext.rdfDirection)){e.next=82;break}if(!p){e.next=79;break}throw new c.ErrorCoded("Can not have '@language', '@direction' and '@type' in a value: '".concat(JSON.stringify(a),"'"),c.ERROR_CODES.INVALID_VALUE_OBJECT);case 79:return e.abrupt("return",this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,d)));case 82:if(!h){e.next=88;break}if(!p){e.next=85;break}throw new c.ErrorCoded("Can not have both '@language' and '@type' in a value: '".concat(JSON.stringify(a),"'"),c.ERROR_CODES.INVALID_VALUE_OBJECT);case 85:return e.abrupt("return",[this.dataFactory.literal(f,h)]);case 88:if(!d||!this.parsingContext.rdfDirection){e.next=94;break}if(!p){e.next=91;break}throw new c.ErrorCoded("Can not have both '@direction' and '@type' in a value: '".concat(JSON.stringify(a),"'"),c.ERROR_CODES.INVALID_VALUE_OBJECT);case 91:return e.abrupt("return",this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,d)));case 94:if(!p){e.next=103;break}if("string"===typeof p){e.next=97;break}throw new c.ErrorCoded("The value of an '@type' must be a string, got '".concat(JSON.stringify(p),"'"),c.ERROR_CODES.INVALID_TYPED_VALUE);case 97:if(b=this.createVocabOrBaseTerm(r,p),b){e.next=100;break}throw new c.ErrorCoded("Invalid '@type' value, got '".concat(JSON.stringify(p),"'"),c.ERROR_CODES.INVALID_TYPED_VALUE);case 100:if("NamedNode"===b.termType){e.next=102;break}throw new c.ErrorCoded("Illegal value type (".concat(b.termType,"): ").concat(p),c.ERROR_CODES.INVALID_TYPED_VALUE);case 102:return e.abrupt("return",[this.dataFactory.literal(f,b)]);case 103:return e.next=105,this.valueToTerm(new c.JsonLdContextNormalized({}),o,f,s,u);case 105:return e.abrupt("return",e.sent);case 108:if(!("@set"in a)){e.next=114;break}if(!(Object.keys(a).length>1)){e.next=111;break}throw new c.ErrorCoded("Found illegal neighbouring entries next to @set for key: '".concat(o,"'"),c.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);case 111:return e.abrupt("return",[]);case 114:if(!("@list"in a)){e.next=139;break}if(!(Object.keys(a).length>1)){e.next=117;break}throw new c.ErrorCoded("Found illegal neighbouring entries next to @list for key: '".concat(o,"'"),c.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);case 117:if(g=a["@list"],!Array.isArray(g)){e.next=126;break}if(0!==g.length){e.next=123;break}return e.abrupt("return",[this.rdfNil]);case 123:return e.abrupt("return",this.parsingContext.idStack[s+1]||[]);case 124:e.next=137;break;case 126:return e.t8=this,e.next=129,this.parsingContext.getContext(u);case 129:return e.t9=e.sent,e.t10=o,e.t11=g,e.t12=s-1,e.t13=u.slice(0,-1),e.next=136,e.t8.valueToTerm.call(e.t8,e.t9,e.t10,e.t11,e.t12,e.t13);case 136:return e.abrupt("return",e.sent);case 137:e.next=175;break;case 139:if(!("@reverse"in a)||"boolean"!==typeof a["@reverse"]){e.next=143;break}return e.abrupt("return",[]);case 143:return e.t14=t,e.next=146,this.parsingContext.getContext(u);case 146:if(e.t15=e.sent,e.t16=o,e.t17=e.t14.getContextValueContainer.call(e.t14,e.t15,e.t16),!("@graph"in e.t17)){e.next=154;break}return w=this.parsingContext.graphContainerTermStack[s+1],e.abrupt("return",w?Object.values(w):[this.dataFactory.blankNode()]);case 154:if(!("@id"in a)){e.next=170;break}if(!(Object.keys(a).length>1)){e.next=159;break}return e.next=158,this.parsingContext.getContext(u,0);case 158:r=e.sent;case 159:if(!("@context"in a)){e.next=163;break}return e.next=162,this.parsingContext.parseContext(a["@context"],r.getContextRaw());case 162:r=e.sent;case 163:if("@vocab"!==a["@type"]){e.next=167;break}return e.abrupt("return",this.nullableTermToArray(this.createVocabOrBaseTerm(r,a["@id"])));case 167:return e.abrupt("return",this.nullableTermToArray(this.resourceToTerm(r,a["@id"])));case 168:e.next=175;break;case 170:if(!(this.parsingContext.emittedStack[s+1]||a&&"object"===i(a)&&0===Object.keys(a).length)){e.next=174;break}return e.abrupt("return",this.parsingContext.idStack[s+1]||(this.parsingContext.idStack[s+1]=[this.dataFactory.blankNode()]));case 174:return e.abrupt("return",[]);case 175:return e.t18=this,e.t19=this,e.t20=s,e.next=180,this.getContextSelfOrPropertyScoped(r,o);case 180:return e.t21=e.sent,e.t22=o,e.t23=a,e.t24=e.t19.stringValueToTerm.call(e.t19,e.t20,e.t21,e.t22,e.t23,null),e.abrupt("return",e.t18.nullableTermToArray.call(e.t18,e.t24));case 185:return e.t25=this,e.t26=this,e.t27=s,e.next=190,this.getContextSelfOrPropertyScoped(r,o);case 190:return e.t28=e.sent,e.t29=o,e.t30=Boolean(a).toString(),e.t31=this.dataFactory.namedNode(t.XSD_BOOLEAN),e.t32=e.t26.stringValueToTerm.call(e.t26,e.t27,e.t28,e.t29,e.t30,e.t31),e.abrupt("return",e.t25.nullableTermToArray.call(e.t25,e.t32));case 196:return e.t33=this,e.t34=this,e.t35=s,e.next=201,this.getContextSelfOrPropertyScoped(r,o);case 201:return e.t36=e.sent,e.t37=o,e.t38=a,e.t39=this.dataFactory.namedNode(a%1===0&&a<1e21?t.XSD_INTEGER:t.XSD_DOUBLE),e.t40=e.t34.stringValueToTerm.call(e.t34,e.t35,e.t36,e.t37,e.t38,e.t39),e.abrupt("return",e.t33.nullableTermToArray.call(e.t33,e.t40));case 207:return this.parsingContext.emitError(new Error("Could not determine the RDF type of a ".concat(l))),e.abrupt("return",[]);case 209:case"end":return e.stop()}}),e,this)})));function r(t,r,n,i,o){return e.apply(this,arguments)}return r}()},{key:"getContextSelfOrPropertyScoped",value:function(){var t=a(n().mark((function t(e,r){var o;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.getContextRaw()[r],!o||"object"!==i(o)||!("@context"in o)){t.next=5;break}return t.next=4,this.parsingContext.parseContext(o,e.getContextRaw(),!0);case 4:e=t.sent;case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"nullableTermToArray",value:function(t){return t?[t]:[]}},{key:"predicateToTerm",value:function(e,r){var n=e.expandTerm(r,!0,this.parsingContext.getExpandOptions());return n?"_"===n[0]&&":"===n[1]?this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(n.substr(2)):null:t.isValidIri(n)?this.dataFactory.namedNode(n):n&&this.parsingContext.strictValues?(this.parsingContext.emitError(new c.ErrorCoded("Invalid predicate IRI: ".concat(n),c.ERROR_CODES.INVALID_IRI_MAPPING)),null):null:null}},{key:"resourceToTerm",value:function(e,r){if(r.startsWith("_:"))return this.dataFactory.blankNode(r.substr(2));var n=e.expandTerm(r,!1,this.parsingContext.getExpandOptions());if(!t.isValidIri(n)){if(!n||!this.parsingContext.strictValues)return null;this.parsingContext.emitError(new Error("Invalid resource IRI: ".concat(n)))}return this.dataFactory.namedNode(n)}},{key:"createVocabOrBaseTerm",value:function(e,r){if(r.startsWith("_:"))return this.dataFactory.blankNode(r.substr(2));var n=this.parsingContext.getExpandOptions(),i=e.expandTerm(r,!0,n);if(i===r&&(i=e.expandTerm(r,!1,n)),!t.isValidIri(i)){if(!i||!this.parsingContext.strictValues||i.startsWith("@"))return null;this.parsingContext.emitError(new Error("Invalid term IRI: ".concat(i)))}return this.dataFactory.namedNode(i)}},{key:"intToString",value:function(e,r){if("number"===typeof e){if(Number.isFinite(e)){var n=e%1===0;return!n||r&&r.value===t.XSD_DOUBLE?e.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):Number(e).toString()}return e>0?"INF":"-INF"}return e}},{key:"stringValueToTerm",value:function(e,r,n,i,o){var a=t.getContextValueType(r,n);if(a)if("@id"===a){if(!o)return this.resourceToTerm(r,this.intToString(i,o))}else if("@vocab"===a){if(!o)return this.createVocabOrBaseTerm(r,this.intToString(i,o))}else o=this.dataFactory.namedNode(a);if(!o){var s=t.getContextValueLanguage(r,n),u=t.getContextValueDirection(r,n);return u&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(e,this.intToString(i,o),s,u):this.dataFactory.literal(this.intToString(i,o),s)}return this.dataFactory.literal(this.intToString(i,o),o)}},{key:"createLanguageDirectionLiteral",value:function(e,r,n,i){if("i18n-datatype"===this.parsingContext.rdfDirection)return n||(n=""),this.dataFactory.literal(r,this.dataFactory.namedNode("https://www.w3.org/ns/i18n#".concat(n,"_").concat(i)));var o=this.dataFactory.blankNode(),a=this.getDefaultGraph();return this.parsingContext.emitQuad(e,this.dataFactory.quad(o,this.dataFactory.namedNode(t.RDF+"value"),this.dataFactory.literal(r),a)),n&&this.parsingContext.emitQuad(e,this.dataFactory.quad(o,this.dataFactory.namedNode(t.RDF+"language"),this.dataFactory.literal(n),a)),this.parsingContext.emitQuad(e,this.dataFactory.quad(o,this.dataFactory.namedNode(t.RDF+"direction"),this.dataFactory.literal(i),a)),o}},{key:"valueToJsonString",value:function(t){return h(t)}},{key:"unaliasKeyword",value:function(){var t=a(n().mark((function t(e,r,o,a,s){var u,l;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Number.isInteger(e)){t.next=2;break}return t.abrupt("return",e);case 2:if(a){t.next=6;break}if(u=this.parsingContext.unaliasedKeywordCacheStack[o],!u){t.next=6;break}return t.abrupt("return",u);case 6:if(c.Util.isPotentialKeyword(e)){t.next=16;break}if(t.t0=s,t.t0){t.next=12;break}return t.next=11,this.parsingContext.getContext(r);case 11:t.t0=t.sent;case 12:s=t.t0,l=s.getContextRaw()[e],l&&"object"===i(l)&&(l=l["@id"]),c.Util.isValidKeyword(l)&&(e=l);case 16:return t.abrupt("return",a?e:this.parsingContext.unaliasedKeywordCacheStack[o]=e);case 17:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"unaliasKeywordParent",value:function(){var t=a(n().mark((function t(e,r){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.unaliasKeyword(r>0&&e[r-1],e,r-1);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"unaliasKeywords",value:function(){var t=a(n().mark((function t(e,r,i,o){var a,s;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:a={},t.t0=n().keys(e);case 2:if((t.t1=t.t0()).done){t.next=10;break}return s=t.t1.value,t.next=6,this.unaliasKeyword(s,r,i+1,!0,o);case 6:t.t2=t.sent,a[t.t2]=e[s],t.next=2;break;case 10:return t.abrupt("return",a);case 11:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i){return t.apply(this,arguments)}return e}()},{key:"isLiteral",value:function(t){for(var e=t;e>=0;e--)if(this.parsingContext.literalStack[e]||this.parsingContext.jsonLiteralStack[e])return!0;return!1}},{key:"getDepthOffsetGraph",value:function(){var t=a(n().mark((function t(e,r){var i,o;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=e-1;case 1:if(!(i>0)){t.next=15;break}return t.next=4,this.unaliasKeyword(r[i],r,i);case 4:if(t.t0=t.sent,"@graph"!==t.t0){t.next=12;break}return t.next=8,f.EntryHandlerContainer.getContainerHandler(this.parsingContext,r,i);case 8:if(o=t.sent.containers,!f.EntryHandlerContainer.isComplexGraphContainer(o)){t.next=11;break}return t.abrupt("return",-1);case 11:return t.abrupt("return",e-i-1);case 12:i--,t.next=1;break;case 15:return t.abrupt("return",-1);case 16:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"validateReverseSubject",value:function(t){if("Literal"===t.termType)throw new c.ErrorCoded("Found illegal literal in subject position: ".concat(t.value),c.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}},{key:"getDefaultGraph",value:function(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}},{key:"getGraphContainerValue",value:function(){var t=a(n().mark((function t(e,r){var i,o,a,s,u,c,l,h;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=this.getDefaultGraph(),t.next=3,f.EntryHandlerContainer.getContainerHandler(this.parsingContext,e,r);case 3:if(o=t.sent,a=o.containers,s=o.depth,!("@graph"in a)){t.next=28;break}if(u=f.EntryHandlerContainer.getContainerGraphIndex(a,s,e),c=this.parsingContext.graphContainerTermStack[s],i=c?c[u]:null,i){t.next=28;break}if(l=null,!("@id"in a)){t.next=25;break}return t.next=15,this.getContainerKey(e[s],e,s);case 15:if(h=t.sent,null===h){t.next=25;break}return t.t0=this,t.next=20,this.parsingContext.getContext(e);case 20:return t.t1=t.sent,t.t2=h,t.next=24,t.t0.resourceToTerm.call(t.t0,t.t1,t.t2);case 24:l=t.sent;case 25:l||(l=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[s]||(this.parsingContext.graphContainerTermStack[s]={}),i=this.parsingContext.graphContainerTermStack[s][u]=l;case 28:return t.abrupt("return",i);case 29:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"getPropertiesDepth",value:function(){var t=a(n().mark((function t(e,r){var i,o,a;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=r,o=r-1;case 2:if(!(o>0)){t.next=19;break}if("number"===typeof e[o]){t.next=16;break}return t.next=6,this.unaliasKeyword(e[o],e,o);case 6:if(a=t.sent,"@reverse"!==a){t.next=11;break}return t.abrupt("return",o);case 11:if("@nest"!==a){t.next=15;break}i=o,t.next=16;break;case 15:return t.abrupt("return",i);case 16:o--,t.next=2;break;case 19:return t.abrupt("return",i);case 20:case"end":return t.stop()}}),t,this)})));function e(e,r){return t.apply(this,arguments)}return e}()},{key:"getContainerKey",value:function(){var t=a(n().mark((function t(e,r,i){var o;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.unaliasKeyword(e,r,i);case 2:return o=t.sent,t.abrupt("return","@none"===o?null:o);case 4:case"end":return t.stop()}}),t,this)})));function e(e,r,n){return t.apply(this,arguments)}return e}()}],[{key:"getContextValue",value:function(t,e,r,n){var i=t.getContextRaw()[r];if(!i)return n;var o=i[e];return void 0===o?n:o}},{key:"getContextValueContainer",value:function(e,r){return t.getContextValue(e,"@container",r,{"@set":!0})}},{key:"getContextValueType",value:function(e,r){var n=t.getContextValue(e,"@type",r,null);return"@none"===n?null:n}},{key:"getContextValueLanguage",value:function(e,r){return t.getContextValue(e,"@language",r,e.getContextRaw()["@language"]||null)}},{key:"getContextValueDirection",value:function(e,r){return t.getContextValue(e,"@direction",r,e.getContextRaw()["@direction"]||null)}},{key:"isContextValueReverse",value:function(e,r){return!!t.getContextValue(e,"@reverse",r,null)}},{key:"getContextValueIndex",value:function(e,r){return t.getContextValue(e,"@index",r,e.getContextRaw()["@index"]||null)}},{key:"isPropertyReverse",value:function(e,r,n){return"@reverse"===n!==t.isContextValueReverse(e,r)}},{key:"isValidIri",value:function(t){return null!==t&&c.Util.isValidIri(t)}},{key:"isPrefixArray",value:function(t,e){if(t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}}]),t}();e.Util=d,d.XSD="http://www.w3.org/2001/XMLSchema#",d.XSD_BOOLEAN=d.XSD+"boolean",d.XSD_INTEGER=d.XSD+"integer",d.XSD_DOUBLE=d.XSD+"double",d.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#"},57277:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];r(41539),Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerHandlerIdentifier=void 0;var s=function(){function t(){o(this,t)}return a(t,[{key:"canCombineWithGraph",value:function(){return!0}},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){var u,c,l,f;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r.emittedStack[s+1]||!r.idStack[s+1]){t.next=4;break}u=r.idStack[s+1][0],t.next=25;break;case 4:return t.next=6,i.getContainerKey(o[s],o,s);case 6:if(c=t.sent,null===c){t.next=18;break}return t.t1=i,t.next=11,r.getContext(o);case 11:return t.t2=t.sent,t.t3=o[s],t.next=15,t.t1.resourceToTerm.call(t.t1,t.t2,t.t3);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=i.dataFactory.blankNode();case 19:if(l=t.t0,l){t.next=23;break}return r.emittedStack[s]=!1,t.abrupt("return");case 23:u=l,r.idStack[s+1]=[u];case 25:return f=r.idStack[s],f||(f=r.idStack[s]=[]),f.some((function(t){return t.equals(u)}))||f.push(u),t.next=30,r.handlePendingContainerFlushBuffers();case 30:if(t.sent){t.next=32;break}r.emittedStack[s]=!1;case 32:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),t}();e.ContainerHandlerIdentifier=s},64405:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(5276)["default"],o=r(17964)["default"],a=r(13861)["default"],s=r(20172)["default"],u=r(20378)["default"];r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerHandlerIndex=void 0;var c=r(20157),l=r(26016),f=r(51106),h=function(){function t(){s(this,t)}return u(t,[{key:"canCombineWithGraph",value:function(){return!0}},{key:"handle",value:function(){var t=a(n().mark((function t(e,r,a,s,u,h){var d,p,y,v,b,g,w,m,x,_,E,k,S,O,C;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Array.isArray(u)){t.next=60;break}return d="@graph"in e,t.next=4,r.getContext(s);case 4:if(p=t.sent,y=s[h-1],v=f.Util.getContextValueIndex(p,y),!v){t.next=55;break}if(!c.Util.isPotentialKeyword(v)){t.next=10;break}throw new c.ErrorCoded("Keywords can not be used as @index value, got: ".concat(v),c.ERROR_CODES.INVALID_TERM_DEFINITION);case 10:if("string"===typeof v){t.next=12;break}throw new c.ErrorCoded("@index values must be strings, got: ".concat(v),c.ERROR_CODES.INVALID_TERM_DEFINITION);case 12:if("object"===o(u)){t.next=17;break}if("@id"===f.Util.getContextValueType(p,y)){t.next=15;break}throw new c.ErrorCoded("Property-based index containers require nodes as values or strings with @type: @id, but got: ".concat(u),c.ERROR_CODES.INVALID_VALUE_OBJECT);case 15:b=a.resourceToTerm(p,u),b&&(r.idStack[h+1]=[b]);case 17:if(g=a.createVocabOrBaseTerm(p,v),!g){t.next=55;break}return t.t0=a,t.t1=p,t.t2=v,t.next=24,a.getContainerKey(s[h],s,h);case 24:return t.t3=t.sent,t.t4=h,t.t5=s,t.next=29,t.t0.valueToTerm.call(t.t0,t.t1,t.t2,t.t3,t.t4,t.t5);case 29:if(w=t.sent,!d){t.next=38;break}return t.next=33,a.getGraphContainerValue(s,h+1);case 33:m=t.sent,x=i(w);try{for(x.s();!(_=x.n()).done;)E=_.value,r.emitQuad(h,a.dataFactory.quad(m,g,E,a.getDefaultGraph()))}catch(n){x.e(n)}finally{x.f()}t.next=55;break;case 38:k=i(w),t.prev=39,k.s();case 41:if((S=k.n()).done){t.next=47;break}return O=S.value,t.next=45,l.EntryHandlerPredicate.handlePredicateObject(r,a,s,h+1,g,O,!1);case 45:t.next=41;break;case 47:t.next=52;break;case 49:t.prev=49,t.t6=t["catch"](39),k.e(t.t6);case 52:return t.prev=52,k.f(),t.finish(52);case 55:return C=d?2:1,t.next=58,r.newOnValueJob(s.slice(0,s.length-C),u,h-C,!0);case 58:return t.next=60,r.handlePendingContainerFlushBuffers();case 60:r.emittedStack[h]=!1;case 61:case"end":return t.stop()}}),t,null,[[39,49,52,55]])})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),t}();e.ContainerHandlerIndex=h},40190:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];r(21249),r(38862),r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerHandlerLanguage=void 0;var s=r(20157),u=function(){function t(){o(this,t)}return a(t,[{key:"canCombineWithGraph",value:function(){return!1}},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,u){var c;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.getContainerKey(o[u],o,u);case 2:if(c=t.sent,!Array.isArray(a)){t.next=7;break}a=a.map((function(t){return{"@value":t,"@language":c}})),t.next=10;break;case 7:if("string"===typeof a){t.next=9;break}throw new s.ErrorCoded("Got invalid language map value, got '".concat(JSON.stringify(a),"', but expected string"),s.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);case 9:a={"@value":a,"@language":c};case 10:return t.next=12,r.newOnValueJob(o.slice(0,o.length-1),a,u-1,!0);case 12:r.emittedStack[u]=!1;case 13:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),t}();e.ContainerHandlerLanguage=u},78864:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerHandlerType=void 0;var s=r(26016),u=r(51106),c=function(){function t(){o(this,t)}return a(t,[{key:"canCombineWithGraph",value:function(){return!1}},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,c){var l,f,h,d,p,y,v;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Array.isArray(a)){t.next=47;break}if("string"!==typeof a){t.next=23;break}return t.next=4,r.getContext(o);case 4:if(l=t.sent,f=u.Util.getContextValueType(l,o[c-1]),"@vocab"!==f){t.next=12;break}return t.next=9,i.createVocabOrBaseTerm(l,a);case 9:t.t0=t.sent,t.next=15;break;case 12:return t.next=14,i.resourceToTerm(l,a);case 14:t.t0=t.sent;case 15:if(h=t.t0,!h){t.next=21;break}return d={"@id":"NamedNode"===h.termType?h.value:a},t.next=20,r.newOnValueJob(o.slice(0,o.length-1),d,c-1,!0);case 20:r.idStack[c+1]=[h];case 21:t.next=28;break;case 23:return p=!!r.idStack[c+1],p||delete r.idStack[c],t.next=27,r.newOnValueJob(o.slice(0,o.length-1),a,c-1,!0);case 27:p||(r.idStack[c+1]=r.idStack[c]);case 28:return t.next=30,i.getContainerKey(o[c],o,c);case 30:if(y=t.sent,null===y){t.next=40;break}return t.t2=i,t.next=35,r.getContext(o);case 35:t.t3=t.sent,t.t4=y,t.t1=t.t2.createVocabOrBaseTerm.call(t.t2,t.t3,t.t4),t.next=41;break;case 40:t.t1=null;case 41:if(v=t.t1,!v){t.next=45;break}return t.next=45,s.EntryHandlerPredicate.handlePredicateObject(r,i,o,c+1,i.rdfType,v,!1);case 45:return t.next=47,r.handlePendingContainerFlushBuffers();case 47:r.emittedStack[c]=!1;case 48:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),t}();e.ContainerHandlerType=c},54917:function(t,e,r){"use strict";var n=r(5276)["default"],i=r(28861)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"];r(74916),r(77601),r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerArrayValue=void 0;var u=r(51106),c=function(){function t(){a(this,t)}return s(t,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=o(i().mark((function t(e,r,n,o,a){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.test(e,r,null,n,o));case 1:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=o(i().mark((function t(e,r,n,o,a){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return","number"===typeof o[a]);case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"handle",value:function(){var t=o(i().mark((function t(e,r,o,a,s,c){var l,f,h,d,p,y,v,b,g,w,m,x,_,E,k;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.unaliasKeywordParent(a,c);case 2:if(l=t.sent,"@list"!==l){t.next=50;break}f=null,h=0,d=c-2;case 7:if(!(d>0)){t.next=16;break}if(p=a[d],"string"!==typeof p&&"number"!==typeof p){t.next=13;break}return h=d,f=p,t.abrupt("break",16);case 13:d--,t.next=7;break;case 16:if(null===f){t.next=48;break}return t.t0=r,t.next=20,e.getContext(a);case 20:return t.t1=t.sent,t.t2=f,t.t3=s,t.t4=c,t.t5=a,t.next=27,t.t0.valueToTerm.call(t.t0,t.t1,t.t2,t.t3,t.t4,t.t5);case 27:y=t.sent,v=n(y),t.prev=29,v.s();case 31:if((b=v.n()).done){t.next=37;break}return g=b.value,t.next=35,this.handleListElement(e,r,g,s,c,a.slice(0,h),h);case 35:t.next=31;break;case 37:t.next=42;break;case 39:t.prev=39,t.t6=t["catch"](29),v.e(t.t6);case 42:return t.prev=42,v.f(),t.finish(42);case 45:if(0!==y.length){t.next=48;break}return t.next=48,this.handleListElement(e,r,null,s,c,a.slice(0,h),h);case 48:t.next=108;break;case 50:if("@set"!==l){t.next=55;break}return t.next=53,e.newOnValueJob(a.slice(0,-2),s,c-2,!1);case 53:t.next=108;break;case 55:if(void 0===l||"@type"===l){t.next=108;break}w=c-1;case 57:if(!(w>0)){t.next=66;break}if("number"===typeof a[w]){t.next=63;break}return t.next=61,r.unaliasKeyword(a[w],a,w);case 61:return l=t.sent,t.abrupt("break",66);case 63:w--,t.next=57;break;case 66:return t.next=68,e.getContext(a.slice(0,-1));case 68:if(m=t.sent,!("@list"in u.Util.getContextValueContainer(m,l))){t.next=104;break}return e.emittedStack[c+1]=!0,t.t7=r,t.next=74,e.getContext(a);case 74:return t.t8=t.sent,t.t9=l,t.t10=s,t.t11=c,t.t12=a,t.next=81,t.t7.valueToTerm.call(t.t7,t.t8,t.t9,t.t10,t.t11,t.t12);case 81:x=t.sent,_=n(x),t.prev=83,_.s();case 85:if((E=_.n()).done){t.next=91;break}return k=E.value,t.next=89,this.handleListElement(e,r,k,s,c,a.slice(0,-1),c-1);case 89:t.next=85;break;case 91:t.next=96;break;case 93:t.prev=93,t.t13=t["catch"](83),_.e(t.t13);case 96:return t.prev=96,_.f(),t.finish(96);case 99:if(0!==x.length){t.next=102;break}return t.next=102,this.handleListElement(e,r,null,s,c,a.slice(0,-1),c-1);case 102:t.next=108;break;case 104:return e.shiftStack(c,1),t.next=107,e.newOnValueJob(a.slice(0,-1),s,c-1,!1);case 107:e.contextTree.removeContext(a.slice(0,-1));case 108:case"end":return t.stop()}}),t,this,[[29,39,42,45],[83,93,96,99]])})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()},{key:"handleListElement",value:function(){var t=o(i().mark((function t(e,r,n,o,a,s,u){var c,l,f;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(c=e.listPointerStack[a],t.t0=null!==o,!t.t0){t.next=7;break}return t.next=5,r.unaliasKeywords(o,s,a);case 5:t.t1=t.sent["@value"],t.t0=null!==t.t1;case 7:if(!t.t0){t.next=12;break}c&&c.value?(f=r.dataFactory.blankNode(),e.emitQuad(a,r.dataFactory.quad(c.value,r.rdfRest,f,r.getDefaultGraph())),c.value=f):(l=r.dataFactory.blankNode(),c={value:l,listRootDepth:u,listId:l}),n&&e.emitQuad(a,r.dataFactory.quad(c.value,r.rdfFirst,n,r.getDefaultGraph())),t.next=13;break;case 12:c||(c={listRootDepth:u,listId:r.rdfNil});case 13:e.listPointerStack[a]=c;case 14:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a,s){return t.apply(this,arguments)}return e}()}]),t}();e.EntryHandlerArrayValue=c},75288:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];r(74916),r(77601),r(41539),r(33948),r(47941),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerContainer=void 0;var s=r(57277),u=r(64405),c=r(40190),l=r(78864),f=r(51106),h=function(){function t(){o(this,t)}return a(t,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.test(e,r,null,i,o);case 2:return t.abrupt("return",!!t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var e=i(n().mark((function e(r,i,o,a,s){var u,c;return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=f.Util,e.next=3,r.getContext(a,2);case 3:e.t1=e.sent,e.t2=a[s-1],u=e.t0.getContextValueContainer.call(e.t0,e.t1,e.t2),e.t3=n().keys(t.CONTAINER_HANDLERS);case 7:if((e.t4=e.t3()).done){e.next=13;break}if(c=e.t4.value,!u[c]){e.next=11;break}return e.abrupt("return",{containers:u,handler:t.CONTAINER_HANDLERS[c]});case 11:e.next=7;break;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));function r(t,r,n,i,o){return e.apply(this,arguments)}return r}()},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s,u){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",u.handler.handle(u.containers,e,r,o,a,s));case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a,s){return t.apply(this,arguments)}return e}()}],[{key:"isSimpleGraphContainer",value:function(t){return"@graph"in t&&("@set"in t&&2===Object.keys(t).length||1===Object.keys(t).length)}},{key:"isComplexGraphContainer",value:function(t){return"@graph"in t&&("@set"in t&&Object.keys(t).length>2||!("@set"in t)&&Object.keys(t).length>1)}},{key:"getContainerGraphIndex",value:function(e,r,n){for(var i=t.isSimpleGraphContainer(e),o="",a=r;a<n.length;a++)i&&"number"!==typeof n[a]||(o+=":"+n[a]),i||"number"===typeof n[a]||(i=!0);return o}},{key:"getContainerHandler",value:function(){var e=i(n().mark((function e(r,i,o){var a,s,u,c,l,h,d,p;return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={containers:{"@set":!0},depth:o,fallback:!0},s=!1,e.next=4,r.getContext(i,2);case 4:u=e.sent,c=o-1;case 6:if(!(c>=0)){e.next=42;break}if("number"===typeof i[c]){e.next=39;break}if(l=f.Util.getContextValue(u,"@container",i[c],!1),!l||!t.isSimpleGraphContainer(l)){e.next=11;break}return e.abrupt("return",{containers:l,depth:c+1,fallback:!1});case 11:if(h=f.Util.getContextValue(u,"@container",i[c-1],!1),h){e.next=18;break}if(!s){e.next=15;break}return e.abrupt("return",a);case 15:s=!0,e.next=39;break;case 18:d="@graph"in h,e.t0=n().keys(t.CONTAINER_HANDLERS);case 20:if((e.t1=e.t0()).done){e.next=38;break}if(p=e.t1.value,!h[p]){e.next=36;break}if(!d){e.next=31;break}if(!t.CONTAINER_HANDLERS[p].canCombineWithGraph()){e.next=28;break}return e.abrupt("return",{containers:h,depth:c,fallback:!1});case 28:return e.abrupt("return",a);case 29:e.next=36;break;case 31:if(!s){e.next=35;break}return e.abrupt("return",a);case 35:return e.abrupt("return",{containers:h,depth:c,fallback:!1});case 36:e.next=20;break;case 38:return e.abrupt("return",a);case 39:c--,e.next=6;break;case 42:return e.abrupt("return",a);case 43:case"end":return e.stop()}}),e)})));function r(t,r,n){return e.apply(this,arguments)}return r}()},{key:"isBufferableContainerHandler",value:function(){var e=i(n().mark((function e(r,i,o){var a;return n().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getContainerHandler(r,i,o);case 2:return a=e.sent,e.abrupt("return",!a.fallback&&!("@graph"in a.containers));case 4:case"end":return e.stop()}}),e)})));function r(t,r,n){return e.apply(this,arguments)}return r}()}]),t}();e.EntryHandlerContainer=h,h.CONTAINER_HANDLERS={"@id":new s.ContainerHandlerIdentifier,"@index":new u.ContainerHandlerIndex,"@language":new c.ContainerHandlerLanguage,"@type":new l.ContainerHandlerType}},59369:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerInvalidFallback=void 0;var s=function(){function t(){o(this,t)}return a(t,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.emittedStack[s]=!1;case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),t}();e.EntryHandlerInvalidFallback=s},26016:function(t,e,r){"use strict";var n=r(5276)["default"],i=r(28861)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerPredicate=void 0;var u=r(20157),c=r(51106),l=function(){function t(){a(this,t)}return s(t,[{key:"isPropertyHandler",value:function(){return!0}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=o(i().mark((function t(e,r,n,o,a){var s,u;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=n[o],!s){t.next=13;break}return t.next=4,e.getContext(n);case 4:if(u=t.sent,t.t0=!e.jsonLiteralStack[o],!t.t0){t.next=10;break}return t.next=9,r.predicateToTerm(u,n[o]);case 9:t.t0=t.sent;case 10:if(!t.t0){t.next=13;break}return"@json"===c.Util.getContextValueType(u,s)&&(e.jsonLiteralStack[o+1]=!0),t.abrupt("return",!0);case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=o(i().mark((function t(e,r,n,o,a){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",o[a]);case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"handle",value:function(){var e=o(i().mark((function e(r,o,a,s,l,f,h){var d,p,y,v,b,g,w,m,x,_;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return d=s[f],e.next=3,r.getContext(s);case 3:return p=e.sent,e.next=6,o.predicateToTerm(p,a);case 6:if(y=e.sent,!y){e.next=42;break}return e.next=10,o.valueToTerm(p,a,l,f,s);case 10:if(v=e.sent,!v.length){e.next=42;break}b=n(v),e.prev=13,b.s();case 15:if((g=b.n()).done){e.next=34;break}return w=g.value,e.t0=c.Util,e.t1=p,e.t2=d,e.next=22,o.unaliasKeywordParent(s,f);case 22:if(e.t3=e.sent,m=e.t0.isPropertyReverse.call(e.t0,e.t1,e.t2,e.t3),!l){e.next=30;break}if(x="@list"in c.Util.getContextValueContainer(p,a),!x&&!l["@list"]){e.next=30;break}if((x&&!Array.isArray(l)&&!l["@list"]||l["@list"]&&!Array.isArray(l["@list"]))&&w!==o.rdfNil&&(_=o.dataFactory.blankNode(),r.emitQuad(f,o.dataFactory.quad(_,o.rdfRest,o.rdfNil,o.getDefaultGraph())),r.emitQuad(f,o.dataFactory.quad(_,o.rdfFirst,w,o.getDefaultGraph())),w=_),!m||r.allowSubjectList){e.next=30;break}throw new u.ErrorCoded("Found illegal list value in subject position at ".concat(a),u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE);case 30:return e.next=32,t.handlePredicateObject(r,o,s,f,y,w,m);case 32:e.next=15;break;case 34:e.next=39;break;case 36:e.prev=36,e.t4=e["catch"](13),b.e(e.t4);case 39:return e.prev=39,b.f(),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[13,36,39,42]])})));function r(t,r,n,i,o,a,s){return e.apply(this,arguments)}return r}()}],[{key:"handlePredicateObject",value:function(){var t=o(i().mark((function t(e,r,o,a,s,u,c){var l,f,h,d,p,y,v,b,g,w,m,x,_;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.getPropertiesDepth(o,a);case 2:return l=t.sent,t.next=5,r.getDepthOffsetGraph(a,o);case 5:if(f=t.sent,h=a-f,d=e.idStack[l],!d){t.next=36;break}p=n(d),t.prev=10,p.s();case 12:if((y=p.n()).done){t.next=26;break}if(v=y.value,b=f>=0,!b){t.next=20;break}if(g=e.idStack[h-1],g){w=n(g);try{for(w.s();!(m=w.n()).done;)x=m.value,c?(r.validateReverseSubject(u),e.emitQuad(a,r.dataFactory.quad(u,s,v,x))):e.emitQuad(a,r.dataFactory.quad(v,s,u,x))}catch(i){w.e(i)}finally{w.f()}}else c?(r.validateReverseSubject(u),e.getUnidentifiedGraphBufferSafe(h-1).push({subject:u,predicate:s,object:v})):e.getUnidentifiedGraphBufferSafe(h-1).push({subject:v,predicate:s,object:u});t.next=24;break;case 20:return t.next=22,r.getGraphContainerValue(o,l);case 22:_=t.sent,c?(r.validateReverseSubject(u),e.emitQuad(a,r.dataFactory.quad(u,s,v,_))):e.emitQuad(a,r.dataFactory.quad(v,s,u,_));case 24:t.next=12;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t["catch"](10),p.e(t.t0);case 31:return t.prev=31,p.f(),t.finish(31);case 34:t.next=38;break;case 36:c&&r.validateReverseSubject(u),e.getUnidentifiedValueBufferSafe(l).push({predicate:s,object:u,reverse:c});case 38:case"end":return t.stop()}}),t,null,[[10,28,31,34]])})));function e(e,r,n,i,o,a,s){return t.apply(this,arguments)}return e}()}]),t}();e.EntryHandlerPredicate=l},522:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeyword=void 0;var s=function(){function t(e){o(this,t),this.keyword=e}return a(t,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",i===this.keyword);case 1:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()}]),t}();e.EntryHandlerKeyword=s},94422:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"],s=r(95967)["default"],u=r(13706)["default"];r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordContext=void 0;var c=r(20157),l=r(522),f=function(t){s(r,t);var e=u(r);function r(){return o(this,r),e.call(this,"@context")}return a(r,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){var u,l;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.streamingProfile&&(e.processingStack[s]||e.processingType[s]||void 0!==e.idStack[s])&&e.emitError(new c.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",c.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),u=e.getContext(o),t.t0=e,t.t1=a,t.next=6,u;case 6:return t.t2=t.sent.getContextRaw(),l=t.t0.parseContext.call(t.t0,t.t1,t.t2),e.contextTree.setContext(o.slice(0,-1),l),e.emitContext(a),t.t3=e,t.next=13,l;case 13:return t.t4=t.sent,t.next=16,t.t3.validateContext.call(t.t3,t.t4);case 16:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(l.EntryHandlerKeyword);e.EntryHandlerKeywordContext=f},25323:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"],s=r(95967)["default"],u=r(13706)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordGraph=void 0;var c=r(522),l=function(t){s(r,t);var e=u(r);function r(){return o(this,r),e.call(this,"@graph")}return a(r,[{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.graphStack[s+1]=!0;case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(c.EntryHandlerKeyword);e.EntryHandlerKeywordGraph=l},30640:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"],s=r(95967)["default"],u=r(13706)["default"];r(92222),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordId=void 0;var c=r(20157),l=r(522),f=function(t){s(r,t);var e=u(r);function r(){return o(this,r),e.call(this,"@id")}return a(r,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){var u;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"string"!==typeof a&&e.emitError(new c.ErrorCoded("Found illegal @id '".concat(a,"'"),c.ERROR_CODES.INVALID_ID_VALUE)),t.next=3,r.getPropertiesDepth(o,s);case 3:return u=t.sent,void 0!==e.idStack[u]&&(e.idStack[u][0].listHead?e.emitError(new c.ErrorCoded("Found illegal neighbouring entries next to @list for key: '".concat(o[s-1],"'"),c.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):e.emitError(new c.ErrorCoded("Found duplicate @ids '".concat(e.idStack[u][0].value,"' and '").concat(a,"'"),c.ERROR_CODES.COLLIDING_KEYWORDS))),t.t0=r,t.t1=r,t.next=9,e.getContext(o);case 9:return t.t2=t.sent,t.t3=a,t.next=13,t.t1.resourceToTerm.call(t.t1,t.t2,t.t3);case 13:t.t4=t.sent,e.idStack[u]=t.t0.nullableTermToArray.call(t.t0,t.t4);case 15:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(l.EntryHandlerKeyword);e.EntryHandlerKeywordId=f},82822:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(17964)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"],u=r(95967)["default"],c=r(13706)["default"];r(38862),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordIncluded=void 0;var l=r(20157),f=r(522),h=function(t){u(r,t);var e=c(r);function r(){return a(this,r),e.call(this,"@included")}return s(r,[{key:"handle",value:function(){var t=o(n().mark((function t(e,r,o,a,s,u){var c;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"object"!==i(s)&&e.emitError(new l.ErrorCoded("Found illegal @included '".concat(s,"'"),l.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.t0=r,t.t1=s,t.t2=a,t.t3=u,t.next=7,e.getContext(a);case 7:return t.t4=t.sent,t.next=10,t.t0.unaliasKeywords.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 10:c=t.sent,"@value"in c&&e.emitError(new l.ErrorCoded("Found an illegal @included @value node '".concat(JSON.stringify(s),"'"),l.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in c&&e.emitError(new l.ErrorCoded("Found an illegal @included @list node '".concat(JSON.stringify(s),"'"),l.ERROR_CODES.INVALID_INCLUDED_VALUE)),e.emittedStack[u]=!1;case 14:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(f.EntryHandlerKeyword);e.EntryHandlerKeywordIncluded=h},25116:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(17964)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"],u=r(95967)["default"],c=r(13706)["default"];r(92222),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordNest=void 0;var l=r(20157),f=r(522),h=function(t){u(r,t);var e=c(r);function r(){return a(this,r),e.call(this,"@nest")}return s(r,[{key:"handle",value:function(){var t=o(n().mark((function t(e,r,o,a,s,u){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"object"!==i(s)&&e.emitError(new l.ErrorCoded("Found invalid @nest entry for '".concat(o,"': '").concat(s,"'"),l.ERROR_CODES.INVALID_NEST_VALUE)),t.t0=r,t.t1=s,t.t2=a,t.t3=u,t.next=7,e.getContext(a);case 7:return t.t4=t.sent,t.next=10,t.t0.unaliasKeywords.call(t.t0,t.t1,t.t2,t.t3,t.t4);case 10:if(t.t5=t.sent,!("@value"in t.t5)){t.next=13;break}e.emitError(new l.ErrorCoded("Found an invalid @value node for '".concat(o,"'"),l.ERROR_CODES.INVALID_NEST_VALUE));case 13:e.emittedStack[u]=!1;case 14:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(f.EntryHandlerKeyword);e.EntryHandlerKeywordNest=h},71867:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(5276)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"],u=r(95967)["default"],c=r(13706)["default"];r(41539),r(47042),r(2707),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordType=void 0;var l=r(20157),f=r(51106),h=r(26016),d=r(522),p=function(t){u(r,t);var e=c(r);function r(){return a(this,r),e.call(this,"@type")}return s(r,[{key:"isStackProcessor",value:function(){return!1}},{key:"handle",value:function(){var t=o(n().mark((function t(e,r,o,a,s,u){var c,d,p,y,v,b,g,w,m,x,_,E,k,S;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return c=a[u],t.next=3,e.getContext(a);case 3:return d=t.sent,p=r.rdfType,t.t0=f.Util,t.t1=d,t.t2=c,t.next=10,r.unaliasKeywordParent(a,u);case 10:t.t3=t.sent,y=t.t0.isPropertyReverse.call(t.t0,t.t1,t.t2,t.t3),v=Array.isArray(s)?s:[s],b=i(v),t.prev=14,b.s();case 16:if((g=b.n()).done){t.next=25;break}if(w=g.value,"string"!==typeof w&&e.emitError(new l.ErrorCoded("Found illegal @type '".concat(w,"'"),l.ERROR_CODES.INVALID_TYPE_VALUE)),m=r.createVocabOrBaseTerm(d,w),!m){t.next=23;break}return t.next=23,h.EntryHandlerPredicate.handlePredicateObject(e,r,a,u,p,m,y);case 23:t.next=16;break;case 25:t.next=30;break;case 27:t.prev=27,t.t4=t["catch"](14),b.e(t.t4);case 30:return t.prev=30,b.f(),t.finish(30);case 33:x=Promise.resolve(d),_=!1,E=i(v.sort());try{for(S=function(){var t=k.value,r=f.Util.getContextValue(d,"@context",t,null);r&&(_=!0,x=x.then((function(t){return e.parseContext(r,t.getContextRaw())})))},E.s();!(k=E.n()).done;)S()}catch(n){E.e(n)}finally{E.f()}!e.streamingProfile||!_&&e.streamingProfileAllowOutOfOrderPlainType||!e.processingStack[u]&&!e.idStack[u]||e.emitError(new l.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",l.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),_&&(x=x.then((function(t){return"@propagate"in t.getContextRaw()||(t.getContextRaw()["@propagate"]=!1),!1===t.getContextRaw()["@propagate"]&&(t.getContextRaw()["@__propagateFallback"]=d.getContextRaw()),t})),e.contextTree.setContext(a.slice(0,a.length-1),x)),e.processingType[u]=!0;case 40:case"end":return t.stop()}}),t,null,[[14,27,30,33]])})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(d.EntryHandlerKeyword);e.EntryHandlerKeywordType=p},64133:function(t,e,r){"use strict";var n=r(17964)["default"],i=r(28861)["default"],o=r(13861)["default"],a=r(20172)["default"],s=r(20378)["default"];r(92222),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordUnknownFallback=void 0;var u=r(20157),c=function(){function t(){a(this,t)}return s(t,[{key:"isPropertyHandler",value:function(){return!1}},{key:"isStackProcessor",value:function(){return!0}},{key:"validate",value:function(){var t=o(i().mark((function t(e,r,n,o,a){var s;return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.unaliasKeyword(n[o],n,o);case 2:if(s=t.sent,!u.Util.isPotentialKeyword(s)){t.next=8;break}if(a){t.next=7;break}if("@list"!==s){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=o(i().mark((function t(e,r,n,o,a){return i().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",u.Util.isPotentialKeyword(n));case 1:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"handle",value:function(){var e=o(i().mark((function e(r,o,a,s,c,l){var f;return i().wrap((function(e){while(1)switch(e.prev=e.next){case 0:f=t.VALID_KEYWORDS_TYPES[a],void 0!==f?f&&n(c)!==f.type&&r.emitError(new u.ErrorCoded("Invalid value type for '".concat(a,"' with value '").concat(c,"'"),f.errorCode)):r.strictValues&&r.emitError(new Error("Unknown keyword '".concat(a,"' with value '").concat(c,"'"))),r.emittedStack[l]=!1;case 3:case"end":return e.stop()}}),e)})));function r(t,r,n,i,o,a){return e.apply(this,arguments)}return r}()}]),t}();e.EntryHandlerKeywordUnknownFallback=c,c.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:u.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:u.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null}},26453:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"],s=r(66760)["default"],u=r(40358)["default"],c=r(95967)["default"],l=r(13706)["default"];r(74916),r(77601),r(47042),Object.defineProperty(e,"__esModule",{value:!0}),e.EntryHandlerKeywordValue=void 0;var f=r(522),h=function(t){c(r,t);var e=l(r);function r(){return o(this,r),e.call(this,"@value")}return a(r,[{key:"validate",value:function(){var t=i(n().mark((function t(e,i,o,a,c){var l;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(l=o[a],t.t0=l&&!e.literalStack[a],!t.t0){t.next=6;break}return t.next=5,this.test(e,i,l,o,a);case 5:t.t0=t.sent;case 6:if(!t.t0){t.next=8;break}e.literalStack[a]=!0;case 8:return t.abrupt("return",s(u(r.prototype),"validate",this).call(this,e,i,o,a,c));case 9:case"end":return t.stop()}}),t,this)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"test",value:function(){var t=i(n().mark((function t(e,r,i,o,a){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.unaliasKeyword(o[a],o.slice(0,o.length-1),a-1,!0);case 2:return t.t0=t.sent,t.abrupt("return","@value"===t.t0);case 4:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o){return t.apply(this,arguments)}return e}()},{key:"handle",value:function(){var t=i(n().mark((function t(e,r,i,o,a,s){return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.literalStack[s]=!0,delete e.unidentifiedValuesBuffer[s],delete e.unidentifiedGraphsBuffer[s],e.emittedStack[s]=!1;case 4:case"end":return t.stop()}}),t)})));function e(e,r,n,i,o,a){return t.apply(this,arguments)}return e}()}]),r}(f.EntryHandlerKeyword);e.EntryHandlerKeywordValue=h},34229:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(66631),e),i(r(61721),e)},66631:function(t,e,r){"use strict";var n=r(28861)["default"],i=r(13861)["default"],o=r(20172)["default"],a=r(20378)["default"],s=r(95967)["default"],u=r(13706)["default"];r(41539),r(21249),r(38862),r(69600),r(74916),r(23123),r(82481),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonLdSerializer=void 0;var c=r(20157),l=r(66639),f=r(82687),h=r(61721),d=function(t){s(r,t);var e=u(r);function r(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,r),t=e.call(this,{objectMode:!0}),t.indentation=0,t.options=n,t.options.baseIRI&&!t.options.context&&(t.options.context={"@base":t.options.baseIRI}),t.options.context?(t.originalContext=t.options.context,t.context=(new c.ContextParser).parse(t.options.context,{baseIRI:t.options.baseIRI})):t.context=Promise.resolve(new c.JsonLdContextNormalized({})),t}return a(r,[{key:"import",value:function(t){var e=new l.PassThrough({objectMode:!0});t.on("error",(function(t){return n.emit("error",t)})),t.on("data",(function(t){return e.push(t)})),t.on("end",(function(){return e.push(null)}));var n=e.pipe(new r(this.options));return n}},{key:"_transform",value:function(t,e,r){var n=this;this.context.then((function(e){n.transformQuad(t,e),r()})).catch(r)}},{key:"list",value:function(){var t=i(n().mark((function t(e){var r,i=this;return n().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.context;case 2:return r=t.sent,t.abrupt("return",{"@list":e.map((function(t){return h.Util.termToValue(t,r,i.options)}))});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"_flush",value:function(t){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.endGraph(),this.endDocument(),t(null,null)}},{key:"transformQuad",value:function(t,e){this.opened||this.pushDocumentStart();var r=this.lastGraph&&"DefaultGraph"!==this.lastGraph.termType&&this.lastGraph.equals(t.subject);if(!r&&(!this.lastGraph||!t.graph.equals(this.lastGraph))){var n="DefaultGraph"!==t.graph.termType&&this.lastSubject&&this.lastSubject.equals(t.graph);this.lastGraph&&("DefaultGraph"!==this.lastGraph.termType?(this.endPredicate(),this.endSubject(),this.endGraph(!0),n=!1):n?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),"DefaultGraph"!==t.graph.termType&&(n||this.pushId(t.graph,e),this.pushSeparator(this.options.space?f.SeparatorType.GRAPH_FIELD_NONCOMPACT:f.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=t.graph}this.lastSubject&&t.subject.equals(this.lastSubject)||(r?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(f.SeparatorType.ARRAY_END_COMMA),this.lastGraph=t.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(t.subject,e)),this.lastSubject=t.subject),this.lastPredicate&&t.predicate.equals(this.lastPredicate)||(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(t.predicate,e)),this.pushObject(t.object,e)}},{key:"pushDocumentStart",value:function(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(f.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(f.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?f.SeparatorType.GRAPH_FIELD_NONCOMPACT:f.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(f.SeparatorType.ARRAY_START),this.indentation++)}},{key:"pushId",value:function(t,e){var r="BlankNode"===t.termType?"_:"+t.value:e.compactIri(t.value,!1);this.pushSeparator(f.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": "'.concat(r,'",'):'"@id":"'.concat(r,'",'))}},{key:"pushPredicate",value:function(t,e){var r=t.value;this.options.useRdfType||r!==h.Util.RDF_TYPE||(r="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));var n=e.compactIri(r,!0);this.pushIndented(this.options.space?'"'.concat(n,'": ['):'"'.concat(n,'":[')),this.indentation++,this.lastPredicate=t}},{key:"pushObject",value:function(t,e){var r;this.hadObjectForPredicate?this.pushSeparator(f.SeparatorType.COMMA):this.hadObjectForPredicate=!0;try{r=t["@list"]?t:h.Util.termToValue(t,e,this.objectOptions||this.options)}catch(n){return this.emit("error",n)}this.pushIndented(JSON.stringify(r,null,this.options.space))}},{key:"endDocument",value:function(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(f.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(f.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(f.SeparatorType.ARRAY_END))}},{key:"endPredicate",value:function(t){this.indentation--,this.pushSeparator(t?f.SeparatorType.ARRAY_END_COMMA:f.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}},{key:"endSubject",value:function(t){this.indentation--,this.pushSeparator(t?f.SeparatorType.OBJECT_END_COMMA:f.SeparatorType.OBJECT_END),this.lastSubject=null}},{key:"endGraph",value:function(t){this.indentation--,this.pushSeparator(f.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(t?f.SeparatorType.OBJECT_END_COMMA:f.SeparatorType.OBJECT_END),this.lastGraph=null}},{key:"pushSeparator",value:function(t){this.pushIndented(t.label)}},{key:"pushIndented",value:function(t){var e=this.getIndentPrefix(),r=t.split("\n").map((function(t){return e+t})).join("\n");this.push(r),this.options.space&&this.push("\n")}},{key:"getIndentPrefix",value:function(){return this.options.space?this.options.space.repeat(this.indentation):""}}]),r}(l.Transform);e.JsonLdSerializer=d},82687:function(t,e,r){"use strict";var n=r(20378)["default"],i=r(20172)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.SeparatorType=void 0;var o=n((function t(e){i(this,t),this.label=e}));e.SeparatorType=o,o.COMMA=new o(","),o.OBJECT_START=new o("{"),o.OBJECT_END=new o("}"),o.OBJECT_END_COMMA=new o("},"),o.ARRAY_START=new o("["),o.ARRAY_END=new o("]"),o.ARRAY_END_COMMA=new o("],"),o.GRAPH_FIELD_NONCOMPACT=new o('"@graph": ['),o.GRAPH_FIELD_COMPACT=new o('"@graph":['),o.CONTEXT_FIELD=new o('"@context":')},61721:function(t,e,r){"use strict";var n=r(94673)["default"],i=r(20172)["default"],o=r(20378)["default"];r(23157),r(74916),r(23123),r(21703),Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var a=r(20157),s=function(){function t(){i(this,t)}return o(t,null,[{key:"termToValue",value:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{compactIds:!1,useNativeTypes:!1};switch(e.termType){case"NamedNode":var o=r.compactIri(e.value,i.vocab);return i.compactIds?o:{"@id":o};case"DefaultGraph":return i.compactIds?e.value:{"@id":e.value};case"BlankNode":var s="_:".concat(e.value);return i.compactIds?s:{"@id":s};case"Literal":if(e.datatype.value===t.RDF_JSON){var u;try{u=JSON.parse(e.value)}catch(y){throw new a.ErrorCoded("Invalid JSON literal: "+y.message,a.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":u,"@type":"@json"}}if("i18n-datatype"===i.rdfDirection&&e.datatype.value.startsWith(t.I18N)){var c=e.datatype.value.substr(t.I18N.length,e.datatype.value.length).split("_"),l=n(c,2),f=l[0],h=l[1];return Object.assign(Object.assign({"@value":e.value},f?{"@language":f}:{}),h?{"@direction":h}:{})}var d=e.datatype.value===t.XSD_STRING,p={"@value":!d&&i.useNativeTypes?t.stringToNativeType(e.value,e.datatype.value):e.value};return e.language?Object.assign(Object.assign({},p),{"@language":e.language}):d||"string"!==typeof p["@value"]?p:Object.assign(Object.assign({},p),{"@type":e.datatype.value})}}},{key:"stringToNativeType",value:function(e,r){if(r.startsWith(t.XSD)){var n=r.substr(t.XSD.length);switch(n){case"boolean":if("true"===e)return!0;if("false"===e)return!1;throw new Error("Invalid xsd:boolean value '".concat(e,"'"));case"integer":case"number":case"int":case"byte":case"long":var i=parseInt(e,10);if(isNaN(i))throw new Error("Invalid xsd:integer value '".concat(e,"'"));return i;case"float":case"double":var o=parseFloat(e);if(isNaN(o))throw new Error("Invalid xsd:float value '".concat(e,"'"));return o}}return e}}]),t}();e.Util=s,s.XSD="http://www.w3.org/2001/XMLSchema#",s.XSD_STRING=s.XSD+"string",s.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s.RDF_TYPE=s.RDF+"type",s.RDF_JSON=s.RDF+"JSON",s.I18N="https://www.w3.org/ns/i18n#"},78296:function(t,e,r){var n=r(57270)["Buffer"];r(47941),r(41539),r(39714),r(21703),r(38862),r(9653),r(74916),r(4723);var i={},o=i.LEFT_BRACE=1,a=i.RIGHT_BRACE=2,s=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,c=i.COLON=5,l=i.COMMA=6,f=i.TRUE=7,h=i.FALSE=8,d=i.NULL=9,p=i.STRING=10,y=i.NUMBER=11,v=i.START=17,b=i.STOP=18,g=i.TRUE1=33,w=i.TRUE2=34,m=i.TRUE3=35,x=i.FALSE1=49,_=i.FALSE2=50,E=i.FALSE3=51,k=i.FALSE4=52,S=i.NULL1=65,O=i.NULL2=66,C=i.NULL3=67,R=i.NUMBER1=81,I=i.NUMBER3=83,D=i.STRING1=97,T=i.STRING2=98,A=i.STRING3=99,P=i.STRING4=100,N=i.STRING5=101,j=i.STRING6=102,L=i.VALUE=113,M=i.KEY=114,U=i.OBJECT=129,V=i.ARRAY=130,B="\\".charCodeAt(0),F="/".charCodeAt(0),G="\b".charCodeAt(0),J="\f".charCodeAt(0),K="\n".charCodeAt(0),q="\r".charCodeAt(0),H="\t".charCodeAt(0),W=65536;function z(){this.tState=v,this.value=void 0,this.string=void 0,this.stringBuffer=n.alloc?n.alloc(W):new n(W),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=L,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new n(2),3:new n(3),4:new n(4)},this.offset=-1}z.toknam=function(t){for(var e=Object.keys(i),r=0,n=e.length;r<n;r++){var o=e[r];if(i[o]===t)return o}return t&&"0x"+t.toString(16)};var $=z.prototype;$.onError=function(t){throw t},$.charError=function(t,e){this.tState=b,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+z.toknam(this.tState)))},$.appendStringChar=function(t){this.stringBufferOffset>=W&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=t},$.appendStringBuf=function(t,e,r){var n=t.length;"number"===typeof e&&(n="number"===typeof r?r<0?t.length-e+r:r-e:t.length-e),n<0&&(n=0),this.stringBufferOffset+n>W&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),t.copy(this.stringBuffer,this.stringBufferOffset,e,r),this.stringBufferOffset+=n},$.write=function(t){var e;"string"===typeof t&&(t=new n(t));for(var r=0,i=t.length;r<i;r++)if(this.tState===v){if(e=t[r],this.offset++,123===e)this.onToken(o,"{");else if(125===e)this.onToken(a,"}");else if(91===e)this.onToken(s,"[");else if(93===e)this.onToken(u,"]");else if(58===e)this.onToken(c,":");else if(44===e)this.onToken(l,",");else if(116===e)this.tState=g;else if(102===e)this.tState=x;else if(110===e)this.tState=S;else if(34===e)this.string="",this.stringBufferOffset=0,this.tState=D;else if(45===e)this.string="-",this.tState=R;else if(e>=48&&e<64)this.string=String.fromCharCode(e),this.tState=I;else if(32!==e&&9!==e&&10!==e&&13!==e)return this.charError(t,r)}else if(this.tState===D)if(e=t[r],this.bytes_remaining>0){for(var b=0;b<this.bytes_remaining;b++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+b]=t[b];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,r=r+b-1}else if(0===this.bytes_remaining&&e>=128){if(e<=193||e>244)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+z.toknam(this.tState)));if(e>=194&&e<=223&&(this.bytes_in_sequence=2),e>=224&&e<=239&&(this.bytes_in_sequence=3),e>=240&&e<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>t.length){for(var L=0;L<=t.length-1-r;L++)this.temp_buffs[this.bytes_in_sequence][L]=t[r+L];this.bytes_remaining=r+this.bytes_in_sequence-t.length,r=t.length-1}else this.appendStringBuf(t,r,r+this.bytes_in_sequence),r=r+this.bytes_in_sequence-1}else if(34===e)this.tState=v,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(p,this.string),this.offset+=n.byteLength(this.string,"utf8")+1,this.string=void 0;else if(92===e)this.tState=T;else{if(!(e>=32))return this.charError(t,r);this.appendStringChar(e)}else if(this.tState===T)if(e=t[r],34===e)this.appendStringChar(e),this.tState=D;else if(92===e)this.appendStringChar(B),this.tState=D;else if(47===e)this.appendStringChar(F),this.tState=D;else if(98===e)this.appendStringChar(G),this.tState=D;else if(102===e)this.appendStringChar(J),this.tState=D;else if(110===e)this.appendStringChar(K),this.tState=D;else if(114===e)this.appendStringChar(q),this.tState=D;else if(116===e)this.appendStringChar(H),this.tState=D;else{if(117!==e)return this.charError(t,r);this.unicode="",this.tState=A}else if(this.tState===A||this.tState===P||this.tState===N||this.tState===j){if(e=t[r],!(e>=48&&e<64||e>64&&e<=70||e>96&&e<=102))return this.charError(t,r);if(this.unicode+=String.fromCharCode(e),this.tState++===j){var M=parseInt(this.unicode,16);this.unicode=void 0,void 0!==this.highSurrogate&&M>=56320&&M<57344?(this.appendStringBuf(new n(String.fromCharCode(this.highSurrogate,M))),this.highSurrogate=void 0):void 0===this.highSurrogate&&M>=55296&&M<56320?this.highSurrogate=M:(void 0!==this.highSurrogate&&(this.appendStringBuf(new n(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new n(String.fromCharCode(M)))),this.tState=D}}else if(this.tState===R||this.tState===I)switch(e=t[r],e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(e),this.tState=I;break;default:this.tState=v;var U=Number(this.string);if(isNaN(U))return this.charError(t,r);this.string.match(/[0-9]+/)==this.string&&U.toString()!=this.string?this.onToken(p,this.string):this.onToken(y,U),this.offset+=this.string.length-1,this.string=void 0,r--;break}else if(this.tState===g){if(114!==t[r])return this.charError(t,r);this.tState=w}else if(this.tState===w){if(117!==t[r])return this.charError(t,r);this.tState=m}else if(this.tState===m){if(101!==t[r])return this.charError(t,r);this.tState=v,this.onToken(f,!0),this.offset+=3}else if(this.tState===x){if(97!==t[r])return this.charError(t,r);this.tState=_}else if(this.tState===_){if(108!==t[r])return this.charError(t,r);this.tState=E}else if(this.tState===E){if(115!==t[r])return this.charError(t,r);this.tState=k}else if(this.tState===k){if(101!==t[r])return this.charError(t,r);this.tState=v,this.onToken(h,!1),this.offset+=4}else if(this.tState===S){if(117!==t[r])return this.charError(t,r);this.tState=O}else if(this.tState===O){if(108!==t[r])return this.charError(t,r);this.tState=C}else if(this.tState===C){if(108!==t[r])return this.charError(t,r);this.tState=v,this.onToken(d,null),this.offset+=3}},$.onToken=function(t,e){},$.parseError=function(t,e){this.tState=b,this.onError(new Error("Unexpected "+z.toknam(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+z.toknam(this.state)))},$.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},$.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=L)},$.emit=function(t){this.mode&&(this.state=l),this.onValue(t)},$.onValue=function(t){},$.onToken=function(t,e){if(this.state===L)if(t===p||t===y||t===f||t===h||t===d)this.value&&(this.value[this.key]=e),this.emit(e);else if(t===o)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=M,this.mode=U;else if(t===s)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=V,this.state=L;else if(t===a){if(this.mode!==U)return this.parseError(t,e);this.pop()}else{if(t!==u)return this.parseError(t,e);if(this.mode!==V)return this.parseError(t,e);this.pop()}else if(this.state===M)if(t===p)this.key=e,this.state=c;else{if(t!==a)return this.parseError(t,e);this.pop()}else if(this.state===c){if(t!==c)return this.parseError(t,e);this.state=L}else{if(this.state!==l)return this.parseError(t,e);if(t===l)this.mode===V?(this.key++,this.state=L):this.mode===U&&(this.state=M);else{if(!(t===u&&this.mode===V||t===a&&this.mode===U))return this.parseError(t,e);this.pop()}}},z.C=i,t.exports=z},85272:function(t,e,r){"use strict";r.r(e),r.d(e,{BlankNode:function(){return l.DP},DataFactory:function(){return l.ZP},DefaultGraph:function(){return l.Xy},Lexer:function(){return n.Z},Literal:function(){return l.t$},NamedNode:function(){return l.jJ},Parser:function(){return i.Z},Quad:function(){return l.lD},Store:function(){return C},StreamParser:function(){return D},StreamWriter:function(){return T},Term:function(){return l.Rh},Triple:function(){return l.PL},Util:function(){return f},Variable:function(){return l._w},Writer:function(){return w},default:function(){return A},termFromId:function(){return l.LQ},termToId:function(){return l.dW}});var n=r(22366),i=r(80057),o=r(76133),a=r(92751),s=r(99418),u=r(49161),c=(r(74916),r(77601),r(24603),r(28450),r(88386),r(39714),r(92222),r(27852),r(69600),r(21249),r(15306),r(21703),r(41539),r(51010)),l=r(56181),f=r(36626),h=l.ZP.defaultGraph(),d=c.Z.rdf,p=c.Z.xsd,y=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,v=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,b={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},g=function(t){(0,s.Z)(r,t);var e=(0,u.Z)(r);function r(){return(0,o.Z)(this,r),e.apply(this,arguments)}return(0,a.Z)(r,[{key:"equals",value:function(){return!1}}]),r}(l.Rh),w=function(){function t(e,r){if((0,o.Z)(this,t),this._prefixRegex=/$0^/,e&&"function"!==typeof e.write&&(r=e,e=null),r=r||{},this._lists=r.lists,e)this._outputStream=e,this._endStream=void 0===r.end||!!r.end;else{var n="";this._outputStream={write:function(t,e,r){n+=t,r&&r()},end:function(t){t&&t(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(r.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=h,this._prefixIRIs=Object.create(null),r.prefixes&&this.addPrefixes(r.prefixes),r.baseIRI&&(this._baseMatcher=new RegExp("^".concat(x(r.baseIRI)).concat(r.baseIRI.endsWith("/")?"":"[#?]")),this._baseLength=r.baseIRI.length))}return(0,a.Z)(t,[{key:"_inDefaultGraph",get:function(){return h.equals(this._graph)}},{key:"_write",value:function(t,e){this._outputStream.write(t,"utf8",e)}},{key:"_writeQuad",value:function(t,e,r,n,i){try{n.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(h.equals(n)?"":"".concat(this._encodeIriOrBlank(n)," {\n"))),this._graph=n,this._subject=null),t.equals(this._subject)?e.equals(this._predicate)?this._write(", ".concat(this._encodeObject(r)),i):this._write(";\n    ".concat(this._encodePredicate(this._predicate=e)," ").concat(this._encodeObject(r)),i):this._write("".concat((null===this._subject?"":".\n")+this._encodeSubject(this._subject=t)," ").concat(this._encodePredicate(this._predicate=e)," ").concat(this._encodeObject(r)),i)}catch(o){i&&i(o)}}},{key:"_writeQuadLine",value:function(t,e,r,n,i){delete this._prefixMatch,this._write(this.quadToString(t,e,r,n),i)}},{key:"quadToString",value:function(t,e,r,n){return"".concat(this._encodeSubject(t)," ").concat(this._encodeIriOrBlank(e)," ").concat(this._encodeObject(r)).concat(n&&n.value?" ".concat(this._encodeIriOrBlank(n)," .\n"):" .\n")}},{key:"quadsToString",value:function(t){var e=this;return t.map((function(t){return e.quadToString(t.subject,t.predicate,t.object,t.graph)})).join("")}},{key:"_encodeSubject",value:function(t){return"Quad"===t.termType?this._encodeQuad(t):this._encodeIriOrBlank(t)}},{key:"_encodeIriOrBlank",value:function(t){if("NamedNode"!==t.termType)return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:"_:".concat(t.value);var e=t.value;this._baseMatcher&&this._baseMatcher.test(e)&&(e=e.substr(this._baseLength)),y.test(e)&&(e=e.replace(v,m));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<".concat(e,">")}},{key:"_encodeLiteral",value:function(t){var e=t.value;if(y.test(e)&&(e=e.replace(v,m)),t.language)return'"'.concat(e,'"@').concat(t.language);if(this._lineMode){if(t.datatype.value===p.string)return'"'.concat(e,'"')}else switch(t.datatype.value){case p.string:return'"'.concat(e,'"');case p.boolean:if("true"===e||"false"===e)return e;break;case p.integer:if(/^[+-]?\d+$/.test(e))return e;break;case p.decimal:if(/^[+-]?\d*\.\d+$/.test(e))return e;break;case p.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(e))return e;break}return'"'.concat(e,'"^^').concat(this._encodeIriOrBlank(t.datatype))}},{key:"_encodePredicate",value:function(t){return t.value===d.type?"a":this._encodeIriOrBlank(t)}},{key:"_encodeObject",value:function(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}},{key:"_encodeQuad",value:function(t){var e=t.subject,r=t.predicate,n=t.object,i=t.graph;return"<<".concat(this._encodeSubject(e)," ").concat(this._encodePredicate(r)," ").concat(this._encodeObject(n)).concat((0,f.isDefaultGraph)(i)?"":" ".concat(this._encodeIriOrBlank(i)),">>")}},{key:"_blockedWrite",value:function(){throw new Error("Cannot write because the writer has been closed.")}},{key:"addQuad",value:function(t,e,r,n,i){void 0===r?this._writeQuad(t.subject,t.predicate,t.object,t.graph,e):"function"===typeof n?this._writeQuad(t,e,r,h,n):this._writeQuad(t,e,r,n||h,i)}},{key:"addQuads",value:function(t){for(var e=0;e<t.length;e++)this.addQuad(t[e])}},{key:"addPrefix",value:function(t,e,r){var n={};n[t]=e,this.addPrefixes(n,r)}},{key:"addPrefixes",value:function(t,e){if(!this._prefixIRIs)return e&&e();var r=!1;for(var n in t){var i=t[n];"string"!==typeof i&&(i=i.value),r=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[i]=n+=":",this._write("@prefix ".concat(n," <").concat(i,">.\n"))}if(r){var o="",a="";for(var s in this._prefixIRIs)o+=o?"|".concat(s):s,a+=(a?"|":"")+this._prefixIRIs[s];o=x(o,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:".concat(a,")[^/]*$|")+"^(".concat(o,")([a-zA-Z][\\-_a-zA-Z0-9]*)$"))}this._write(r?"\n":"",e)}},{key:"blank",value:function(t,e){var r,n,i=t;switch(void 0===t?i=[]:t.termType?i=[{predicate:t,object:e}]:"length"in t||(i=[t]),n=i.length){case 0:return new g("[]");case 1:if(r=i[0],!(r.object instanceof g))return new g("[ ".concat(this._encodePredicate(r.predicate)," ").concat(this._encodeObject(r.object)," ]"));default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate.equals(t)?o+=", ".concat(this._encodeObject(r.object)):(o+="".concat((a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)," ").concat(this._encodeObject(r.object)),t=r.predicate);return new g("".concat(o,"\n]"))}}},{key:"list",value:function(t){for(var e=t&&t.length||0,r=new Array(e),n=0;n<e;n++)r[n]=this._encodeObject(t[n]);return new g("(".concat(r.join(" "),")"))}},{key:"end",value:function(t){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;var e=t&&function(r,n){e=null,t(r,n)};if(this._endStream)try{return this._outputStream.end(e)}catch(r){}e&&e()}}]),t}();function m(t){var e=b[t];return void 0===e&&(1===t.length?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function x(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var _=r(43263),E=r(68932),k=r(62032),S=r(67906),O=(r(47941),r(33948),r(43371),r(78783),r(54747),r(32165),r(82526),r(41817),r(5701)),C=function(t){function e(t,r){(0,o.Z)(this,e),this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,r||!t||t[0]||(r=t,t=null),r=r||{},this._factory=r.factory||l.ZP,t&&this.addQuads(t)}return(0,a.Z)(e,[{key:"size",get:function(){var t=this._size;if(null!==t)return t;t=0;var e,r,n=this._graphs;for(var i in n)for(var o in e=n[i].subjects)for(var a in r=e[o])t+=Object.keys(r[a]).length;return this._size=t}},{key:"_addToIndex",value:function(t,e,r,n){var i=t[e]||(t[e]={}),o=i[r]||(i[r]={}),a=n in o;return a||(o[n]=null),!a}},{key:"_removeFromIndex",value:function(t,e,r,n){var i=t[e],o=i[r];for(var a in delete o[n],o)return;for(var s in delete i[r],i)return;delete t[e]}},{key:"_findInIndex",value:(0,S.Z)().mark((function t(e,r,n,i,o,a,s,u){var c,f,h,d,p,y,v,b,g,w;return(0,S.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:d=this._entities,p=(0,l.LQ)(u,this._factory),y={subject:null,predicate:null,object:null},r&&((c=e,e={})[r]=c[r]),t.t0=(0,S.Z)().keys(e);case 5:if((t.t1=t.t0()).done){t.next=28;break}if(v=t.t1.value,!(f=e[v])){t.next=26;break}y[o]=(0,l.LQ)(d[v],this._factory),n&&((c=f,f={})[n]=c[n]),t.t2=(0,S.Z)().keys(f);case 11:if((t.t3=t.t2()).done){t.next=26;break}if(b=t.t3.value,!(h=f[b])){t.next=24;break}y[a]=(0,l.LQ)(d[b],this._factory),g=i?i in h?[i]:[]:Object.keys(h),w=0;case 17:if(!(w<g.length)){t.next=24;break}return y[s]=(0,l.LQ)(d[g[w]],this._factory),t.next=21,this._factory.quad(y.subject,y.predicate,y.object,p);case 21:w++,t.next=17;break;case 24:t.next=11;break;case 26:t.next=5;break;case 28:case"end":return t.stop()}}),t,this)}))},{key:"_loop",value:function(t,e){for(var r in t)e(r)}},{key:"_loopByKey0",value:function(t,e,r){var n,i;if(n=t[e])for(i in n)r(i)}},{key:"_loopByKey1",value:function(t,e,r){var n,i;for(n in t)i=t[n],i[e]&&r(n)}},{key:"_loopBy2Keys",value:function(t,e,r,n){var i,o,a;if((i=t[e])&&(o=i[r]))for(a in o)n(a)}},{key:"_countInIndex",value:function(t,e,r,n){var i,o,a,s=0;for(var u in e&&((i=t,t={})[e]=i[e]),t)if(o=t[u])for(var c in r&&((i=o,o={})[r]=i[r]),o)(a=o[c])&&(n?n in a&&s++:s+=Object.keys(a).length);return s}},{key:"_getGraphs",value:function(t){if(!R(t))return this._graphs;var e={};return e[t]=this._graphs[t],e}},{key:"_uniqueEntities",value:function(t){var e=this,r=Object.create(null);return function(n){n in r||(r[n]=!0,t((0,l.LQ)(e._entities[n],e._factory)))}}},{key:"add",value:function(t){return this.addQuad(t),this}},{key:"addQuad",value:function(t,e,r,n){e||(n=t.graph,r=t.object,e=t.predicate,t=t.subject),t=(0,l.dW)(t),e=(0,l.dW)(e),r=(0,l.dW)(r),n=(0,l.dW)(n);var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._ids,a=this._entities;t=o[t]||(o[a[++this._id]=t]=this._id),e=o[e]||(o[a[++this._id]=e]=this._id),r=o[r]||(o[a[++this._id]=r]=this._id);var s=this._addToIndex(i.subjects,t,e,r);return this._addToIndex(i.predicates,e,r,t),this._addToIndex(i.objects,r,t,e),this._size=null,s}},{key:"addQuads",value:function(t){for(var e=0;e<t.length;e++)this.addQuad(t[e])}},{key:"delete",value:function(t){return this.removeQuad(t),this}},{key:"has",value:function(t,e,r,n){if(t&&t.subject){var i=t;t=i.subject,e=i.predicate,r=i.object,n=i.graph}return!this.readQuads(t,e,r,n).next().done}},{key:"import",value:function(t){var e=this;return t.on("data",(function(t){e.addQuad(t)})),t}},{key:"removeQuad",value:function(t,e,r,n){e||(n=t.graph,r=t.object,e=t.predicate,t=t.subject),t=(0,l.dW)(t),e=(0,l.dW)(e),r=(0,l.dW)(r),n=(0,l.dW)(n);var i,o,a,s=this._ids,u=this._graphs;if(!(t=s[t])||!(e=s[e])||!(r=s[r])||!(i=u[n])||!(o=i.subjects[t])||!(a=o[e])||!(r in a))return!1;for(t in this._removeFromIndex(i.subjects,t,e,r),this._removeFromIndex(i.predicates,e,r,t),this._removeFromIndex(i.objects,r,t,e),null!==this._size&&this._size--,i.subjects)return!0;return delete u[n],!0}},{key:"removeQuads",value:function(t){for(var e=0;e<t.length;e++)this.removeQuad(t[e])}},{key:"remove",value:function(t){var e=this;return t.on("data",(function(t){e.removeQuad(t)})),t}},{key:"removeMatches",value:function(t,e,r,n){var i=this,o=new O.Readable({objectMode:!0});return o._read=function(){var a,s=(0,k.Z)(i.readQuads(t,e,r,n));try{for(s.s();!(a=s.n()).done;){var u=a.value;o.push(u)}}catch(c){s.e(c)}finally{s.f()}o.push(null)},this.remove(o)}},{key:"deleteGraph",value:function(t){return this.removeMatches(null,null,null,t)}},{key:"getQuads",value:function(t,e,r,n){return(0,E.Z)(this.readQuads(t,e,r,n))}},{key:"readQuads",value:(0,S.Z)().mark((function t(e,r,n,i){var o,a,s,u,c,f,h;return(0,S.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=e&&(0,l.dW)(e),r=r&&(0,l.dW)(r),n=n&&(0,l.dW)(n),i=i&&(0,l.dW)(i),o=this._getGraphs(i),a=this._ids,!(R(e)&&!(u=a[e])||R(r)&&!(c=a[r])||R(n)&&!(f=a[n]))){t.next=7;break}return t.abrupt("return");case 7:t.t0=(0,S.Z)().keys(o);case 8:if((t.t1=t.t0()).done){t.next=30;break}if(h=t.t1.value,!(s=o[h])){t.next=28;break}if(!u){t.next=19;break}if(!f){t.next=16;break}return t.delegateYield(this._findInIndex(s.objects,f,u,c,"object","subject","predicate",h),"t2",14);case 14:t.next=17;break;case 16:return t.delegateYield(this._findInIndex(s.subjects,u,c,null,"subject","predicate","object",h),"t3",17);case 17:t.next=28;break;case 19:if(!c){t.next=23;break}return t.delegateYield(this._findInIndex(s.predicates,c,f,null,"predicate","object","subject",h),"t4",21);case 21:t.next=28;break;case 23:if(!f){t.next=27;break}return t.delegateYield(this._findInIndex(s.objects,f,null,null,"object","subject","predicate",h),"t5",25);case 25:t.next=28;break;case 27:return t.delegateYield(this._findInIndex(s.subjects,null,null,null,"subject","predicate","object",h),"t6",28);case 28:t.next=8;break;case 30:case"end":return t.stop()}}),t,this)}))},{key:"match",value:function(t,e,r,n){return new I(this,t,e,r,n)}},{key:"countQuads",value:function(t,e,r,n){t=t&&(0,l.dW)(t),e=e&&(0,l.dW)(e),r=r&&(0,l.dW)(r),n=n&&(0,l.dW)(n);var i,o,a,s,u=this._getGraphs(n),c=this._ids,f=0;if(R(t)&&!(o=c[t])||R(e)&&!(a=c[e])||R(r)&&!(s=c[r]))return 0;for(var h in u)(i=u[h])&&(f+=t?r?this._countInIndex(i.objects,s,o,a):this._countInIndex(i.subjects,o,a,s):e?this._countInIndex(i.predicates,a,s,o):this._countInIndex(i.objects,s,o,a));return f}},{key:"forEach",value:function(t,e,r,n,i){this.some((function(e){return t(e),!1}),e,r,n,i)}},{key:"every",value:function(t,e,r,n,i){var o=!1,a=!this.some((function(e){return o=!0,!t(e)}),e,r,n,i);return o&&a}},{key:"some",value:function(t,e,r,n,i){var o,a=(0,k.Z)(this.readQuads(e,r,n,i));try{for(a.s();!(o=a.n()).done;){var s=o.value;if(t(s))return!0}}catch(u){a.e(u)}finally{a.f()}return!1}},{key:"getSubjects",value:function(t,e,r){var n=[];return this.forSubjects((function(t){n.push(t)}),t,e,r),n}},{key:"forSubjects",value:function(t,e,r,n){e=e&&(0,l.dW)(e),r=r&&(0,l.dW)(r),n=n&&(0,l.dW)(n);var i,o,a,s=this._ids,u=this._getGraphs(n);if(t=this._uniqueEntities(t),!(R(e)&&!(o=s[e])||R(r)&&!(a=s[r])))for(n in u)(i=u[n])&&(o?a?this._loopBy2Keys(i.predicates,o,a,t):this._loopByKey1(i.subjects,o,t):a?this._loopByKey0(i.objects,a,t):this._loop(i.subjects,t))}},{key:"getPredicates",value:function(t,e,r){var n=[];return this.forPredicates((function(t){n.push(t)}),t,e,r),n}},{key:"forPredicates",value:function(t,e,r,n){e=e&&(0,l.dW)(e),r=r&&(0,l.dW)(r),n=n&&(0,l.dW)(n);var i,o,a,s=this._ids,u=this._getGraphs(n);if(t=this._uniqueEntities(t),!(R(e)&&!(o=s[e])||R(r)&&!(a=s[r])))for(n in u)(i=u[n])&&(o?a?this._loopBy2Keys(i.objects,a,o,t):this._loopByKey0(i.subjects,o,t):a?this._loopByKey1(i.predicates,a,t):this._loop(i.predicates,t))}},{key:"getObjects",value:function(t,e,r){var n=[];return this.forObjects((function(t){n.push(t)}),t,e,r),n}},{key:"forObjects",value:function(t,e,r,n){e=e&&(0,l.dW)(e),r=r&&(0,l.dW)(r),n=n&&(0,l.dW)(n);var i,o,a,s=this._ids,u=this._getGraphs(n);if(t=this._uniqueEntities(t),!(R(e)&&!(o=s[e])||R(r)&&!(a=s[r])))for(n in u)(i=u[n])&&(o?a?this._loopBy2Keys(i.subjects,o,a,t):this._loopByKey1(i.objects,o,t):a?this._loopByKey0(i.predicates,a,t):this._loop(i.objects,t))}},{key:"getGraphs",value:function(t,e,r){var n=[];return this.forGraphs((function(t){n.push(t)}),t,e,r),n}},{key:"forGraphs",value:function(t,e,r,n){for(var i in this._graphs)this.some((function(e){return t(e.graph),!0}),e,r,n,i)}},{key:"createBlankNode",value:function(t){var e,r;if(t){e=t="_:".concat(t),r=1;while(this._ids[e])e=t+r++}else do{e="_:b".concat(this._blankNodeIndex++)}while(this._ids[e]);return this._ids[e]=++this._id,this._entities[this._id]=e,this._factory.blankNode(e.substr(2))}},{key:"extractLists",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.remove,n=void 0!==r&&r,i=e.ignoreErrors,o=void 0!==i&&i,a={},s=o?function(){return!0}:function(t,e){throw new Error("".concat(t.value," ").concat(e))},u=this.getQuads(null,c.Z.rdf.rest,c.Z.rdf.nil,null),l=n?(0,E.Z)(u):[];return u.forEach((function(e){var r,i,o=[],u=!1,f=e.graph,h=e.subject;while(h&&!u){for(var d=t.getQuads(null,null,h,null),p=t.getQuads(h,null,null,null),y=void 0,v=null,b=null,g=null,w=0;w<p.length&&!u;w++)y=p[w],y.graph.equals(f)?r?u=s(h,"has non-list arcs out"):y.predicate.value===c.Z.rdf.first?v?u=s(h,"has multiple rdf:first arcs"):l.push(v=y):y.predicate.value===c.Z.rdf.rest?b?u=s(h,"has multiple rdf:rest arcs"):l.push(b=y):d.length?u=s(h,"can't be subject and object"):(r=y,i="subject"):u=s(h,"not confined to single graph");for(var m=0;m<d.length&&!u;++m)y=d[m],r?u=s(h,"can't have coreferences"):y.predicate.value===c.Z.rdf.rest?g?u=s(h,"has incoming rdf:rest arcs"):g=y:(r=y,i="object");v?o.unshift(v.object):u=s(h,"has no list head"),h=g&&g.subject}u?n=!1:r&&(a[r[i].value]=o)})),n&&this.removeQuads(l),a}},{key:t,value:(0,S.Z)().mark((function t(){return(0,S.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.delegateYield(this.readQuads(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);function R(t){return"string"===typeof t||t instanceof String}var I=function(t,e){(0,s.Z)(n,t);var r=(0,u.Z)(n);function n(t,e,i,a,s){var u;return(0,o.Z)(this,n),u=r.call(this,{objectMode:!0}),Object.assign((0,_.Z)(u),{n3Store:t,subject:e,predicate:i,object:a,graph:s}),u}return(0,a.Z)(n,[{key:"filtered",get:function(){if(!this._filtered){var t,e=this.n3Store,r=this.graph,n=this.object,i=this.predicate,o=this.subject,a=this._filtered=new C({factory:e._factory}),s=(0,k.Z)(e.readQuads(o,i,n,r));try{for(s.s();!(t=s.n()).done;){var u=t.value;a.addQuad(u)}}catch(c){s.e(c)}finally{s.f()}}return this._filtered}},{key:"size",get:function(){return this.filtered.size}},{key:"_read",value:function(){var t,e=(0,k.Z)(this);try{for(e.s();!(t=e.n()).done;){var r=t.value;this.push(r)}}catch(n){e.e(n)}finally{e.f()}this.push(null)}},{key:"add",value:function(t){return this.filtered.add(t)}},{key:"delete",value:function(t){return this.filtered.delete(t)}},{key:"has",value:function(t){return this.filtered.has(t)}},{key:"match",value:function(t,e,r,i){return new n(this.filtered,t,e,r,i)}},{key:e,value:(0,S.Z)().mark((function t(){return(0,S.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.delegateYield(this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))}]),n}(O.Readable,Symbol.iterator),D=function(t){(0,s.Z)(r,t);var e=(0,u.Z)(r);function r(t){var n;(0,o.Z)(this,r),n=e.call(this,{decodeStrings:!0}),n._readableState.objectMode=!0;var a,s,u=new i.Z(t);return u.parse({on:function(t,e){switch(t){case"data":a=e;break;case"end":s=e;break}}},(function(t,e){t&&n.emit("error",t)||e&&n.push(e)}),(function(t,e){n.emit("prefix",t,e)})),n._transform=function(t,e,r){a(t),r()},n._flush=function(t){s(),t()},n}return(0,a.Z)(r,[{key:"import",value:function(t){var e=this;return t.on("data",(function(t){e.write(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.emit("error",t)})),this}}]),r}(O.Transform),T=function(t){(0,s.Z)(r,t);var e=(0,u.Z)(r);function r(t){var n;(0,o.Z)(this,r),n=e.call(this,{encoding:"utf8",writableObjectMode:!0});var i=n._writer=new w({write:function(t,e,r){n.push(t),r&&r()},end:function(t){n.push(null),t&&t()}},t);return n._transform=function(t,e,r){i.addQuad(t,r)},n._flush=function(t){i.end(t)},n}return(0,a.Z)(r,[{key:"import",value:function(t){var e=this;return t.on("data",(function(t){e.write(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.emit("error",t)})),t.on("prefix",(function(t,r){e._writer.addPrefix(t,r)})),this}}]),r}(O.Transform),A={Lexer:n.Z,Parser:i.Z,Writer:w,Store:C,StreamParser:D,StreamWriter:T,Util:f,DataFactory:l.ZP,Term:l.Rh,NamedNode:l.jJ,Literal:l.t$,BlankNode:l.DP,Variable:l._w,DefaultGraph:l.Xy,Quad:l.lD,Triple:l.PL,termFromId:l.LQ,termToId:l.dW}},85561:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(54124),e),i(r(99083),e),i(r(35739),e),i(r(12794),e),i(r(34898),e),i(r(67457),e),i(r(60432),e)},54124:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNode=void 0;var o=function(){function t(e){n(this,t),this.termType="BlankNode",this.value=e}return i(t,[{key:"equals",value:function(t){return!!t&&"BlankNode"===t.termType&&t.value===this.value}}]),t}();e.BlankNode=o},99083:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];r(92222),Object.defineProperty(e,"__esModule",{value:!0}),e.DataFactory=void 0;var o=r(54124),a=r(35739),s=r(12794),u=r(34898),c=r(67457),l=r(60432),f=0,h=function(){function t(e){n(this,t),this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||"df_".concat(f++,"_")}return i(t,[{key:"namedNode",value:function(t){return new u.NamedNode(t)}},{key:"blankNode",value:function(t){return new o.BlankNode(t||"".concat(this.blankNodePrefix).concat(this.blankNodeCounter++))}},{key:"literal",value:function(t,e){return new s.Literal(t,e)}},{key:"variable",value:function(t){return new l.Variable(t)}},{key:"defaultGraph",value:function(){return a.DefaultGraph.INSTANCE}},{key:"quad",value:function(t,e,r,n){return new c.Quad(t,e,r,n||this.defaultGraph())}},{key:"fromTerm",value:function(t){switch(t.termType){case"NamedNode":return this.namedNode(t.value);case"BlankNode":return this.blankNode(t.value);case"Literal":return t.language?this.literal(t.value,t.language):t.datatype.equals(s.Literal.XSD_STRING)?this.literal(t.value):this.literal(t.value,this.fromTerm(t.datatype));case"Variable":return this.variable(t.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(t.subject),this.fromTerm(t.predicate),this.fromTerm(t.object),this.fromTerm(t.graph))}}},{key:"fromQuad",value:function(t){return this.fromTerm(t)}},{key:"resetBlankNodeCounter",value:function(){this.blankNodeCounter=0}}]),t}();e.DataFactory=h},35739:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGraph=void 0;var o=function(){function t(){n(this,t),this.termType="DefaultGraph",this.value=""}return i(t,[{key:"equals",value:function(t){return!!t&&"DefaultGraph"===t.termType}}]),t}();e.DefaultGraph=o,o.INSTANCE=new o},12794:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.Literal=void 0;var o=r(34898),a=function(){function t(e,r){n(this,t),this.termType="Literal",this.value=e,"string"===typeof r?(this.language=r,this.datatype=t.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=t.XSD_STRING)}return i(t,[{key:"equals",value:function(t){return!!t&&"Literal"===t.termType&&t.value===this.value&&t.language===this.language&&t.datatype.equals(this.datatype)}}]),t}();e.Literal=a,a.RDF_LANGUAGE_STRING=new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),a.XSD_STRING=new o.NamedNode("http://www.w3.org/2001/XMLSchema#string")},34898:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=void 0;var o=function(){function t(e){n(this,t),this.termType="NamedNode",this.value=e}return i(t,[{key:"equals",value:function(t){return!!t&&"NamedNode"===t.termType&&t.value===this.value}}]),t}();e.NamedNode=o},67457:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;var o=function(){function t(e,r,i,o){n(this,t),this.termType="Quad",this.value="",this.subject=e,this.predicate=r,this.object=i,this.graph=o}return i(t,[{key:"equals",value:function(t){return!!t&&("Quad"===t.termType||!t.termType)&&this.subject.equals(t.subject)&&this.predicate.equals(t.predicate)&&this.object.equals(t.object)&&this.graph.equals(t.graph)}}]),t}();e.Quad=o},60432:function(t,e,r){"use strict";var n=r(20172)["default"],i=r(20378)["default"];Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;var o=function(){function t(e){n(this,t),this.termType="Variable",this.value=e}return i(t,[{key:"equals",value:function(t){return!!t&&"Variable"===t.termType&&t.value===this.value}}]),t}();e.Variable=o},78230:function(t,e,r){"use strict";var n=r(17964)["default"];function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}r(21703),r(68309),r(21249),r(92222),r(69600),r(47042),r(74916),r(15306);var o={};function a(t,e,r){function n(t,r,n){return"string"===typeof e?e:e(t,r,n)}r||(r=Error);var a=function(t){function e(e,r,i){return t.call(this,n(e,r,i))||this}return i(e,t),e}(r);a.prototype.name=r.name,a.prototype.code=t,o[t]=a}function s(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map((function(t){return String(t)})),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:2===r?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function u(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function c(t,e,r){return(void 0===r||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function l(t,e,r){return"number"!==typeof r&&(r=0),!(r+e.length>t.length)&&-1!==t.indexOf(e,r)}a("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(t,e,r){var i,o;if("string"===typeof e&&u(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be",c(t," argument"))o="The ".concat(t," ").concat(i," ").concat(s(e,"type"));else{var a=l(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(a," ").concat(i," ").concat(s(e,"type"))}return o+=". Received type ".concat(n(r)),o}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=o},91606:function(t,e,r){"use strict";var n=r(81921);r(47941);var i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=l;var o=r(92345),a=r(1607);r(66110)(l,o);for(var s=i(a.prototype),u=0;u<s.length;u++){var c=s[u];l.prototype[c]||(l.prototype[c]=a.prototype[c])}function l(t){if(!(this instanceof l))return new l(t);o.call(this,t),a.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",f)))}function f(){this._writableState.ended||n.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},33091:function(t,e,r){"use strict";t.exports=i;var n=r(32784);function i(t){if(!(this instanceof i))return new i(t);n.call(this,t)}r(66110)(i,n),i.prototype._transform=function(t,e,r){r(null,t)}},92345:function(t,e,r){"use strict";var n,i=r(81921);r(41539),r(82472),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(37380),r(1118),r(30489),r(40561),r(82526),r(41817),r(72443),r(69600),r(92222),t.exports=I,I.ReadableState=R;r(87041).EventEmitter;var o=function(t,e){return t.listeners(e).length},a=r(69767),s=r(89914).Buffer,u=r.g.Uint8Array||function(){};function c(t){return s.from(t)}function l(t){return s.isBuffer(t)||t instanceof u}var f,h=r(94616);f=h&&h.debuglog?h.debuglog("stream"):function(){};var d,p,y,v=r(33006),b=r(71437),g=r(28552),w=g.getHighWaterMark,m=r(78230).q,x=m.ERR_INVALID_ARG_TYPE,_=m.ERR_STREAM_PUSH_AFTER_EOF,E=m.ERR_METHOD_NOT_IMPLEMENTED,k=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(66110)(I,a);var S=b.errorOrDestroy,O=["error","close","destroy","pause","resume"];function C(t,e,r){if("function"===typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}function R(t,e,i){n=n||r(91606),t=t||{},"boolean"!==typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=w(this,t,"readableHighWaterMark",i),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(52225).s),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function I(t){if(n=n||r(91606),!(this instanceof I))return new I(t);var e=this instanceof n;this._readableState=new R(t,this,e),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function D(t,e,r,n,i){f("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,L(t,a);else if(i||(o=A(a,e)),o)S(t,o);else if(a.objectMode||e&&e.length>0)if("string"===typeof e||a.objectMode||Object.getPrototypeOf(e)===s.prototype||(e=c(e)),n)a.endEmitted?S(t,new k):T(t,a,e,!0);else if(a.ended)S(t,new _);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(e=a.decoder.write(e),a.objectMode||0!==e.length?T(t,a,e,!1):V(t,a)):T(t,a,e,!1)}else n||(a.reading=!1,V(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&M(t)),V(t,e)}function A(t,e){var r;return l(e)||"string"===typeof e||void 0===e||t.objectMode||(r=new x("chunk",["string","Buffer","Uint8Array"],e)),r}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),I.prototype.destroy=b.destroy,I.prototype._undestroy=b.undestroy,I.prototype._destroy=function(t,e){e(t)},I.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"===typeof t&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=s.from(t,e),e=""),r=!0),D(this,t,e,!1,r)},I.prototype.unshift=function(t){return D(this,t,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(t){d||(d=r(52225).s);var e=new d(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;var n=this._readableState.buffer.head,i="";while(null!==n)i+=e.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var P=1073741824;function N(t){return t>=P?t=P:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function j(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=N(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function L(t,e){if(f("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?M(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,U(t)))}}function M(t){var e=t._readableState;f("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,i.nextTick(U,t))}function U(t){var e=t._readableState;f("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,H(t)}function V(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(B,t,e))}function B(t,e){while(!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length)){var r=e.length;if(f("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}function F(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,H(t))}}function G(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function J(t){f("readable nexttick read 0"),t.read(0)}function K(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(q,t,e))}function q(t,e){f("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),H(t),e.flowing&&!e.reading&&t.read(0)}function H(t){var e=t._readableState;f("flow",e.flowing);while(e.flowing&&null!==t.read());}function W(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r);var r}function z(t){var e=t._readableState;f("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,i.nextTick($,e,t))}function $(t,e){if(f("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}function Y(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}I.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?z(this):M(this),null;if(t=j(t,e),0===t&&e.ended)return 0===e.length&&z(this),null;var n,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&(i=!0,f("length less than watermark",i)),e.ended||e.reading?(i=!1,f("reading or ended",i)):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=j(r,e))),n=t>0?W(t,e):null,null===n?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&z(this)),null!==n&&this.emit("data",n),n},I.prototype._read=function(t){S(this,new E("_read()"))},I.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,f("pipe count=%d opts=%j",n.pipesCount,e);var a=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr,s=a?c:g;function u(t,e){f("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,d())}function c(){f("onend"),t.end()}n.endEmitted?i.nextTick(s):r.once("end",s),t.on("unpipe",u);var l=F(r);t.on("drain",l);var h=!1;function d(){f("cleanup"),t.removeListener("close",v),t.removeListener("finish",b),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",u),r.removeListener("end",c),r.removeListener("end",g),r.removeListener("data",p),h=!0,!n.awaitDrain||t._writableState&&!t._writableState.needDrain||l()}function p(e){f("ondata");var i=t.write(e);f("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===t||n.pipesCount>1&&-1!==Y(n.pipes,t))&&!h&&(f("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function y(e){f("onerror",e),g(),t.removeListener("error",y),0===o(t,"error")&&S(t,e)}function v(){t.removeListener("finish",b),g()}function b(){f("onfinish"),t.removeListener("close",v),g()}function g(){f("unpipe"),r.unpipe(t)}return r.on("data",p),C(t,"error",y),t.once("close",v),t.once("finish",b),t.emit("pipe",r),n.flowing||(f("pipe resume"),r.resume()),t},I.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=Y(e.pipes,t);return-1===a||(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},I.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e),n=this._readableState;return"data"===t?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===t&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,f("on readable",n.length,n.reading),n.length?M(this):n.reading||i.nextTick(J,this))),r},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(t,e){var r=a.prototype.removeListener.call(this,t,e);return"readable"===t&&i.nextTick(G,this),r},I.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||i.nextTick(G,this),e},I.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!t.readableListening,K(this,t)),t.paused=!1,this},I.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){if(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),(!r.objectMode||null!==i&&void 0!==i)&&(r.objectMode||i&&i.length)){var o=e.push(i);o||(n=!0,t.pause())}})),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<O.length;o++)t.on(O[o],this.emit.bind(this,O[o]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},"function"===typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=r(85660)),p(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),I._fromList=W,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"===typeof Symbol&&(I.from=function(t,e){return void 0===y&&(y=r(76415)),y(I,t,e)})},32784:function(t,e,r){"use strict";t.exports=l;var n=r(78230).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=r(91606);function c(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(t){if(!(this instanceof l))return new l(t);u.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",f)}function f(){var t=this;"function"!==typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(e,r){h(t,e,r)}))}function h(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new s;if(t._transformState.transforming)throw new a;return t.push(null)}r(66110)(l,u),l.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},l.prototype._transform=function(t,e,r){r(new i("_transform()"))},l.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},l.prototype._destroy=function(t,e){u.prototype._destroy.call(this,t,(function(t){e(t)}))}},1607:function(t,e,r){"use strict";var n,i=r(81921);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){q(e,t)}}r(41539),r(82472),r(48675),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(37380),r(1118),r(82526),r(41817),r(92401),r(4855),t.exports=R,R.WritableState=C;var a={deprecate:r(94728)},s=r(69767),u=r(89914).Buffer,c=r.g.Uint8Array||function(){};function l(t){return u.from(t)}function f(t){return u.isBuffer(t)||t instanceof c}var h,d=r(71437),p=r(28552),y=p.getHighWaterMark,v=r(78230).q,b=v.ERR_INVALID_ARG_TYPE,g=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_MULTIPLE_CALLBACK,m=v.ERR_STREAM_CANNOT_PIPE,x=v.ERR_STREAM_DESTROYED,_=v.ERR_STREAM_NULL_VALUES,E=v.ERR_STREAM_WRITE_AFTER_END,k=v.ERR_UNKNOWN_ENCODING,S=d.errorOrDestroy;function O(){}function C(t,e,i){n=n||r(91606),t=t||{},"boolean"!==typeof i&&(i=e instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=y(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){L(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function R(t){n=n||r(91606);var e=this instanceof n;if(!e&&!h.call(R,this))return new R(t);this._writableState=new C(t,this,e),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),s.call(this)}function I(t,e){var r=new E;S(t,r),i.nextTick(e,r)}function D(t,e,r,n){var o;return null===r?o=new _:"string"===typeof r||e.objectMode||(o=new b("chunk",["string","Buffer"],r)),!o||(S(t,o),i.nextTick(n,o),!1)}function T(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=u.from(e,r)),e}function A(t,e,r,n,i,o){if(!r){var a=T(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else P(t,e,!1,s,n,i,o);return u}function P(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new x("write")):r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function N(t,e,r,n,o){--e.pendingcb,r?(i.nextTick(o,n),i.nextTick(J,t,e),t._writableState.errorEmitted=!0,S(t,n)):(o(n),t._writableState.errorEmitted=!0,S(t,n),J(t,e))}function j(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function L(t,e){var r=t._writableState,n=r.sync,o=r.writecb;if("function"!==typeof o)throw new w;if(j(r),e)N(t,r,n,e,o);else{var a=B(r)||t.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||V(t,r),n?i.nextTick(M,t,r,a,o):M(t,r,a,o)}}function M(t,e,r,n){r||U(t,e),e.pendingcb--,n(),J(t,e)}function U(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function V(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),a=e.corkedRequestsFree;a.entry=r;var s=0,u=!0;while(r)i[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;i.allBuffers=u,P(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{while(r){var c=r.chunk,l=r.encoding,f=r.callback,h=e.objectMode?1:c.length;if(P(t,e,!1,h,c,l,f),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function B(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function F(t,e){t._final((function(r){e.pendingcb--,r&&S(t,r),e.prefinished=!0,t.emit("prefinish"),J(t,e)}))}function G(t,e){e.prefinished||e.finalCalled||("function"!==typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,i.nextTick(F,t,e)))}function J(t,e){var r=B(e);if(r&&(G(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function K(t,e,r){e.ending=!0,J(t,e),r&&(e.finished?i.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function q(t,e,r){var n=t.entry;t.entry=null;while(n){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}r(66110)(R,s),C.prototype.getBuffer=function(){var t=this.bufferedRequest,e=[];while(t)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(C.prototype,"buffer",{get:a.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===R&&(t&&t._writableState instanceof C)}})):h=function(t){return t instanceof this},R.prototype.pipe=function(){S(this,new m)},R.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&f(t);return o&&!u.isBuffer(t)&&(t=l(t)),"function"===typeof e&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),"function"!==typeof r&&(r=O),n.ending?I(this,r):(o||D(this,n,t,r))&&(n.pendingcb++,i=A(this,n,o,t,e,r)),i},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||V(this,t))},R.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new k(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(t,e,r){r(new g("_write()"))},R.prototype._writev=null,R.prototype.end=function(t,e,r){var n=this._writableState;return"function"===typeof t?(r=t,t=null,e=null):"function"===typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||K(this,n,r),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),R.prototype.destroy=d.destroy,R.prototype._undestroy=d.undestroy,R.prototype._destroy=function(t,e){e(t)}},85660:function(t,e,r){"use strict";var n,i=r(81921);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(82526),r(41817),r(41539),r(30489),r(72443);var a=r(32626),s=Symbol("lastResolve"),u=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function p(t,e){return{value:t,done:e}}function y(t){var e=t[s];if(null!==e){var r=t[d].read();null!==r&&(t[f]=null,t[s]=null,t[u]=null,e(p(r,!1)))}}function v(t){i.nextTick(y,t)}function b(t,e){return function(r,n){t.then((function(){e[l]?r(p(void 0,!0)):e[h](r,n)}),n)}}var g=Object.getPrototypeOf((function(){})),w=Object.setPrototypeOf((n={get stream(){return this[d]},next:function(){var t=this,e=this[c];if(null!==e)return Promise.reject(e);if(this[l])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise((function(e,r){i.nextTick((function(){t[c]?r(t[c]):e(p(void 0,!0))}))}));var r,n=this[f];if(n)r=new Promise(b(n,this));else{var o=this[d].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[h])}return this[f]=r,r}},o(n,Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var t=this;return new Promise((function(e,r){t[d].destroy(null,(function(t){t?r(t):e(p(void 0,!0))}))}))})),n),g),m=function(t){var e,r=Object.create(w,(e={},o(e,d,{value:t,writable:!0}),o(e,s,{value:null,writable:!0}),o(e,u,{value:null,writable:!0}),o(e,c,{value:null,writable:!0}),o(e,l,{value:t._readableState.endEmitted,writable:!0}),o(e,h,{value:function(t,e){var n=r[d].read();n?(r[f]=null,r[s]=null,r[u]=null,t(p(n,!1))):(r[s]=t,r[u]=e)},writable:!0}),e));return r[f]=null,a(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=r[u];return null!==e&&(r[f]=null,r[s]=null,r[u]=null,e(t)),void(r[c]=t)}var n=r[s];null!==n&&(r[f]=null,r[s]=null,r[u]=null,n(p(void 0,!0))),r[l]=!0})),t.on("readable",v.bind(null,r)),r};t.exports=m},33006:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}r(47941),r(82526),r(57327),r(41539),r(38880),r(54747),r(49337),r(21703),r(47042);var c=r(89914),l=c.Buffer,f=r(52361),h=f.inspect,d=h&&h.custom||"inspect";function p(t,e,r){l.prototype.copy.call(t,e,r)}t.exports=function(){function t(){a(this,t),this.head=null,this.tail=null,this.length=0}return u(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";var e=this.head,r=""+e.data;while(e=e.next)r+=t+e.data;return r}},{key:"concat",value:function(t){if(0===this.length)return l.alloc(0);var e=l.allocUnsafe(t>>>0),r=this.head,n=0;while(r)p(r.data,e,n),n+=r.data.length,r=r.next;return e}},{key:"consume",value:function(t,e){var r;return t<this.head.data.length?(r=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):r=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,r=1,n=e.data;t-=n.length;while(e=e.next){var i=e.data,o=t>i.length?i.length:t;if(o===i.length?n+=i:n+=i.slice(0,t),t-=o,0===t){o===i.length?(++r,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(t){var e=l.allocUnsafe(t),r=this.head,n=1;r.data.copy(e),t-=r.data.length;while(r=r.next){var i=r.data,o=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,o),t-=o,0===t){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,e}},{key:d,value:function(t,e){return h(this,i({},e,{depth:0,customInspect:!1}))}}]),t}()},71437:function(t,e,r){"use strict";var n=r(81921);function i(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(u,this,t)):n.nextTick(u,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?r._writableState?r._writableState.errorEmitted?n.nextTick(a,r):(r._writableState.errorEmitted=!0,n.nextTick(o,r,t)):n.nextTick(o,r,t):e?(n.nextTick(a,r),e(t)):n.nextTick(a,r)})),this)}function o(t,e){u(t,e),a(t)}function a(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(t,e){t.emit("error",e)}function c(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}t.exports={destroy:i,undestroy:s,errorOrDestroy:c}},32626:function(t,e,r){"use strict";var n=r(78230).q.ERR_STREAM_PREMATURE_CLOSE;function i(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function o(){}function a(t){return t.setHeader&&"function"===typeof t.abort}function s(t,e,r){if("function"===typeof e)return s(t,null,e);e||(e={}),r=i(r||o);var u=e.readable||!1!==e.readable&&t.readable,c=e.writable||!1!==e.writable&&t.writable,l=function(){t.writable||h()},f=t._writableState&&t._writableState.finished,h=function(){c=!1,f=!0,u||r.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){u=!1,d=!0,c||r.call(t)},y=function(e){r.call(t,e)},v=function(){var e;return u&&!d?(t._readableState&&t._readableState.ended||(e=new n),r.call(t,e)):c&&!f?(t._writableState&&t._writableState.ended||(e=new n),r.call(t,e)):void 0},b=function(){t.req.on("finish",h)};return a(t)?(t.on("complete",h),t.on("abort",v),t.req?b():t.on("request",b)):c&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",p),t.on("finish",h),!1!==e.error&&t.on("error",y),t.on("close",v),function(){t.removeListener("complete",h),t.removeListener("abort",v),t.removeListener("request",b),t.req&&t.req.removeListener("finish",h),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",h),t.removeListener("end",p),t.removeListener("error",y),t.removeListener("close",v)}}t.exports=s},76415:function(t,e,r){r(21703),t.exports=function(){throw new Error("Readable.from is not available in the browser")}},83329:function(t,e,r){"use strict";var n;function i(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}r(21249),r(41539),r(54747);var o=r(78230).q,a=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function u(t){if(t)throw t}function c(t){return t.setHeader&&"function"===typeof t.abort}function l(t,e,o,a){a=i(a);var u=!1;t.on("close",(function(){u=!0})),void 0===n&&(n=r(32626)),n(t,{readable:e,writable:o},(function(t){if(t)return a(t);u=!0,a()}));var l=!1;return function(e){if(!u&&!l)return l=!0,c(t)?t.abort():"function"===typeof t.destroy?t.destroy():void a(e||new s("pipe"))}}function f(t){t()}function h(t,e){return t.pipe(e)}function d(t){return t.length?"function"!==typeof t[t.length-1]?u:t.pop():u}function p(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,i=d(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new a("streams");var o=e.map((function(t,r){var a=r<e.length-1,s=r>0;return l(t,a,s,(function(t){n||(n=t),t&&o.forEach(f),a||(o.forEach(f),i(n))}))}));return e.reduce(h)}t.exports=p},28552:function(t,e,r){"use strict";var n=r(78230).q.ERR_INVALID_OPT_VALUE;function i(t,e,r){return null!=t.highWaterMark?t.highWaterMark:e?t[r]:null}function o(t,e,r,o){var a=i(e,o,r);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0){var s=o?r:"highWaterMark";throw new n(s,a)}return Math.floor(a)}return t.objectMode?16:16384}t.exports={getHighWaterMark:o}},69767:function(t,e,r){t.exports=r(87041).EventEmitter},5701:function(t,e,r){e=t.exports=r(92345),e.Stream=e,e.Readable=e,e.Writable=r(1607),e.Duplex=r(91606),e.Transform=r(32784),e.PassThrough=r(33091),e.finished=r(32626),e.pipeline=r(83329)},15600:function(t,e,r){"use strict";function n(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0}),n(r(62810))},62810:function(t,e,r){"use strict";function n(t,e){e=e||"";var r=e.indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error("Found invalid baseIRI '".concat(e,"' for value '").concat(t,"'"));return e}if(t.startsWith("?")){var n=e.indexOf("?");return n>0&&(e=e.substr(0,n)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){var a=t.indexOf(":");if(a<0)throw new Error("Found invalid relative IRI '".concat(t,"' for a missing baseIRI"));return o(t,a)}var s=t.indexOf(":");if(s>=0)return o(t,s);var u=e.indexOf(":");if(u<0)throw new Error("Found invalid baseIRI '".concat(e,"' for value '").concat(t,"'"));var c,l=e.substr(0,u+1);if(0===t.indexOf("//"))return l+o(t,s);if(e.indexOf("//",u)===u+1){if(c=e.indexOf("/",u+3),c<0)return e.length>u+3?e+"/"+o(t,s):l+o(t,s)}else if(c=e.indexOf("/",u+1),c<0)return l+o(t,s);if(0===t.indexOf("/"))return e.substr(0,c)+i(t);var f=e.substr(c),h=f.lastIndexOf("/");return h>=0&&h<f.length-1&&(f=f.substr(0,h+1),"."===t[0]&&"."!==t[1]&&"/"!==t[1]&&t[2]&&(t=t.substr(1))),t=f+t,t=i(t),e.substr(0,c)+t}function i(t){var e=[],r=0;while(r<t.length)switch(t[r]){case"/":if("."===t[r+1])if("."===t[r+2]){if(!a(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!a(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++;break}return"/"+e.map((function(t){return t.join("")})).join("/")}function o(t,e){var r=e+1;e>=0?"/"===t[e+1]&&"/"===t[e+2]&&(r=e+3):"/"===t[0]&&"/"===t[1]&&(r=2);var n=t.indexOf("/",r);if(n<0)return t;var o=t.substr(0,n),a=t.substr(n);return o+i(a)}function a(t){return!t||"#"===t||"?"===t||"/"===t}r(21703),r(92222),r(23157),r(69600),r(21249),Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=n,e.removeDotSegments=i,e.removeDotSegmentsOfPath=o},53161:function(t,e,r){t=r.nmd(t);var n,i,o,a=r(50476),s=r(17964)["default"];r(82526),r(41817),r(41539),r(39341),r(73706),r(10408),r(32165),r(78783),r(33948),r(92222),r(21703),r(23157),r(27852),r(47042),r(74916),r(4723),r(73210),r(23123),r(69720),r(69600),r(68309),r(21249),r(83112),r(39714),r(38862),r(57327),r(43290),r(40561),r(26833),r(36210),r(77601),r(2707),r(69826),r(15306),r(47941),r(74819),r(81299),r(26699),r(32023),r(52262),r(24506),r(70189),r(54747),r(49337),function(a,u){"object"==s(e)&&"object"==s(t)?t.exports=u(r(67696),r(97077),r(34229),r(85272)):(i=[r(67696),r(97077),r(34229),r(85272)],n=u,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o))}(window,(function(t,e,r,n){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e,r){"use strict";r.r(e),r.d(e,"DocumentFormat",(function(){return Mt})),r.d(e,"MalformedDocumentError",(function(){return qt})),r.d(e,"NetworkError",(function(){return Wt})),r.d(e,"SolidContainerModel",(function(){return Oe})),r.d(e,"SolidDocument",(function(){return Bt})),r.d(e,"SolidEngine",(function(){return fe})),r.d(e,"SolidModel",(function(){return Ut}));var n,i=r(0),o=r.n(i),u=r(1),c=r(2),l=r(3),f=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},h=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(f(arguments[e]));return t},d=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p=new(function(){function t(){}return t.prototype.resolve=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift();t.length>0;){var n=t.shift();n.startsWith("/")?r=this.base(r)+n:n.startsWith("http://")||n.startsWith("https://")?r=n:r.endsWith("/")?r+=n:r+="/"+n}return r},t.prototype.resolveDirectory=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=this.resolve.apply(this,h(t));return r.endsWith("/")?r:r+"/"},t.prototype.base=function(t){var e=t.indexOf("://"),r=t.substr(e+3).indexOf("/");return-1!==r?t.substring(0,e+3+r):t},t.prototype.parentDirectory=function(t){t.endsWith("/")&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return-1!==e?t.substr(0,e+1):t},t.prototype.fileName=function(t){var e=t.lastIndexOf("/");return-1!==e?t.substr(e+1):""},t.prototype.directoryName=function(t){return t.endsWith("/")||(t=this.parentDirectory(t)),this.fileName(t.slice(0,-1))},t.prototype.parse=function(t){var e=t.trim().match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/);if(!e)return null;var r=e[4]||"",n=f(-1===r.indexOf(":")?[r]:r.split(":"),2),i=n[0],o=n[1];return{protocol:e[2]||void 0,domain:i||void 0,port:o||void 0,path:e[5]||void 0,query:e[7]||void 0,fragment:e[9]||void 0}},t.prototype.clean=function(t,e){var r,n,i=this.parse(t);if(!i)return t;try{for(var o=d(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=f(a.value,2),u=s[0],c=s[1];i[u]=!1!==e[u]&&c||""}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return[i.protocol?i.protocol+"://":"",i.domain||"",i.port?":"+i.port:"",i.path||"",i.query?"?"+i.query:"",i.fragment?"#"+i.fragment:""].join("")},t.prototype.route=function(t){return this.clean(t,{protocol:!0,domain:!0,port:!0,path:!0,query:!1,fragment:!1})},t}()),y=(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),v=function(t){this.name=t},b=function(){function t(t,e,r){this.resourceUrl=t,this.name=e,this.value=r}return t.fromStatement=function(t){var e="NamedNode"===t.subject.termType?t.subject.value:null;return t.predicate.value===G("rdf:type")?this.type(e,t.object.value):"NamedNode"===t.object.termType?this.reference(e,t.predicate.value,t.object.value):"BlankNode"===t.object.termType?this.reference(e,t.predicate.value,null):"Variable"===t.object.termType?this.reference(e,t.predicate.value,new v(t.object.value)):this.literal(e,t.predicate.value,t.object.datatype.value===G("xsd:dateTime")?new Date(t.object.value):t.object.value)},t.literal=function(t,e,r){return new g(t,e,r)},t.reference=function(t,e,r){return new w(t,e,r)},t.type=function(t,e){return new m(t,e)},t.toTurtle=function(t,e){return void 0===e&&(e=null),t.map((function(t){return t.toTurtle(e)+" ."})).join("\n")},t.prototype.toTurtle=function(t){return void 0===t&&(t=null),this.getTurtleSubject(t)+" "+this.getTurtlePredicate()+" "+this.getTurtleObject(t)},t.prototype.clone=function(e){switch(e=null!=e?e:this.resourceUrl,this.type){case 2:return t.literal(e,this.name,this.value);case 0:return t.type(e,this.value);case 1:return t.reference(e,this.name,this.value)}},t.prototype.getTurtleReference=function(t,e){var r=null==t?void 0:t.indexOf("#");return t&&t!==e?null!==e&&t.startsWith(e)&&-1!==r?"<#"+t.substr(r+1)+">":"<"+encodeURI(t)+">":"<>"},t.prototype.getTurtleSubject=function(t){return this.getTurtleReference(this.resourceUrl,t)},t.prototype.getTurtlePredicate=function(){return"<"+encodeURI(this.name)+">"},t}(),g=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.type=2,i}return y(e,t),e.prototype.getTurtleObject=function(){if(this.value instanceof Date){var t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.map((function(t){return t.toString().padStart(2,"0")}))};return'"'+t(this.value.getUTCFullYear(),this.value.getUTCMonth()+1,this.value.getUTCDate()).join("-")+"T"+t(this.value.getUTCHours(),this.value.getUTCMinutes(),this.value.getUTCSeconds()).join(":")+'Z"^^<'+G("xsd:dateTime")+">"}return JSON.stringify(this.value)},e}(b),w=function(t){function e(e,r,n){var i=t.call(this,e,r,n)||this;return i.type=1,i}return y(e,t),e.prototype.getTurtleObject=function(t){return this.value instanceof v?this.value.name:this.getTurtleReference(this.value,t)},e}(b),m=function(t){function e(e,r){var n=t.call(this,e,G("rdf:type"),r)||this;return n.type=0,n}return y(e,t),e.prototype.getTurtlePredicate=function(){return"a"},e.prototype.getTurtleObject=function(){return"<"+encodeURI(this.value)+">"},e}(b),x=b,_=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},E=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_(arguments[e]));return t},k=function(){function t(t){this.url=t,this.statements=[],this.types=[],this.properties=[],this.propertiesIndex={}}return Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue(G("foaf:name"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label",{get:function(){return this.getPropertyValue(G("rdfs:label"))},enumerable:!0,configurable:!0}),t.prototype.isType=function(t){return-1!==this.types.indexOf(G(t))},t.prototype.getPropertyValue=function(t,e){void 0===e&&(e=null);var r=_(this.propertiesIndex[G(t)]||[],1)[0];return r?r.value:e},t.prototype.getPropertyValues=function(t){return(this.propertiesIndex[G(t)]||[]).map((function(t){return t.value}))},t.prototype.addStatement=function(t){if(t.subject.value===this.url){var e=x.fromStatement(t);0===e.type&&this.types.push(e.value),this.statements.push(t),this.properties.push(e),this.propertiesIndex[e.name]=E(this.propertiesIndex[e.name]||[],[e])}},t}(),S=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},O=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(S(arguments[e]));return t},C=new(function(){function t(){}return t.prototype.create=function(t){return Array.isArray(t)?t:[t]},t.prototype.clean=function(t){return t.filter((function(t){return!!t}))},t.prototype.contains=function(t,e){return-1!==t.indexOf(e)},t.prototype.filter=function(t){return t.filter((function(t){return!!t}))},t.prototype.flatten=function(t){return t.reduce((function(t,e){return O(t,e)}),[])},t.prototype.last=function(t){return t[t.length-1]},t.prototype.make=function(t,e){return void 0===e&&(e=null),new Array(t).fill(e)},t.prototype.range=function(t){for(var e=[],r=0;r<t;r++)e.push(r);return e},t.prototype.removeItem=function(t,e){var r=t.indexOf(e);return-1!==r&&t.splice(r,1),e},t.prototype.unique=function(t,e){void 0===e&&(e=null);var r=t.map((function(t){return e?e(t):t}));return t.filter((function(t,e){return r.indexOf(r[e])===e}))},t.prototype.without=function(t,e){return t.filter((function(t){return-1===e.indexOf(t)}))},t.prototype.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],n=function(e){r.push(t.map((function(t){return t[e]})))},i=0;i<t[0].length;i++)n(i);return r},t}()),R=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},I=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},D=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},T=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(D(arguments[e]));return t},A=function(){function t(t,e,r){void 0===e&&(e=[]),void 0===r&&(r={}),this.url=t,this.statements=e,this.metadata=r,this.resourcesIndex=this.statements.reduce((function(t,e){var r=e.subject.value;return r in t||(t[r]=new k(r)),t[r].addStatement(e),t}),{}),this.resources=Object.values(this.resourcesIndex),this.properties=this.resources.reduce((function(t,e){return T(t,e.properties)}),[])}return t.prototype.isEmpty=function(){return 0===this.statements.length},t.prototype.hasProperty=function(t,e){return t in this.resourcesIndex&&e in this.resourcesIndex[t].propertiesIndex},t.prototype.toJsonLD=function(){return R(this,void 0,void 0,(function(){return I(this,(function(t){return[2,J.createJsonLD(this.statements)]}))}))},t.prototype.resource=function(t){var e;return null!==(e=this.resourcesIndex[t])&&void 0!==e?e:null},t.prototype.clone=function(e){var r=this;void 0===e&&(e=null);var n=new t(e||this.url),i=C.without(Object.getOwnPropertyNames(this),["url"]);return Object.assign(n,i.reduce((function(t,e){return t[e]=r[e],t}),{})),n},t}(),P=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(){return(N=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},j=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},L=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},M=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},U=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(M(arguments[e]));return t},V=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B={foaf:"http://xmlns.com/foaf/0.1/",ldp:"http://www.w3.org/ns/ldp#",pim:"http://www.w3.org/ns/pim/space#",posix:"http://www.w3.org/ns/posix/stat#",purl:"http://purl.org/dc/terms/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"https://schema.org/",solid:"http://www.w3.org/ns/solid/terms#",xsd:"http://www.w3.org/2001/XMLSchema#"},F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e}(i.SoukaiError);function G(t,e){if(void 0===e&&(e={}),/^https?:\/\//.test(t))return t;var r=t.indexOf(":");if(-1===r)return t;e=N(N({},B),e);var n=t.substr(0,r);return n in e?e[n]+t.substr(n.length+1):t}var J=new(function(){function t(){}return t.prototype.parseTurtle=function(t,e){var r=this;return void 0===e&&(e={}),new Promise((function(n,i){var o=[],a=new l.Parser({baseIRI:e.baseUrl||"",format:e.format||"text/turtle"}),s={containsRelativeIRIs:!1,describedBy:r.getDescribedBy(e)},u=a._resolveRelativeIRI;a._resolveRelativeIRI=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.containsRelativeIRIs=!0,a._resolveRelativeIRI=u,a._resolveRelativeIRI.apply(a,U(t))},a.parse(t,(function(t,r){t?i(new F(t.message)):r?o.push(r):n(new A(e.baseUrl||"",o,s))}))}))},t.prototype.parseJsonLD=function(t){return j(this,void 0,void 0,(function(){return L(this,(function(e){return[2,new Promise((function(e,r){var n=[],i=new u.JsonLdParser({baseIRI:t["@id"]||""});i.on("data",(function(t){n.push(t)})),i.on("error",r),i.on("end",(function(){return e(new A(t["@id"]||null,n))})),i.write(JSON.stringify(t)),i.end()}))]}))}))},t.prototype.createJsonLD=function(t){return j(this,void 0,void 0,(function(){return L(this,(function(e){return t.sort((function(t,e){return t.subject.value.localeCompare(e.subject.value)})),[2,new Promise((function(e,r){var n,i,o=new c.JsonLdSerializer,a="";o.on("data",(function(t){return a+=t})),o.on("error",r),o.on("end",(function(){return e({"@graph":JSON.parse(a)})}));try{for(var s=V(t),u=s.next();!u.done;u=s.next()){var l=u.value;o.write(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}o.end()}))]}))}))},t.prototype.flattenJsonLD=function(t){return j(this,void 0,void 0,(function(){return L(this,(function(e){switch(e.label){case 0:return[4,this.parseJsonLD(t)];case 1:return[2,e.sent().toJsonLD()]}}))}))},t.prototype.getJsonLDProperty=function(t,e){if((e=G(e))in t)return this.getJsonLDPropertyValue(t[e]);if("@context"in t){var r=t["@context"],n=Object.entries(r).find((function(t){var r=M(t,2),n=(r[0],r[1]);return e.startsWith(n)}));if(n){var i=t[("@vocab"===n[0]?"":n[0]+":")+e.substr(n[1].length)];return this.getJsonLDPropertyValue(i)}}},t.prototype.getJsonLDPropertyValue=function(t){if(void 0!==t)return Array.isArray(t)&&1===t.length?t[0]:t},t.prototype.getDescribedBy=function(t){var e,r;if(null===(e=t.headers)||void 0===e?void 0:e.has("Link")){var n=null===(r=t.headers.get("Link"))||void 0===r?void 0:r.match(/<([^>]+)>; rel="describedBy"/i);if(n)return p.resolve(t.baseUrl||"",n[1])}},t}()),K=new(function(){function t(){}return t.prototype.slug=function(t){return t.replace(/[^\d\w]/g,"-").replace(/-+/g,"-").toLowerCase()},t.prototype.fixUrl=function(t){var e=t.indexOf("://")+3;return t.substr(0,e)+t.substr(e).replace(/\/\//g,"/")},t}()),q=new(function(){function t(){}return t.prototype.generate=function(t){return t?(t^16*Math.random()>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,this.generate)},t}()),H=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),W=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},z=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},$=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},Z=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Y(arguments[e]));return t},X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return H(e,t),e.prototype.resolve=function(){return W(this,void 0,void 0,(function(){var t,e,r,n,i,o,a,s,u,c=this;return z(this,(function(l){switch(l.label){case 0:this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds||(this.__modelsInSameDocument=[],this.__modelsInOtherDocumentIds=this.parent.getAttribute(this.foreignKeyName)),t={};try{for(e=$(this.__modelsInOtherDocumentIds),r=e.next();!r.done;r=e.next())n=r.value,(i=p.parentDirectory(n))in t||(t[i]=[]),t[i].push(n)}catch(t){s={error:t}}finally{try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(s)throw s.error}}return[4,Promise.all(Object.keys(t).map((function(e){return c.relatedClass.from(e).all({$in:t[e]})})))];case 1:return o=l.sent(),a=o.reduce((function(t,e){return t.push.apply(t,Z(e)),t}),[]),this.related=Z(this.__modelsInSameDocument,a),[2,this.related]}}))}))},e.prototype.__loadDocumentModels=function(t,e){return W(this,void 0,void 0,(function(){var r,n,o,a,s,u=this;return z(this,(function(c){switch(c.label){case 0:return r=new i.EngineHelper,n=this.parent.getAttribute(this.foreignKeyName),o=this.relatedClass.prepareEngineFilters(),a=e["@graph"].filter((function(t){return-1!==n.indexOf(t["@id"])})).reduce((function(t,e){return t[e["@id"]]={"@graph":[e]},t}),{}),s=this,[4,Promise.all(Object.entries(r.filterDocuments(a,o)).map((function(e){var r=Y(e,2),n=r[0],i=r[1];return u.relatedClass.createFromEngineDocument(t,i,n)})))];case 1:return s.__modelsInSameDocument=c.sent(),this.__modelsInOtherDocumentIds=n.filter((function(t){return!u.__modelsInSameDocument.some((function(e){return e.url===t}))})),this.__modelsInOtherDocumentIds.length>0||(this.related=this.__modelsInSameDocument.slice(0)),[2]}}))}))},e}(i.BelongsToManyRelation),Q=function(){return(Q=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},tt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},rt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},nt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(rt(arguments[e]));return t},it=new(function(){function t(){}return t.prototype.tap=function(t,e){return e?(e(t),t):this.proxyTap(t)},t.prototype.proxyTap=function(t){var e=new Proxy(t,{get:function(t,r,n){var i=Reflect.get(t,r,n);return"function"!=typeof i?i:function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return i.call.apply(i,nt([t],r)),e}}});return e},t}()),ot=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},at=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},st=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},ut=function(){function t(){}return t.prototype.deleteModels=function(t){return ot(this,void 0,void 0,(function(){var e,r=this;return at(this,(function(n){switch(n.label){case 0:return e=this.decantDocumentModelsByContainer(t),[4,Promise.all(Object.entries(e).map((function(t){var e=st(t,2),n=e[0],i=e[1];return r.deleteContainerDocumentsModels(n,i)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.decantDocumentModelsByContainer=function(t){var e=this.decantModelsByDocument(t);return Object.entries(e).reduce((function(t,e){var r=st(e,2),n=r[0],i=r[1],o=p.parentDirectory(n);return o in t||(t[o]=[]),t[o].push({documentUrl:n,models:i}),t}),{})},t.prototype.decantModelsByDocument=function(t){return t.reduce((function(t,e){var r=e.getDocumentUrl();return r in t||(t[r]=[]),t[r].push(e),t}),{})},t.prototype.deleteContainerDocumentsModels=function(t,e){return ot(this,void 0,void 0,(function(){var r,n=this;return at(this,(function(i){switch(i.label){case 0:return[4,o.a.requireEngine().readMany(t,{$in:e.map((function(t){return t.documentUrl}))})];case 1:return r=i.sent(),[4,Promise.all(e.map((function(e){var i=e.documentUrl,o=e.models;return n.deleteDocumentModels(r,t,i,o)})))];case 2:return i.sent(),[2]}}))}))},t.prototype.deleteDocumentModels=function(t,e,r,n){return ot(this,void 0,void 0,(function(){var i,a;return at(this,(function(s){switch(s.label){case 0:return i=o.a.requireEngine(),a=n.map((function(t){return t.url})),t[r]["@graph"].some((function(t){return!a.some((function(e){return e===t["@id"]}))}))?[3,2]:[4,i.delete(e,r)];case 1:return s.sent(),[2];case 2:return[4,i.update(e,r,{"@graph":{$updateItems:{$where:{"@id":{$in:a}},$unset:!0}}})];case 3:return s.sent(),[2]}}))}))},t}(),ct=function(){return(ct=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},lt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},ft=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ht=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},dt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ht(arguments[e]));return t},yt=function(){},vt=function(){function t(t,e){void 0===e&&(e=!0),this.declarations={},this.vocabs=Object.entries(t).map((function(t){var e=ht(t,2),r=e[0];return{name:r,iriPrefix:e[1],propertyPrefix:r+":",used:!1}})),this.compactIRIs=e,this.vocabs[0].name="@vocab",this.vocabs[0].propertyPrefix="",this.vocabs[0].used=!0}return t.prototype.compactIRI=function(t){var e,r;try{for(var n=dt(this.vocabs),i=n.next();!i.done;i=n.next()){var o=i.value;if(t.startsWith(o.iriPrefix))return o.used=!0,""+o.propertyPrefix+t.substr(o.iriPrefix.length)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t},t.prototype.addDeclaration=function(t,e){this.declarations[t]=e},t.prototype.toJsonLD=function(){var t=this.vocabs.filter((function(t){return t.used})).reduce((function(t,e){var r;return ct(ct({},t),((r={})[e.name]=e.iriPrefix,r))}),{});return ct(ct({},t),this.declarations)},t}(),bt=function(){function t(){}return t.prototype.serializeToJsonLD=function(t,e){var r,n;void 0===t&&(t=!0),e=e||new vt(this.modelClass.rdfContexts);var i={"@context":{},"@type":null};try{for(var o=dt(Object.entries(this.getAttributes())),a=o.next();!a.done;a=o.next()){var s=ht(a.value,2),u=s[0],c=s[1];this.setJsonLDField(i,u,c,e)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return t&&this.includeRelatedJsonLDInstances(i,e),this.setJsonLDTypes(i,e),this.setJsonLDContexts(i,e),i},t.prototype.convertJsonLDToAttributes=function(t){return lt(this,void 0,void 0,(function(){var e,r,n,i,o,a,s,u,c,l,f,h,d,p;return ft(this,(function(y){switch(y.label){case 0:return[4,J.parseJsonLD(t)];case 1:e=y.sent(),r=e.resource(t["@id"]),n=this.modelClass.fields,(i={})[this.modelClass.primaryKey]=t["@id"];try{for(o=dt(Object.entries(n)),a=o.next();!a.done;a=o.next())s=ht(a.value,2),u=s[0],c=s[1],u!==this.modelClass.primaryKey&&(l=ht(r.getPropertyValues(c.rdfProperty)),f=l[0],h=l.slice(1),void 0!==f&&(i[u]=h.length>0?pt([f],h):f))}catch(t){d={error:t}}finally{try{a&&!a.done&&(p=o.return)&&p.call(o)}finally{if(d)throw d.error}}return[2,i]}}))}))},t.prototype.convertEngineFiltersToJsonLD=function(t){var e={},r=new vt(this.modelClass.rdfContexts),n=pt(this.modelClass.rdfsClasses),i=n.map((function(t){return r.compactIRI(t)})),o=[];n.length>0&&(o.push({$contains:i}),o.push({$contains:n})),1===n.length&&(o.push({$eq:i[0]}),o.push({$eq:n[0]})),t.$in&&(e.$in=t.$in,delete t.$in);var a=this.convertAttributeValuesToJsonLD(t);return o.length>0&&(a["@type"]={$or:o}),Object.keys(a).length>0&&(e["@graph"]={$contains:a}),e},t.prototype.convertEngineUpdatesToJsonLD=function(t){return this.convertAttributeValuesToJsonLD(t)},t.prototype.setJsonLDField=function(t,e,r,n){if(e!==this.modelClass.primaryKey){var i=this.modelClass.fields[e],o=i?i.rdfProperty:this.getDefaultRdfContext()+e;this.setJsonLDProperty(t,n.compactIRIs?n.compactIRI(o):o,r,i)}else t["@id"]=r.toString()},t.prototype.includeRelatedJsonLDInstances=function(t,e){var r,n,o=this,a=this.modelClass.relations.map((function(t){return[t,o.getRelation(t)]})),s=function(r,n){if(!n.loaded||!(n instanceof i.HasManyRelation||n instanceof i.HasOneRelation))return"continue";var o=G(n.foreignKeyName,n.relatedClass.rdfContexts),a=function(t){var r=t.serializeToJsonLD(!1,e);return delete r["@context"],delete r[o],r};t[r]=n instanceof i.HasManyRelation?n.related.map((function(t){return a(t)})):a(n.related),e.addDeclaration(r,{"@reverse":o})};try{for(var u=dt(a),c=u.next();!c.done;c=u.next()){var l=ht(c.value,2);s(l[0],l[1])}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}},t.prototype.setJsonLDTypes=function(t,e){var r=pt(this.modelClass.rdfsClasses).map((function(t){return e.compactIRI(t)}));1===r.length?t["@type"]=r[0]:r.length>0&&(t["@type"]=r)},t.prototype.setJsonLDContexts=function(t,e){t["@context"]=e.toJsonLD()},t.prototype.setJsonLDProperty=function(t,e,r,n){return void 0===n&&(n=null),("object"!=s(r)||1!==Object.keys(r).length||Object.keys(r)[0].startsWith("$"))&&(r=this.castJsonLDValue(r,n)),!(r instanceof yt)&&(t[e]=r,!0)},t.prototype.castJsonLDValue=function(t,e){var r=this;switch(void 0===e&&(e=null),e&&e.type||null){case i.FieldType.Key:return{"@id":t.toString()};case i.FieldType.Date:return{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":new Date(t).toISOString()};case i.FieldType.Array:switch(t.length){case 0:return new yt;case 1:return this.castJsonLDValue(t[0],e.items);default:return t.map((function(t){return r.castJsonLDValue(t,e.items)}))}default:return JSON.parse(JSON.stringify(t))}},t.prototype.convertAttributeValuesToJsonLD=function(t){var e,r,n=new vt(this.modelClass.rdfContexts,!1),i={};try{for(var o=dt(Object.entries(t)),a=o.next();!a.done;a=o.next()){var s=ht(a.value,2),u=s[0],c=s[1];this.setJsonLDField(i,u,c,n)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return i},t}(),gt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),wt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},mt=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},_t=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xt(arguments[e]));return t},Et=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__newModels=[],e.useSameDocument=!1,e}return gt(e,t),e.prototype.resolve=function(){return wt(this,void 0,void 0,(function(){var t;return mt(this,(function(e){switch(e.label){case 0:return this.__modelsInSameDocument&&this.__modelsInOtherDocumentIds?[4,this.relatedClass.all({$in:this.__modelsInOtherDocumentIds})]:[2,[]];case 1:return t=e.sent(),this.related=_t(this.__modelsInSameDocument,t),[2,this.related]}}))}))},e.prototype.create=function(t){return void 0===t&&(t={}),wt(this,void 0,void 0,(function(){var e;return mt(this,(function(r){switch(r.label){case 0:return this.assertLoaded("create"),e=this.relatedClass.newInstance(t),[4,this.save(e)];case 1:return r.sent(),[2,e]}}))}))},e.prototype.save=function(t){return wt(this,void 0,void 0,(function(){return mt(this,(function(e){switch(e.label){case 0:return this.assertLoaded("save"),this.add(t),this.useSameDocument?[3,2]:[4,t.save()];case 1:return e.sent(),[3,4];case 2:return this.parent.exists()?[4,this.parent.save()]:[3,4];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},e.prototype.add=function(t){this.assertLoaded("add"),this.related.includes(t)||this.__newModels.includes(t)||(this.parent.exists()&&this.initializeInverseRelations(t),t.exists()||this.__newModels.push(t),this.related.push(t))},e.prototype.usingSameDocument=function(t){return void 0===t&&(t=!0),this.useSameDocument=t,this},e.prototype.__loadDocumentModels=function(t,e){var r;return wt(this,void 0,void 0,(function(){var n,o,a,u,c,l=this;return mt(this,(function(f){switch(f.label){case 0:return n=new i.EngineHelper,o=null===(r=this.relatedClass.fields[this.foreignKeyName])||void 0===r?void 0:r.rdfProperty,a=this.relatedClass.prepareEngineFilters(),u=e["@graph"].filter((function(t){var e=J.getJsonLDProperty(t,o);return"object"==s(e)&&"@id"in e&&e["@id"]===l.parent.url})).reduce((function(t,e){return t[e["@id"]]={"@graph":[e]},t}),{}),c=this,[4,Promise.all(Object.entries(n.filterDocuments(u,a)).map((function(e){var r=xt(e,2),n=r[0],i=r[1];return l.relatedClass.createFromEngineDocument(t,i,n)})))];case 1:return c.__modelsInSameDocument=f.sent(),this.__modelsInOtherDocumentIds=Object.keys(u).filter((function(t){return!l.__modelsInSameDocument.some((function(e){return e.url===t}))})),this.__modelsInOtherDocumentIds.length>0||(this.related=this.__modelsInSameDocument.slice(0)),[2]}}))}))},e.prototype.initializeInverseRelations=function(t){var e,r,n=this.parent.constructor;try{for(var o=Et(this.relatedClass.relations),a=o.next();!a.done;a=o.next()){var s=a.value,u=t.getRelation(s);u.relatedClass===n&&(u instanceof i.BelongsToManyRelation?(t.setAttribute(u.foreignKeyName,[this.parent.url]),u.related=[this.parent]):u instanceof i.BelongsToOneRelation&&(t.setAttribute(u.foreignKeyName,this.parent.url),u.related=this.parent))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},e.prototype.assertLoaded=function(t){if(!this.loaded){if(this.parent.exists())throw new i.SoukaiError('The "'+t+'" method cannot be called before loading the relationship');this.related=[]}},e}(i.HasManyRelation),St=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ot=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Ct=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Rt=function(t){function e(e,r){return t.call(this,e,r,"url")||this}return St(e,t),e.prototype.resolve=function(){return Ot(this,void 0,void 0,(function(){var t,e,r;return Ct(this,(function(n){switch(n.label){case 0:return t=this.relatedClass.collection,e=p.parentDirectory(this.parent.url),r=this,[4,this.relatedClass.from(p.parentDirectory(e)).find(e)];case 1:return r.related=n.sent(),this.relatedClass.collection=t,[2,this.related]}}))}))},e}(i.SingleModelRelation),It=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dt=function(){return(Dt=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},Tt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},At=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},Nt=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Pt(arguments[e]));return t},jt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sourceDocumentUrl=null,e}return It(e,t),e.from=function(t){return this.collection=t,this},e.at=function(t){return this.from(t)},e.boot=function(e){var r=this;t.boot.call(this,e),this.rdfContexts=Dt(Dt({},this.rdfContexts),{solid:"http://www.w3.org/ns/solid/terms#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",ldp:"http://www.w3.org/ns/ldp#",purl:"http://purl.org/dc/terms/"});var n=this.instance.getDefaultRdfContext();for(var i in this.instance.hasAutomaticTimestamp("createdAt")&&void 0===this.fields.createdAt.rdfProperty&&(this.fields.createdAt.rdfProperty=G("purl:created")),this.instance.hasAutomaticTimestamp("updatedAt")&&void 0===this.fields.updatedAt.rdfProperty&&(this.fields.updatedAt.rdfProperty=G("purl:modified")),this.rdfsClasses=new Set(Nt(this.rdfsClasses).map((function(t){return-1===t.indexOf(":")?n+t:G(t,r.rdfContexts)}))),this.fields)this.fields[i].rdfProperty=G(this.fields[i].rdfProperty||""+n+i,this.rdfContexts);this.fields[this.primaryKey].rdfProperty=null},e.createFromEngineDocument=function(t,e,r){return this.instance.createFromEngineDocument(t,e,r)},e.find=function(t){return Tt(this,void 0,void 0,(function(){var e,r,n,i;return At(this,(function(a){switch(a.label){case 0:e=this.instance.serializeKey(t),r=p.route(e),n=p.parentDirectory(r),this.ensureBooted(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.a.requireEngine().readOne(n,r)];case 2:return i=a.sent(),[2,this.instance.createFromEngineDocument(r,i,e)];case 3:return a.sent(),[2,null];case 4:return[2]}}))}))},e.all=function(e){var r=this;return void 0===e&&(e={}),e=this.prepareEngineFilters(e),this.withCollection((function(){return t.all.call(r,e)}))},e.prepareEngineFilters=function(t){return void 0===t&&(t={}),this.instance.convertEngineFiltersToJsonLD(t)},e.newInstance=function(t,e){return void 0===e&&(e=!1),new this(t,e)},e.newFromJsonLD=function(t,e){return Tt(this,void 0,void 0,(function(){var r,n,i,o,a,s,u,c,l,f;return At(this,(function(h){switch(h.label){case 0:return[4,J.flattenJsonLD(t)];case 1:return r=h.sent(),n=e||p.route(t["@id"]),[4,this.instance.parseEngineDocumentAttributes(n,r,t["@id"])];case 2:return i=h.sent(),[4,(o=new this(i)).loadDocumentModels(n,r)];case 3:h.sent(),o.resetEngineData(),a=function(t){var e=o._relations[t],r=e.getLoadedModels();r.forEach((function(t){return t.resetEngineData()})),e instanceof kt&&(r.forEach((function(t){delete t[e.foreignKeyName],e.__newModels.push(t)})),e.__modelsInSameDocument=[])};try{for(s=jt(this.relations),u=s.next();!u.done;u=s.next())c=u.value,a(c)}catch(t){l={error:t}}finally{try{u&&!u.done&&(f=s.return)&&f.call(s)}finally{if(l)throw l.error}}return[2,o]}}))}))},e.withCollection=function(t,e){return void 0===t&&(t=""),Tt(this,void 0,void 0,(function(){var r,n;return At(this,(function(o){switch(o.label){case 0:if(r=this.collection,"string"!=typeof t&&(e=t,t=""),!e)throw new i.SoukaiError("Invalid method given to withCollection (SolidModel internals)");return this.collection=t||r,[4,e()];case 1:return n=o.sent(),this.collection=r,[2,n]}}))}))},e.prototype.save=function(e){var r=this;return this.modelClass.withCollection(e||this.guessCollection(),(function(){return Tt(r,void 0,void 0,(function(){var e;return At(this,(function(r){switch(r.label){case 0:!this.url&&this.modelClass.mintsUrls&&this.mintUrl(),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,t.prototype.save.call(this)];case 2:return r.sent(),[3,5];case 3:if(!((e=r.sent())instanceof i.DocumentAlreadyExists))throw e;return this.url=this.newUniqueUrl(this.url),[4,t.prototype.save.call(this)];case 4:return r.sent(),[3,5];case 5:return[2,this]}}))}))}))},e.prototype.delete=function(){var e=this;return this.modelClass.withCollection(this.guessCollection()||"",(function(){return t.prototype.delete.call(e)}))},e.prototype.mintUrl=function(t,e,r){this.setAttribute(this.modelClass.primaryKey,this.newUrl(t,r)),t&&(this._documentExists=null==e||e)},e.prototype.toJsonLD=function(){return this.serializeToJsonLD()},e.prototype.getIdAttribute=function(){return this.getAttribute("url")},e.prototype.setExists=function(e){this._documentExists=e&&this._documentExists,t.prototype.setExists.call(this,e)},e.prototype.documentExists=function(){return this._documentExists},e.prototype.setDocumentExists=function(t){this._documentExists=t},e.prototype.isDirty=function(e){return e?t.prototype.isDirty.call(this,e):!!t.prototype.isDirty.call(this)||this.getDirtyDocumentModels().length>0},e.prototype.getDocumentUrl=function(){return this.url?p.route(this.url):null},e.prototype.getSourceDocumentUrl=function(){return this._sourceDocumentUrl},e.prototype.getContainerUrl=function(){var t=this.getDocumentUrl();return t?p.parentDirectory(t):null},e.prototype.getSourceContainerUrl=function(){var t=this.getSourceDocumentUrl();return t?p.parentDirectory(t):null},e.prototype.initialize=function(e,r){t.prototype.initialize.call(this,e,r),this._documentExists=r},e.prototype.createFromEngineDocument=function(t,e,r){return Tt(this,void 0,void 0,(function(){var n,i=this;return At(this,(function(o){switch(o.label){case 0:return[4,function(){return Tt(i,void 0,void 0,(function(){var n;return At(this,(function(i){switch(i.label){case 0:return[4,this.parseEngineDocumentAttributes(t,e,r)];case 1:return(n=i.sent())[this.modelClass.primaryKey]=r||t,[2,new this.modelClass(n,!0)]}}))}))}()];case 1:return[4,(n=o.sent()).loadDocumentModels(t,e)];case 2:return o.sent(),[2,it.tap(n,(function(e){return e._sourceDocumentUrl=t}))]}}))}))},e.prototype.createManyFromEngineDocuments=function(t){return Tt(this,void 0,void 0,(function(){var e,r,n,i=this;return At(this,(function(o){switch(o.label){case 0:return e=Nt(this.modelClass.rdfsClasses),r=function(t){return!e.some((function(e){return!t.isType(e)}))},[4,Promise.all(Object.entries(t).map((function(t){var e=Pt(t,2),n=e[0],o=e[1];return Tt(i,void 0,void 0,(function(){var t,e=this;return At(this,(function(i){switch(i.label){case 0:return[4,J.parseJsonLD(o)];case 1:return t=i.sent(),[2,Promise.all(t.resources.filter(r).map((function(t){return Tt(e,void 0,void 0,(function(){return At(this,(function(e){return[2,this.createFromEngineDocument(n,o,t.url)]}))}))})))]}}))}))})))];case 1:return n=o.sent(),[2,C.flatten(n)]}}))}))},e.prototype.loadDocumentModels=function(t,e){return Tt(this,void 0,void 0,(function(){var r;return At(this,(function(n){switch(n.label){case 0:return r=Object.values(this._relations).filter((function(t){return t instanceof kt||t instanceof X})),[4,Promise.all(r.map((function(r){return r.__loadDocumentModels(t,e)})))];case 1:return n.sent(),[2]}}))}))},e.prototype.syncDirty=function(){return Tt(this,void 0,void 0,(function(){var t,e,r,n,i,a,s=this;return At(this,(function(u){switch(u.label){case 0:return t=o.a.requireEngine(),e=this.getSerializedPrimaryKey(),r=this.getDocumentUrl(),n=function(){return t.create(s.modelClass.collection,s.toEngineDocument(),r||void 0)},i=function(){return t.update(s.modelClass.collection,r,{"@graph":{$push:s.serializeToJsonLD(!1)}})},a=function(){return t.update(s.modelClass.collection,r,s.getDirtyEngineDocumentUpdates())},[4,function(){return s._documentExists?s._exists?a():i():n()}()];case 1:return u.sent(),[2,e]}}))}))},e.prototype.cleanDirty=function(){var e,r,n;t.prototype.cleanDirty.call(this),this.getDirtyDocumentModels().map((function(t){return t.cleanDirty()})),this._documentExists=!0;var i=Object.values(this._relations).filter((function(t){return t instanceof kt&&t.useSameDocument}));try{for(var o=jt(i),a=o.next();!a.done;a=o.next()){var s=a.value;s.__modelsInSameDocument=s.__modelsInSameDocument||[],(n=s.__modelsInSameDocument).push.apply(n,Nt(s.__newModels)),s.__newModels=[]}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}},e.prototype.deleteModelsFromEngine=function(t){return Tt(this,void 0,void 0,(function(){return At(this,(function(e){switch(e.label){case 0:return[4,this.deleteModels(t)];case 1:return e.sent(),[2]}}))}))},e.prototype.hasMany=function(t,e,r){return new kt(this,t,e,r)},e.prototype.belongsToMany=function(t,e,r){return new X(this,t,e,r)},e.prototype.isContainedBy=function(t){return new Rt(this,t)},e.prototype.getDefaultRdfContext=function(){return Object.values(this.modelClass.rdfContexts).shift()||""},e.prototype.toEngineDocument=function(){return{"@graph":Nt([this.serializeToJsonLD(!1)],this.prepareDirtyDocumentModels().map((function(t){return t.serializeToJsonLD(!1)})))}},e.prototype.getDirtyEngineDocumentUpdates=function(){var e=[];if(e.push.apply(e,Nt(this.prepareDirtyDocumentModels().map((function(t){return{$push:t.serializeToJsonLD(!1)}})))),t.prototype.isDirty.call(this)){var r=t.prototype.getDirtyEngineDocumentUpdates.call(this);e.push({$updateItems:{$where:{"@id":this.url},$update:this.convertEngineUpdatesToJsonLD(r)}})}return 1===e.length?{"@graph":e[0]}:{"@graph":{$apply:e}}},e.prototype.parseEngineDocumentAttributes=function(t,e,r){return void 0===r&&(r=null),Tt(this,void 0,void 0,(function(){var n;return At(this,(function(i){return r=r||t,n=e["@graph"].find((function(t){return t["@id"]===r})),[2,this.convertJsonLDToAttributes(n)]}))}))},e.prototype.castAttribute=function(e,r){return r&&r.type===i.FieldType.Array&&!Array.isArray(e)?[e]:t.prototype.castAttribute.call(this,e,r)},e.prototype.newUrl=function(t,e){return(t=null!=t?t:p.resolve(this.modelClass.collection,q.generate()))+"#"+(null!=e?e:this.modelClass.defaultResourceHash)},e.prototype.newUniqueUrl=function(t){return(t=null!=t?t:this.newUrl())+"-"+q.generate()},e.prototype.guessCollection=function(){if(this.url)return p.parentDirectory(this.url)},e.prototype.getDirtyDocumentModels=function(){var t=this,e=this.getDocumentUrl();return C.flatten(Object.values(this._relations).filter((function(t){return t.loaded&&t instanceof kt&&t.useSameDocument})).map((function(r){var n,i,o=Nt(r.__newModels),a=function(t){if(!t.isDirty()||t.getDocumentUrl()!==e||o.some((function(e){return e===t})))return"continue";o.push(t)};try{for(var s=jt(r.getLoadedModels()),u=s.next();!u.done;u=s.next())a(u.value)}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o.forEach((function(e){return e.setAttribute(r.foreignKeyName,t.url)})),o})))},e.prototype.prepareDirtyDocumentModels=function(){var t=this,e=this.getDirtyDocumentModels();if(0===e.length)return[];this.url||this.mintUrl();var r=this.getDocumentUrl();return e.forEach((function(e){return!e.url&&e.mintUrl(r,t._documentExists,q.generate())})),e},e.primaryKey="url",e.rdfContexts={},e.rdfsClasses=[],e.defaultResourceHash="it",e.mintsUrls=!0,e}(i.Model);!function(t,e){var r,n,i=e.reduce((function(t,e){return Q(Q({},t),Object.getOwnPropertyDescriptors(e.prototype))}),{});try{for(var o=tt(Object.entries(i)),a=o.next();!a.done;a=o.next()){var s=et(a.value,2),u=s[0],c=s[1];Object.defineProperty(t.prototype,u,c)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}(Lt,[ut,bt]);var Mt,Ut=Lt,Vt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vt(e,t),e.timestamps=["updatedAt"],e}(Ut),Ft=function(t,e){this.resourceUrl=t,this.newResourceUrl=e,this.type=2},Gt=function(t,e,r){this.resourceUrl=t,this.property=e,this.value=r,this.type=1},Jt=function(t){this.property=t,this.type=0},Kt=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){t.RDF="RDF"}(Mt||(Mt={}));var qt=function(t){function e(e,r,n){var i=t.call(this,"Malformed "+r+" document found at "+e+" - "+n)||this;return i.documentUrl=e,i.documentFormat=r,i.malformationDetails=n,i}return Kt(e,t),e}(i.SoukaiError),Ht=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wt=function(t){function e(e,r){var n=t.call(this,e+" ("+r.message+")")||this;return n.original=r,n}return Ht(e,t),e}(i.SoukaiError),zt=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$t=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},Yt=new(function(){function t(){}return t.prototype.createMap=function(t,e){var r,n,i={};try{for(var o=zt(t),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[e]]=s}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i},t.prototype.deepEquals=function(t,e){if(t===e)return!0;var r=s(t);if(r!==s(e))return!1;if("object"!==r||null===t||null===e)return!1;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!this.deepEquals(t[n],e[n]))return!1;return!0},t.prototype.withoutEmpty=function(t){var e,r,n={};try{for(var i=zt(Object.entries(t)),o=i.next();!o.done;o=i.next()){var a=$t(o.value,2),s=a[0],u=a[1];null!=u&&(n[s]=u)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n},t}()),Zt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Xt=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Qt=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},te=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qt(arguments[e]));return t},ee=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},re=[G("ldp:contains"),G("posix:mtime"),G("posix:size"),G("purl:modified")],ne=[G("ldp:Container"),G("ldp:BasicContainer")],ie=function(){function t(t){var e=this;this.fetch=function(r,n){return Zt(e,void 0,void 0,(function(){var e,i;return Xt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(r,n)];case 1:return[2,o.sent()];case 2:throw e=o.sent(),i="object"==s(r)?r.url:r,new Wt("Error fetching "+i,e);case 3:return[2]}}))}))}}return t.prototype.createDocument=function(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=[]),Zt(this,void 0,void 0,(function(){var n;return Xt(this,(function(i){return n=G("ldp:Container"),[2,r.some((function(t){return t.resourceUrl===e&&0===t.type&&t.value===n}))?this.createContainerDocument(t,e,r):this.createNonContainerDocument(t,e,r)]}))}))},t.prototype.getDocument=function(t){return Zt(this,void 0,void 0,(function(){var e,r,n;return Xt(this,(function(i){switch(i.label){case 0:return[4,this.fetch(t,{headers:{Accept:"text/turtle"}})];case 1:return 200!==(e=i.sent()).status?[2,null]:[4,e.text()];case 2:r=i.sent(),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,J.parseTurtle(r,{headers:e.headers,baseUrl:t})];case 4:return[2,i.sent()];case 5:throw n=i.sent(),new qt(t,Mt.RDF,n.message);case 6:return[2]}}))}))},t.prototype.getDocuments=function(t,e){return void 0===e&&(e=!1),Zt(this,void 0,void 0,(function(){var r,n;return Xt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),e?[4,this.getContainerDocuments(t)]:[3,2];case 1:return r=i.sent(),[3,4];case 2:return[4,this.getNonContainerDocumentsUsingGlobbing(t)];case 3:r=i.sent(),i.label=4;case 4:return[2,r];case 5:if((n=i.sent())instanceof F)throw new qt(t,Mt.RDF,n.message);return a.error(n),[2,[]];case 6:return[2]}}))}))},t.prototype.updateDocument=function(t,e){var r;return Zt(this,void 0,void 0,(function(){var n;return Xt(this,(function(o){switch(o.label){case 0:return 0===e.length?[2]:[4,this.getDocument(t)];case 1:if(null===(n=o.sent()))throw new i.DocumentNotFound(t);return this.processChangeUrlOperations(n,e),this.processUpdatePropertyOperations(n,e),(null===(r=n.resource(t))||void 0===r?void 0:r.isType(G("ldp:Container")))?[4,this.updateContainerDocument(n,e)]:[3,3];case 2:return o.sent(),[3,5];case 3:return[4,this.updateNonContainerDocument(n,e)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))},t.prototype.deleteDocument=function(t){var e;return Zt(this,void 0,void 0,(function(){var r,n,i,o=this;return Xt(this,(function(a){switch(a.label){case 0:return[4,this.getDocument(t)];case 1:return null===(r=a.sent())?[2]:(null===(e=r.resource(t))||void 0===e?void 0:e.isType(G("ldp:Container")))?[4,Promise.all([this.getDocuments(t,!0),this.getDocuments(t)])]:[3,4];case 2:return n=a.sent(),[4,Promise.all(C.flatten(n).map((function(t){return o.deleteDocument(t.url)})))];case 3:a.sent(),a.label=4;case 4:return[4,this.fetch(t,{method:"DELETE"})];case 5:return i=a.sent(),this.assertSuccessfulResponse(i,"Error deleting document at "+t),[2]}}))}))},t.prototype.documentExists=function(t){return Zt(this,void 0,void 0,(function(){var e;return Xt(this,(function(r){switch(r.label){case 0:return[4,this.fetch(t,{headers:{Accept:"text/turtle"}})];case 1:return 200!==(e=r.sent()).status?[3,3]:[4,e.text()];case 2:return[2,r.sent().length>0];case 3:if(404===e.status)return[2,!1];throw new i.SoukaiError("Couldn't determine if document at "+t+" exists, got "+e.status+" response");case 4:return[2]}}))}))},t.prototype.createContainerDocument=function(t,e,r){return Zt(this,void 0,void 0,(function(){var n,o;return Xt(this,(function(a){switch(a.label){case 0:if(e&&!e.startsWith(t))throw new i.SoukaiError("Explicit document url should start with the parent url");if(e&&!e.endsWith("/"))throw new i.SoukaiError("Container urls must end with a trailing slash, given "+e);return n=e?"at "+e:"under "+t,[4,this.fetch(t,{method:"POST",headers:Yt.withoutEmpty({"Content-Type":"text/turtle",Link:'<http://www.w3.org/ns/ldp#BasicContainer>; rel="type"',Slug:e?p.directoryName(e):null}),body:x.toTurtle(this.withoutReservedContainerProperties(e,r),e)})];case 1:return o=a.sent(),this.assertSuccessfulResponse(o,"Error creating container "+n),[2,e||p.resolve(t,o.headers.get("Location")||"")]}}))}))},t.prototype.createNonContainerDocument=function(t,e,r){return Zt(this,void 0,void 0,(function(){var n,o;return Xt(this,(function(a){switch(a.label){case 0:return e?[3,2]:[4,this.fetch(t,{headers:{"Content-Type":"text/turtle"},method:"POST",body:x.toTurtle(r,e)})];case 1:return n=a.sent(),this.assertSuccessfulResponse(n,"Error creating document under "+t),[2,p.resolve(t,n.headers.get("Location")||"")];case 2:if(!e.startsWith(t))throw new i.SoukaiError("A minted document url should start with the parent url");return[4,this.fetch(e,{method:"PATCH",headers:{"Content-Type":"application/sparql-update","If-None-Match":"*"},body:"INSERT DATA { "+x.toTurtle(r,e)+" }"})];case 3:return o=a.sent(),this.assertSuccessfulResponse(o,"Error creating document at "+e),[2,e]}}))}))},t.prototype.getContainerDocuments=function(t){var e;return Zt(this,void 0,void 0,(function(){var r,n,i,o=this;return Xt(this,(function(a){switch(a.label){case 0:return[4,this.fetch(t,{headers:{Accept:"text/turtle"}})];case 1:return r=a.sent(),this.assertSuccessfulResponse(r,"Error getting container documents from "+t),[4,r.text()];case 2:return n=a.sent(),[4,J.parseTurtle(n,{baseUrl:t})];case 3:return i=a.sent(),[4,Promise.all((null===(e=i.resource(t))||void 0===e?void 0:e.getPropertyValues("ldp:contains").map((function(t){return i.resource(t)})).filter((function(t){return null!==t&&t.isType("ldp:Container")})).map((function(t){return o.getDocument(t.url)})))||[])];case 4:return[2,a.sent()]}}))}))},t.prototype.getNonContainerDocumentsUsingGlobbing=function(t){return Zt(this,void 0,void 0,(function(){var e,r,n,i;return Xt(this,(function(o){switch(o.label){case 0:return[4,this.fetch(t+"*",{headers:{Accept:"text/turtle"}})];case 1:return e=o.sent(),this.assertSuccessfulResponse(e,"Error getting container documents using globbing from "+t),[4,e.text()];case 2:return r=o.sent(),[4,J.parseTurtle(r,{baseUrl:t})];case 3:return n=o.sent(),i=n.statements.reduce((function(t,e){var r=p.clean(e.subject.value,{fragment:!1});return r in t||(t[r]=[]),t[r].push(e),t}),{}),[2,Object.entries(i).map((function(t){var e=Qt(t,2),r=e[0],n=e[1];return new A(r,n)}))]}}))}))},t.prototype.updateContainerDocument=function(t,e){return Zt(this,void 0,void 0,(function(){var r,n;return Xt(this,(function(i){switch(i.label){case 0:return r=function(e){return new Gt(t.url,e)},n=function(e){return new Gt(t.url,G("rdf:type"),e)},e.push.apply(e,te(re.map(r))),e.push.apply(e,te(ne.map(n))),[4,this.updateNonContainerDocument(t.clone(t.metadata.describedBy||t.url+".meta"),e)];case 1:return i.sent(),[2]}}))}))},t.prototype.updateNonContainerDocument=function(t,e){return Zt(this,void 0,void 0,(function(){var r,n,i,o,a,s;return Xt(this,(function(u){switch(u.label){case 0:return r=Qt(function(t){return t.reduce((function(t,e){switch(e.type){case 0:t[0].push(e.property);break;case 1:t[1].push(C.filter([e.resourceUrl,e.property,e.value]))}return t}),[[],[]])}(e),2),n=r[0],i=r[1],o=x.toTurtle(n,t.url),a=x.toTurtle(t.properties.filter((function(t){return i.some((function(e){var r=Qt(e,3),n=r[0],i=r[1],o=r[2];return!(n!==t.resourceUrl||i&&i!==t.name||o&&o!==t.value)}))})),t.url),[4,this.fetch(t.url,{method:"PATCH",headers:{"Content-Type":"application/sparql-update"},body:C.filter([a.length>0&&"DELETE DATA { "+a+" }",o.length>0&&"INSERT DATA { "+o+" }"]).join(" ; ")})];case 1:return s=u.sent(),this.assertSuccessfulResponse(s,"Error updating document at "+t.url),[2]}}))}))},t.prototype.withoutReservedContainerProperties=function(t,e){return e.filter((function(e){return e.resourceUrl!==t||!function(t){return C.contains(re,t.name)}(e)&&!function(t){return 0===t.type&&C.contains(ne,t.value)}(e)}))},t.prototype.processChangeUrlOperations=function(t,e){var r,n,i=function(t){var e;return t.reduce((function(t,e){return t[e.type].push(e),t}),((e={})[0]=[],e[1]=[],e[2]=[],e))}(e),o=function(r){var n=t.resource(r.resourceUrl);if(!n)return"continue";var o=i[0].filter((function(t){return t.property.resourceUrl===r.resourceUrl})),a=i[1].filter((function(t){return t.resourceUrl===r.resourceUrl}));o.forEach((function(t){return t.property=t.property.clone(r.newResourceUrl)})),a.forEach((function(t){return t.resourceUrl=r.newResourceUrl})),e.push(new Gt(r.resourceUrl)),e.push.apply(e,te(n.properties.filter((function(t){return!o.some((function(e){return e.property.name===t.name}))&&!a.some((function(e){return!e.property||e.property===t.name}))})).map((function(t){return new Jt(t.clone(r.newResourceUrl))})))),C.removeItem(e,r)};try{for(var a=ee(i[2]),s=a.next();!s.done;s=a.next())o(s.value)}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.processUpdatePropertyOperations=function(t,e){var r,n,i=e.filter((function(e){return 0===e.type&&0!==e.property.type&&t.hasProperty(e.property.resourceUrl,e.property.name)}));try{for(var o=ee(i),a=o.next();!a.done;a=o.next()){var s=a.value.property;e.push(new Gt(s.resourceUrl,s.name))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.assertSuccessfulResponse=function(t,e){if(2!==Math.floor(t.status/100))throw new i.SoukaiError(e+", returned "+t.status+" status code")},t}(),oe=function(){return(oe=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},ae=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},se=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ue=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},ce=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ue(arguments[e]));return t},le=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fe=function(){function t(t,e){void 0===e&&(e={}),this.listeners=[],this.helper=new i.EngineHelper,this.client=new ie(t),this.config=oe({globbingBatchSize:5},e)}return t.prototype.create=function(t,e,r){return ae(this,void 0,void 0,(function(){var n,o;return se(this,(function(a){switch(a.label){case 0:return this.validateJsonLDGraph(e),(n=r)?[4,this.client.documentExists(r)]:[3,2];case 1:n=a.sent(),a.label=2;case 2:if(n)throw new i.DocumentAlreadyExists(r);return[4,this.getJsonLDGraphProperties(e)];case 3:return o=a.sent(),[4,this.client.createDocument(t,r,o)];case 4:return[2,a.sent()]}}))}))},t.prototype.readOne=function(t,e){return ae(this,void 0,void 0,(function(){var t,r;return se(this,(function(n){switch(n.label){case 0:return[4,this.client.getDocument(e)];case 1:if(null===(t=n.sent()))throw new i.DocumentNotFound(e);return r=this.convertToEngineDocument(t),this.emit("onRDFDocumentLoaded",t.url,t.metadata),[2,r]}}))}))},t.prototype.readMany=function(t,e){return void 0===e&&(e={}),ae(this,void 0,void 0,(function(){var r,n,i=this;return se(this,(function(o){switch(o.label){case 0:return[4,this.getDocumentsForFilters(t,e)];case 1:return r=o.sent(),n=r.reduce((function(t,e){return t[e.url]=i.convertToEngineDocument(e),i.emit("onRDFDocumentLoaded",e.url,e.metadata),t}),{}),[2,this.helper.filterDocuments(n,e)]}}))}))},t.prototype.update=function(t,e,r){return ae(this,void 0,void 0,(function(){var t;return se(this,(function(n){switch(n.label){case 0:return[4,this.extractJsonLDGraphUpdate(r)];case 1:return t=n.sent(),[4,this.client.updateDocument(e,t)];case 2:return n.sent(),[2]}}))}))},t.prototype.delete=function(t,e){return ae(this,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return[4,this.client.deleteDocument(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)},t.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.listeners.forEach((function(r){var n;return null===(n=r[t])||void 0===n?void 0:n.call.apply(n,ce([r],e))}))},t.prototype.getDocumentsForFilters=function(t,e){return ae(this,void 0,void 0,(function(){var r,n;return se(this,(function(i){switch(i.label){case 0:return r=this.extractJsonLDGraphTypes(e),e.$in?[4,this.getDocumentsFromUrls(e.$in,r)]:[3,2];case 1:return n=i.sent(),[3,4];case 2:return[4,this.getContainerDocuments(t,r)];case 3:n=i.sent(),i.label=4;case 4:return[2,n]}}))}))},t.prototype.getDocumentsFromUrls=function(t,e){return ae(this,void 0,void 0,(function(){var r,n,i,o=this;return se(this,(function(a){switch(a.label){case 0:return r=t.reduce((function(t,e){var r,n=p.parentDirectory(e);return oe(oe({},t),((r={})[n]=ce(t[n]||[],[e]),r))}),{}),n=Object.entries(r).map((function(t){var r=ue(t,2),n=r[0],i=r[1];return ae(o,void 0,void 0,(function(){var t,r=this;return se(this,(function(o){switch(o.label){case 0:return null!==this.config.globbingBatchSize&&i.length>=this.config.globbingBatchSize?[2,this.getContainerDocuments(n,e)]:(t=i.map((function(t){return r.client.getDocument(t)})),[4,Promise.all(t)]);case 1:return[2,o.sent().filter((function(t){return null!=t}))]}}))}))})),[4,Promise.all(n)];case 1:return i=a.sent(),[2,C.flatten(i)]}}))}))},t.prototype.getContainerDocuments=function(t,e){return ae(this,void 0,void 0,(function(){return se(this,(function(r){switch(r.label){case 0:return[4,this.client.getDocuments(t,-1!==e.indexOf(G("ldp:Container")))];case 1:return[2,r.sent()]}}))}))},t.prototype.convertToEngineDocument=function(t){return{"@graph":t.resources.map((function(t){var e,r,n={},i=function(t,e){var r=ue(e),i=r[0],o=r.slice(1),a=t,s=function(t){return t};switch(i.type){case 0:a="@type";break;case 1:s=function(t){return{"@id":t}};break;case 2:s=function(t){return t instanceof Date?{"@type":"http://www.w3.org/2001/XMLSchema#dateTime","@value":t.toISOString()}:t}}n[a]=0===o.length?s(i.value):ce([i],o).map((function(t){return s(t.value)}))};try{for(var o=le(Object.entries(t.propertiesIndex)),a=o.next();!a.done;a=o.next()){var s=ue(a.value,2);i(s[0],s[1])}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n["@id"]=t.url,n}))}},t.prototype.validateJsonLDGraph=function(t){if(!Array.isArray(t["@graph"]))throw new i.SoukaiError("Invalid JSON-LD graph provided for SolidEngine. Are you using a model that isn't a SolidModel?")},t.prototype.extractJsonLDGraphUpdate=function(t){return ae(this,void 0,void 0,(function(){var e,r,n=this;return se(this,(function(o){switch(o.label){case 0:if(!this.isJsonLDGraphUpdate(t))throw new i.SoukaiError("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");return e=[],t["@graph"].$updateItems&&e.push.apply(e,ce(C.flatten(C.create(t["@graph"].$updateItems).map((function(t){return n.extractJsonLDGraphItemsUpdate(t)}))))),t["@graph"].$push?[4,this.extractJsonLDGraphItemPush(t["@graph"].$push)]:[3,2];case 1:r=o.sent(),e.push.apply(e,ce(r)),o.label=2;case 2:return[2,e]}}))}))},t.prototype.extractJsonLDGraphItemsUpdate=function(t){var e,r,n=t.$where,o=t.$update,a=t.$unset;if(!n||!("@id"in n))throw new i.SoukaiError("Invalid JSON-LD graph updates provided for SolidEngine. Are you using a model that isn't a SolidModel?");if(a)return n["@id"].$in.map((function(t){return new Gt(t)}));var u=n["@id"],c=o,l=[];try{for(var f=le(Object.entries(c)),h=f.next();!h.done;h=f.next()){var d=ue(h.value,2),p=d[0],y=d[1];if(null===y)throw new i.SoukaiError("SolidEngine doesn't support setting properties to null, delete");"object"==s(y)&&"$unset"in y?l.push(new Gt(u,p)):"object"==s(y)&&"@id"in y?l.push(new Jt(x.reference(u,p,y["@id"]))):"object"==s(y)&&"@type"in y&&"http://www.w3.org/2001/XMLSchema#dateTime"===y["@type"]?l.push(new Jt(x.literal(u,p,new Date(y["@value"])))):"@id"!==p?"@type"!==p?l.push(new Jt(x.literal(u,p,y))):l.push(new Jt(x.type(u,y))):l.push(new Ft(u,y))}}catch(t){e={error:t}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}return l},t.prototype.extractJsonLDGraphItemPush=function(t){return ae(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,this.getJsonLDGraphProperties(t)];case 1:return[2,e.sent().map((function(t){return new Jt(t)}))]}}))}))},t.prototype.extractJsonLDGraphTypes=function(t){if(!this.isJsonLDGraphTypesFilter(t))return[];var e=t["@graph"].$contains["@type"].$or.reduce((function(t,e){return"$contains"in e&&t.push.apply(t,ce(e.$contains)),"$eq"in e&&t.push(e.$eq),t}),[]);return C.unique(e.filter((function(t){return t.startsWith("http")})))},t.prototype.getJsonLDGraphProperties=function(t){return ae(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,J.parseJsonLD(t)];case 1:return[2,e.sent().properties]}}))}))},t.prototype.isJsonLDGraphUpdate=function(t){return"object"==s(t["@graph"])&&("object"==s(t["@graph"].$updateItems)||"object"==s(t["@graph"].$push))},t.prototype.isJsonLDGraphTypesFilter=function(t){return"object"==s(t["@graph"])&&"object"==s(t["@graph"].$contains)&&"object"==s(t["@graph"].$contains["@type"])&&Array.isArray(t["@graph"].$contains["@type"].$or)},t}(),he=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),de=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},pe=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ye=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},ve=function(t){function e(e){return t.call(this,e,Bt,"resourceUrls")||this}return he(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e.prototype.resolve=function(){return de(this,void 0,void 0,(function(){var e,r=this;return pe(this,(function(n){switch(n.label){case 0:return o.a.engine instanceof fe?[2,t.prototype.resolve.call(this)]:[4,o.a.engine.readMany(this.container.getDocumentUrl())];case 1:return e=n.sent(),this.related=Object.entries(e).map((function(t){var e=ye(t,2),n=e[0],i=e[1];return new Bt({url:n,updatedAt:r.getLatestUpdateDate(i["@graph"])})})),[2,this.related]}}))}))},e.prototype.getLatestUpdateDate=function(t){var e=t.reduce((function(t,e){var r,n,i,o,a=(null!==(o=null!==(i=null!==(n=null!==(r=e["purl:modified"])&&void 0!==r?r:e["http://purl.org/dc/terms/modified"])&&void 0!==n?n:e["purl:created"])&&void 0!==i?i:e["http://purl.org/dc/terms/created"])&&void 0!==o?o:{"@value":0})["@value"],s=new Date(a).getTime();return Math.max(t,s)}),0);return new Date(e)},e}(X),be=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ge=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},we=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},me=function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a},xe=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(me(arguments[e]));return t},_e=function(t){function e(e,r){return t.call(this,e,r,"resourceUrls","url")||this}return be(e,t),e.prototype.resolve=function(){return ge(this,void 0,void 0,(function(){var t;return we(this,(function(e){switch(e.label){case 0:return t=this,[4,this.relatedClass.from(this.parent.url).all({$in:this.parent.resourceUrls})];case 1:return t.related=e.sent(),[2,this.related]}}))}))},e.prototype.create=function(t){return void 0===t&&(t={}),ge(this,void 0,void 0,(function(){var e;return we(this,(function(r){switch(r.label){case 0:return e=this.relatedClass.newInstance(t),[4,this.save(e)];case 1:return r.sent(),[2,e]}}))}))},e.prototype.save=function(t){return ge(this,void 0,void 0,(function(){return we(this,(function(e){switch(e.label){case 0:if(!this.parent.exists())throw new i.SoukaiError("Cannot save a model because the container doesn't exist");return[4,t.save(this.parent.url)];case 1:return e.sent(),o.a.engine instanceof fe?[3,3]:[4,this.parent.update({resourceUrls:xe(this.parent.resourceUrls,[t.getDocumentUrl()])})];case 2:e.sent(),e.label=3;case 3:return this.loaded&&this.related.push(t),[2]}}))}))},e}(i.BelongsToManyRelation),Ee=function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ke=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Se=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Oe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ee(e,t),e.boot=function(e){t.boot.call(this,e),this.rdfsClasses.add(G("ldp:Container")),this.fields.resourceUrls={type:i.FieldType.Array,required:!1,rdfProperty:"http://www.w3.org/ns/ldp#contains",items:{type:i.FieldType.Key}},Bt.boot("SolidDocument")},e.prototype.documentsRelationship=function(){return new ve(this)},e.prototype.save=function(e){return ke(this,void 0,void 0,(function(){return Se(this,(function(r){switch(r.label){case 0:return[4,t.prototype.save.call(this,e)];case 1:return r.sent(),this.wasRecentlyCreated()&&!this.isRelationLoaded("documents")&&this.setRelationModels("documents",[]),[2,this]}}))}))},e.prototype.contains=function(t){return new _e(this,t)},e.prototype.newUrl=function(){var t=this.hasAttribute("name")?K.slug(this.getAttribute("name")):q.generate();return p.resolveDirectory(this.modelClass.collection,t)},e.prototype.newUniqueUrl=function(t){t=null!=t?t:this.newUrl();var e=q.generate(),r=p.directoryName(t);return p.resolveDirectory(p.parentDirectory(t),r+"-"+e)},e}(Ut),Ce=new(function(){function t(){}return t.prototype.loadSolidModels=function(){o.a.loadModels({SolidDocument:Bt})},t}());e.default=Ce}])}))},67696:function(t,e,r){t=r.nmd(t);var n,i,o,a=r(50476),s=r(1834)["default"],u=r(28861)["default"],c=r(13861)["default"],l=r(17964)["default"];r(68309),r(21703),r(41539),r(82526),r(41817),r(32165),r(78783),r(33948),r(47941),r(84944),r(33792),r(92222),r(70189),r(54747),r(21249),r(57327),r(69600),r(74916),r(23123),r(69826),r(26833),r(36210),r(30489),r(27852),r(69720),r(74819),r(81299),r(23157),r(83593),r(52586),r(39714),r(15306),r(47042),r(4129),r(26699),r(32023),r(2707),r(87714),r(82801),r(1174),r(51532),r(38862),r(4723),function(r,a){"object"==l(e)&&"object"==l(t)?t.exports=a():(i=[],n=a,o="function"===typeof n?n.apply(e,i):n,void 0===o||(t.exports=o))}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n,i=(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=function(t){function e(e){var r=this.constructor,n=t.call(this,e)||this;return n.name=r.name,Object.setPrototypeOf(n,r.prototype),n}return i(e,t),e}(Error),f=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},h=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},d=new(function(){function t(){this._bootedModels={}}return t.prototype.useEngine=function(t){this._engine=t},t.prototype.model=function(t){return this._bootedModels[t]},t.prototype.loadModel=function(t,e){t in e||(e.boot(t),this._bootedModels[t]=e)},t.prototype.loadModels=function(t){for(var e in t)t.hasOwnProperty(e)&&this.loadModel(e,t[e])},t.prototype.requireEngine=function(){if(!this._engine)throw new o("Engine must be initialized before performing any operations. Learn more at https://soukai.js.org/guide/engines.html");return this._engine},t.prototype.closeConnections=function(){return f(this,void 0,void 0,(function(){return h(this,(function(t){switch(t.label){case 0:return this._engine&&"closeConnections"in this._engine?[4,this._engine.closeConnections()]:[2];case 1:return t.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),t}()),p=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),y=function(t){function e(e,r){var n=t.call(this,"Model "+e+": "+r+". Learn more at https://soukai.js.org/guide/defining-models.html")||this;return n.modelName=e,n}return p(e,t),e}(o),v=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function b(t){for(var e in t=v({},t))t.hasOwnProperty(e)&&null!==t[e]&&"object"==l(t[e])&&t[e].constructor===Object&&(t[e]=b(t[e]));return t}function g(t,e){if(t===e)return!0;var r=l(t);if(r!==l(e))return!1;if("object"!==r||null===t||null===e)return!1;if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(!g(t[n],e[n]))return!1;return!0}function w(t){return"object"==l(t)&&null!==t&&!Array.isArray(t)}var m={deepClone:b,deepEquals:g,isObject:w},x=new(function(){function t(){}return t.prototype.contains=function(t,e){return-1!==t.indexOf(e)},t.prototype.flatten=function(t){return"flat"in t?t.flat():[].concat.apply([],t)},t.prototype.unique=function(t){var e=new Set(t),r=[];return e.forEach((function(t){return r.push(t)})),r},t.prototype.withoutIndexes=function(t,e){var r=this;return t.map((function(t,e){return[t,e]})).filter((function(t){t[0];var n=t[1];return!r.contains(e,n)})).map((function(t){return t[0]}))},t}());function _(t){return t.split(/_|\s/).map((function(t){return t.length>0?t.substr(0,1).toUpperCase()+t.substr(1):t})).join("")}function E(t){return t.split(/_|\s|(?=[A-Z])/).map((function(t,e){return 0===t.length?t:0===e?t.toLowerCase():t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()})).join("")}var k,S=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},O=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},C=function(){function t(t,e,r,n){this.related=null,this.deleteStrategy=null,this.parent=t,this.relatedClass=e,this.foreignKeyName=r,this.localKeyName=n||e.primaryKey}return Object.defineProperty(t.prototype,"loaded",{get:function(){return null!==this.related},enumerable:!0,configurable:!0}),t.prototype.getModels=function(){return S(this,void 0,void 0,(function(){return O(this,(function(t){switch(t.label){case 0:return this.loaded?[3,2]:[4,this.resolve()];case 1:t.sent(),t.label=2;case 2:return[2,this.getLoadedModels()]}}))}))},t.prototype.getLoadedModels=function(){return Array.isArray(this.related)?this.related:this.related?[this.related]:[]},t.prototype.unload=function(){this.related=null},t.prototype.onDelete=function(t){return this.deleteStrategy=t,this},t}(),R=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),I=function(t){function e(e,r,n,i){return t.call(this,e,r,n||E(r.name+"_"+r.primaryKey+"s"),i)||this}return R(e,t),e}(C),D=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),T=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},A=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D(e,t),e.prototype.resolve=function(){return T(this,void 0,void 0,(function(){var t,e,r,n;return A(this,(function(i){switch(i.label){case 0:return t=this.parent.getAttribute(this.foreignKeyName),e=this,this.localKeyName!==this.relatedClass.primaryKey?[3,2]:[4,this.relatedClass.all({$in:t})];case 1:return r=i.sent(),[3,4];case 2:return[4,this.relatedClass.all((n={},n[this.localKeyName]={$or:t.map((function(t){return{$eq:t}})).concat(t.map((function(t){return{$contains:t}})))},n))];case 3:r=i.sent(),i.label=4;case 4:return e.related=r,[2,this.related]}}))}))},e}(I),N=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=function(t){function e(e,r,n,i){return t.call(this,e,r,n||E(r.name+"_"+r.primaryKey),i)||this}return N(e,t),e}(C),L=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),M=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},U=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return L(e,t),e.prototype.resolve=function(){return M(this,void 0,void 0,(function(){var t,e,r,n;return U(this,(function(i){switch(i.label){case 0:return t=this.parent.getAttribute(this.foreignKeyName),e=this,this.localKeyName!==this.relatedClass.primaryKey?[3,2]:[4,this.relatedClass.find(t)];case 1:return r=i.sent(),[3,4];case 2:return[4,this.relatedClass.first((n={},n[this.localKeyName]=t,n))];case 3:r=i.sent(),i.label=4;case 4:return e.related=r,[2,this.related]}}))}))},e}(j),B=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},G=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},J=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return B(e,t),e.prototype.resolve=function(){return F(this,void 0,void 0,(function(){var t,e,r;return G(this,(function(n){switch(n.label){case 0:return t=this.parent.getAttribute(this.localKeyName),e=this,[4,this.relatedClass.all((r={},r[this.foreignKeyName]={$or:[{$eq:t},{$contains:t}]},r))];case 1:return e.related=n.sent(),[2,this.related]}}))}))},e}(I),K=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),q=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},H=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K(e,t),e.prototype.resolve=function(){return q(this,void 0,void 0,(function(){var t,e,r;return H(this,(function(n){switch(n.label){case 0:return t=this.parent.getAttribute(this.localKeyName),e=this,[4,this.relatedClass.first((r={},r[this.foreignKeyName]={$or:[{$eq:t},{$contains:t}]},r))];case 1:return e.related=n.sent(),[2,this.related]}}))}))},e}(j),z=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Y=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(t){t.Number="number",t.String="string",t.Boolean="boolean",t.Array="array",t.Object="object",t.Date="date",t.Key="key"}(k||(k={}));var Z=Object.values(k),X=["createdAt","updatedAt"],Q=function(){function t(t,e){if(void 0===t&&(t={}),void 0===e&&(e=!1),!("__pureInstance"in t))return this.modelClass.ensureBooted(),this.initialize(t,e),this._proxy}return Object.defineProperty(t,"instance",{get:function(){return new this},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pureInstance",{get:function(){return new this({__pureInstance:!0})},enumerable:!0,configurable:!0}),t.boot=function(e){var r=this,n={};if(void 0===r.collection)r.collection=e.toLowerCase()+"s";else if("string"!=typeof r.collection)throw new y(e,"Collection name not defined or invalid format");if("boolean"==typeof r.timestamps||void 0===r.timestamps)if(void 0===r.timestamps||r.timestamps){for(var i=0,o=X;i<o.length;i++)n[u=o[i]]={type:k.Date,required:!1};r.timestamps=X}else r.timestamps=[];else{if(!Array.isArray(r.timestamps))throw new y(e,"Invalid timestamps definition");for(var a=0,s=r.timestamps;a<s.length;a++){var u=s[a];if(-1===X.indexOf(u))throw new y(e,"Invalid timestamp field defined ("+u+")");n[u]={type:k.Date,required:!1}}}if(void 0!==r.fields)for(var u in r.fields)if(r.fields.hasOwnProperty(u)&&(n[u]=tt(e,u,r.fields[u]),-1!==r.timestamps.indexOf(u)&&(n[u].type!==k.Date||n[u].required)))throw new y(e,"Field "+u+" definition must be type date and not required because it is used an automatic timestamp. Learn more at https://soukai.js.org/guide/defining-models.html#automatic-timestamps");r.primaryKey in n||(n[r.primaryKey]={type:k.Key,required:!1});for(var c=Object.getOwnPropertyNames(r.pureInstance),l=[],f=Object.getPrototypeOf(r.pureInstance);f!==t.prototype;){c.push.apply(c,f.constructor.classFields);for(var h=0,d=Object.getOwnPropertyNames(f);h<d.length;h++){var p=d[h];p.endsWith("Relationship")&&"function"==typeof r.pureInstance[p]&&l.push(p.substring(0,p.length-12))}f=Object.getPrototypeOf(f)}r.classFields=x.unique(c),r.relations=x.unique(l),r.fields=n,r.modelName=e},t.create=function(t){return void 0===t&&(t={}),new this(t).save()},t.createFromEngineDocument=function(t,e){return this.instance.createFromEngineDocument(t,e)},t.createManyFromEngineDocuments=function(t){return this.instance.createManyFromEngineDocuments(t)},t.find=function(t){var e=this;return this.ensureBooted(),d.requireEngine().readOne(this.collection,this.instance.serializeKey(t)).then((function(r){return e.createFromEngineDocument(t,r)})).catch((function(){return null}))},t.all=function(t){return $(this,void 0,void 0,(function(){var e;return Y(this,(function(r){switch(r.label){case 0:return this.ensureBooted(),[4,d.requireEngine().readMany(this.collection,t)];case 1:return e=r.sent(),[4,this.createManyFromEngineDocuments(e)];case 2:return[2,r.sent()]}}))}))},t.first=function(t){return $(this,void 0,void 0,(function(){return Y(this,(function(e){switch(e.label){case 0:return[4,this.all(t)];case 1:return[2,e.sent()[0]||null]}}))}))},t.ensureBooted=function(){if(void 0===this.modelName)throw new o("Model has not been booted (did you forget to call Soukai.loadModel?) Learn more at https://soukai.js.org/guide/defining-models.html")},Object.defineProperty(t.prototype,"modelClass",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.prototype.update=function(t){for(var e in void 0===t&&(t={}),t=this.castAttributes(t,this.modelClass.fields))this.setAttribute(e,t[e]);return this.hasAutomaticTimestamp("updatedAt")&&this.touch(),this.save()},t.prototype.hasRelation=function(t){return-1!==this.modelClass.relations.indexOf(t)},t.prototype.getRelation=function(t){return this._relations[t]||null},t.prototype.loadRelation=function(t){return this.requireRelation(t).resolve()},t.prototype.loadRelationIfUnloaded=function(t){return $(this,void 0,void 0,(function(){return Y(this,(function(e){return[2,this.isRelationLoaded(t)?this.getRelationModels(t):this.loadRelation(t)]}))}))},t.prototype.unloadRelation=function(t){this.requireRelation(t).unload()},t.prototype.getRelationModels=function(t){return this.requireRelation(t).related},t.prototype.setRelationModels=function(t,e){this.requireRelation(t).related=e},t.prototype.isRelationLoaded=function(t){return this.requireRelation(t).loaded},t.prototype.hasAttribute=function(t){for(var e=t.split("."),r=it(this._attributes,this.modelClass.fields);e.length>0;)if(void 0===(r=r[e.shift()]))return!1;return!0},t.prototype.setAttribute=function(t,e){e=this.castAttribute(e,this.modelClass.fields[t]),this._attributes[t]=e,delete this._dirtyAttributes[t],m.deepEquals(this._originalAttributes[t],e)||(this._dirtyAttributes[t]=e),this.hasAutomaticTimestamp("updatedAt")&&"updatedAt"!==t&&this.touch()},t.prototype.setAttributes=function(t){for(var e=0,r=Object.entries(t);e<r.length;e++){var n=r[e],i=n[0],o=n[1];this.setAttribute(i,o)}},t.prototype.getAttribute=function(t,e){void 0===e&&(e=!1);for(var r=t.split("."),n=this.getAttributes(e);r.length>0;)if(void 0===(n=n[r.shift()]))return n;return n},t.prototype.getAttributes=function(t){return void 0===t&&(t=!1),t?b(this._attributes):it(this._attributes,this.modelClass.fields)},t.prototype.unsetAttribute=function(t){this._attributes.hasOwnProperty(t)&&(t in this.modelClass.fields?this._attributes[t]=void 0:delete this._attributes[t],void 0!==this._originalAttributes[t]&&(this._dirtyAttributes[t]=void 0),this.hasAutomaticTimestamp("updatedAt")&&this.touch())},t.prototype.isDirty=function(t){return t?t in this._dirtyAttributes:Object.values(this._dirtyAttributes).length>0},t.prototype.getPrimaryKey=function(){return this._attributes[this.modelClass.primaryKey]},t.prototype.getSerializedPrimaryKey=function(){var t=this.getPrimaryKey();return t?this.serializeKey(t):null},t.prototype.delete=function(){return $(this,void 0,void 0,(function(){var t;return Y(this,(function(e){switch(e.label){case 0:return this._exists?[4,this.getCascadeModels()]:[2,this];case 1:return t=e.sent(),[4,this.deleteModelsFromEngine(t)];case 2:return e.sent(),t.forEach((function(t){return t.resetEngineData()})),[2,this]}}))}))},t.prototype.save=function(){return $(this,void 0,void 0,(function(){var t,e;return Y(this,(function(r){switch(r.label){case 0:return rt(this._attributes,this.modelClass.fields),this.isDirty()?(t=this._exists,[4,this.syncDirty()]):[2,this];case 1:return e=r.sent(),this._wasRecentlyCreated=this._wasRecentlyCreated||!t,this._attributes[this.modelClass.primaryKey]=this.parseKey(e),this.cleanDirty(),[2,this]}}))}))},t.prototype.touch=function(){this.setAttribute("updatedAt",new Date)},t.prototype.setExists=function(t){this._exists=t},t.prototype.exists=function(){return this._exists},t.prototype.wasRecentlyCreated=function(){return this._wasRecentlyCreated},t.prototype.initialize=function(t,e){this._exists=e,this._wasRecentlyCreated=!1,this.initializeProxy(),this.initializeAttributes(t,e),this.initializeRelations()},t.prototype.initializeProxy=function(){this._proxy=new Proxy(this,{get:function(t,e,r){if("string"!=typeof e||e in t||-1!==t.modelClass.classFields.indexOf(e))return Reflect.get(t,e,r);var n="get"+_(e)+"Attribute";if("function"==typeof t[n])return t[n]();if(t.hasRelation(e))return t.isRelationLoaded(e)?t.getRelationModels(e):void 0;if(e.startsWith("related")){var i=E(e.substr(7));if(t.hasRelation(i))return t._relations[i]}return t.getAttribute(e)},set:function(t,e,r,n){return"string"!=typeof e||e in t||-1!==t.modelClass.classFields.indexOf(e)?Reflect.set(t,e,r,n):t.hasRelation(e)?(t.setRelationModels(e,r),!0):(t.setAttribute(e,r),!0)},deleteProperty:function(t,e){return"string"!=typeof e||e in t?Reflect.deleteProperty(t,e):t.hasRelation(e)?(t.unloadRelation(e),!0):e in t._attributes&&-1===t.modelClass.classFields.indexOf(e)?(t.unsetAttribute(e),!0):Reflect.deleteProperty(t,e)}})},t.prototype.initializeAttributes=function(t,e){this._attributes=m.deepClone(t),this._originalAttributes=e?m.deepClone(t):{},this._dirtyAttributes=e?{}:m.deepClone(t),e||(this.hasAutomaticTimestamp("createdAt")&&!("createdAt"in t)&&(this._attributes.createdAt=new Date,this._dirtyAttributes.createdAt=this._attributes.createdAt),this.hasAutomaticTimestamp("updatedAt")&&!("updatedAt"in t)&&(this._attributes.updatedAt=new Date,this._dirtyAttributes.updatedAt=this._attributes.updatedAt)),this._attributes=this.castAttributes(et(this._attributes,this.modelClass.fields),this.modelClass.fields)},t.prototype.initializeRelations=function(){var t=this;this._relations=this.modelClass.relations.reduce((function(e,r){var n=t._proxy[E(r)+"Relationship"]();return n.name=r,e[r]=n,e}),{})},t.prototype.createFromEngineDocument=function(t,e){return $(this,void 0,void 0,(function(){var r;return Y(this,(function(n){switch(n.label){case 0:return[4,this.parseEngineDocumentAttributes(t,e)];case 1:return(r=n.sent())[this.modelClass.primaryKey]=t,[2,new this.modelClass(r,!0)]}}))}))},t.prototype.createManyFromEngineDocuments=function(t){return $(this,void 0,void 0,(function(){var e=this;return Y(this,(function(r){return[2,Promise.all(Object.entries(t).map((function(t){var r=t[0],n=t[1];return e.createFromEngineDocument(e.parseKey(r),n)})))]}))}))},t.prototype.syncDirty=function(){return $(this,void 0,void 0,(function(){var t,e,r;return Y(this,(function(n){switch(n.label){case 0:return t=d.requireEngine(),this._exists?(e=this.getDirtyEngineDocumentUpdates(),r=this.getSerializedPrimaryKey(),[4,t.update(this.modelClass.collection,r,e)]):[2,t.create(this.modelClass.collection,this.toEngineDocument(),this.getSerializedPrimaryKey()||void 0)];case 1:return n.sent(),[2,r]}}))}))},t.prototype.cleanDirty=function(){this._originalAttributes=m.deepClone(this._attributes),this._dirtyAttributes={},this._exists=!0},t.prototype.getCascadeModels=function(){return $(this,void 0,void 0,(function(){var t,e,r,n=this;return Y(this,(function(i){switch(i.label){case 0:return t=this.modelClass.relations.map((function(t){return n._relations[t]})).filter((function(t){return"cascade"===t.deleteStrategy})).map((function(t){return $(n,void 0,void 0,(function(){return Y(this,(function(e){switch(e.label){case 0:return[4,t.getModels()];case 1:return[2,e.sent().map((function(t){return t.getCascadeModels()}))]}}))}))})),[4,Promise.all(t)];case 1:return e=i.sent(),[4,Promise.all(x.flatten(e))];case 2:return r=i.sent(),[2,x.flatten(r).concat([this]).filter((function(t){return t.exists()}))]}}))}))},t.prototype.deleteModelsFromEngine=function(t){return $(this,void 0,void 0,(function(){var e,r;return Y(this,(function(n){switch(n.label){case 0:return e=d.requireEngine(),r=t.map((function(t){return[t.modelClass.collection,t.getSerializedPrimaryKey()]})),[4,Promise.all(r.map((function(t){var r=t[0],n=t[1];return e.delete(r,n)})))];case 1:return n.sent(),[2]}}))}))},t.prototype.resetEngineData=function(){delete this._attributes[this.modelClass.primaryKey],this._exists=!1,this._dirtyAttributes=m.deepClone(this._attributes)},t.prototype.hasOne=function(t,e,r){return new W(this,t,e,r)},t.prototype.belongsToOne=function(t,e,r){return new V(this,t,e,r)},t.prototype.hasMany=function(t,e,r){return new J(this,t,e,r)},t.prototype.belongsToMany=function(t,e,r){return new P(this,t,e,r)},t.prototype.castAttributes=function(t,e){var r={};for(var n in t)r[n]=this.castAttribute(t[n],e[n]);return r},t.prototype.castAttribute=function(t,e){var r=this;if(nt(t))return t;if(void 0===e)switch(l(t)){case"object":return t.toString();case"symbol":case"function":case"undefined":return;default:return t}switch(e.type){case k.Date:return new Date(t);case k.Object:return this.castAttributes(t,e.fields);case k.Array:return t.map((function(t){return r.castAttribute(t,e.items)}));case k.Boolean:return!!t;case k.Number:return parseFloat(t);case k.String:return t.toString();default:return t}},t.prototype.hasAutomaticTimestamp=function(t){return-1!==this.modelClass.timestamps.indexOf(t)},t.prototype.toEngineDocument=function(){return it(this._attributes,this.modelClass.fields)},t.prototype.getDirtyEngineDocumentUpdates=function(){var t=m.deepClone(this._dirtyAttributes);for(var e in t)void 0===t[e]&&(t[e]={$unset:!0});return t},t.prototype.parseEngineDocumentAttributes=function(t,e){return $(this,void 0,void 0,(function(){return Y(this,(function(t){return[2,z({},e)]}))}))},t.prototype.serializeKey=function(t){return t.toString()},t.prototype.parseKey=function(t){return t},t.prototype.requireRelation=function(t){if(!(t in this._relations))throw new o("Attempting to use undefined "+t+" relation.");return this._relations[t]},t.primaryKey="id",t.classFields=[],t.relations=[],t}();function tt(t,e,r,n){void 0===n&&(n=!0);var i={};if(-1!==Z.indexOf(r))i.type=r;else{if("object"!=l(r))throw new y(t,"Invalid field definition "+e);i=r}if(void 0===i.type)i={fields:i,type:k.Object};else if(-1===Z.indexOf(i.type))throw new y(t,"Invalid field definition "+e);switch(n&&(i.required=!!i.required),i.type){case k.Object:if(void 0===i.fields)throw new y(t,"Field definition of type object requires fields attribute "+e);for(var o in i.fields)i.fields.hasOwnProperty(o)&&(i.fields[o]=tt(t,o,i.fields[o]));break;case k.Array:if(void 0===i.items)throw new y(t,"Field definition of type array requires items attribute. Field: '"+e+"'");i.items=tt(t,"items",i.items,!1)}return i}function et(t,e){for(var r in e){var n=e[r];if(!(r in t))switch(n.type){case k.Object:t[r]={};break;case k.Array:t[r]=[];break;default:t[r]=void 0}n.type===k.Object&&(t[r]=et(t[r],n.fields))}return t}function rt(t,e){for(var r in e){var n=e[r];if(n.required&&(!(r in t)||nt(t[r])))throw new o("The "+r+" attribute is required.");r in t&&!nt(t[r])&&n.type===k.Object&&rt(t[r],n.fields)}}function nt(t){return null==t}function it(t,e,r){for(var n in void 0===r&&(r=!1),t=b(t))if(void 0===t[n])delete t[n];else if(n in e&&e[n].type===k.Object){var i=it(t[n],e[n].fields,!0);void 0===i?delete t[n]:t[n]=i}return r&&0===Object.keys(t).length?void 0:t}var ot,at,st=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=function(t){function e(e){var r=t.call(this,"Could not create document with id "+e+" because it is already in use.")||this;return r.id=e,r}return st(e,t),e}(o),ct=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lt=function(t){function e(e){var r=t.call(this,"Couldn't find document with id "+e+".")||this;return r.id=e,r}return ct(e,t),e}(o),ft={generate:function t(e){return e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t)}},ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dt=function(){function t(){var t=this;this.documentsIn=function(t,e,r){return x.contains(r,t)},this.attributeEq=function(t,e,r){return g(t[e],r)},this.attributeContains=function(e,r,n){Array.isArray(n)||(n=[n]);var i=e&&e[r];return!!Array.isArray(i)&&!n.find((function(e){return!i.find((function(r){return t.filterValue(r,e)}))}))},this.attributeOr=function(e,r,n){return!!n.find((function(n){return!!t.filterValue(e,(i={},i[r]=n,i));var i}))},this.attributeIn=function(t,e,r){return x.contains(r,t[e])},this.attributeUpdate=function(e,r,n){w(n)?t.isOperation(n,t.attributeUpdates)?t.runOperation(n,t.attributeUpdates,e,r):w(e[r])?t.updateAttributes(e[r],n):e[r]=n:e[r]=n},this.attributeUpdateItems=function(e,r,n){Array.isArray(n)||(n=[n]);for(var i=function(n,i,o){n&&n.$in&&(n.$in=n.$in.map((function(t){return t.toString()})));var a=t.requireArrayProperty("$updateItems",e,r),s=t.filterDocuments(a.reduce((function(t,e,r){return ht({},t,((n={})[r]=w(e)?e:{},n));var n}),{}),n||{});i&&Object.keys(s).forEach((function(e){var r;t.updateAttributes(s,((r={})[e]=i,r)),a[e]=s[e]})),o&&(e[r]=x.withoutIndexes(a,Object.keys(s).map(parseInt)))},o=0,a=n;o<a.length;o++){var s=a[o];i(s.$where,s.$update,s.$unset)}},this.attributePush=function(e,r,n){t.requireArrayProperty("$push",e,r).push(n)},this.attributeUnset=function(t,e,r){if(!0!==r)for(var n=0,i=r=Array.isArray(r)?r:[r];n<i.length;n++){var o=i[n];delete t[e][o]}else delete t[e]},this.attributeApply=function(e,r,n){for(var i=0,o=n;i<o.length;i++){var a=o[i];t.runOperation(a,t.attributeUpdates,e,r)}},this.rootFilters={$in:this.documentsIn},this.attributeFilters={$eq:this.attributeEq,$contains:this.attributeContains,$or:this.attributeOr,$in:this.attributeIn},this.attributeUpdates={$update:this.attributeUpdate,$updateItems:this.attributeUpdateItems,$push:this.attributePush,$unset:this.attributeUnset,$apply:this.attributeApply}}return t.prototype.filterDocuments=function(t,e){var r=this;return void 0===e&&(e={}),Object.entries(t).reduce((function(t,n){var i=n[0],o=n[1];return r.filterDocument(i,o,e)&&(t[i]=o),t}),{})},t.prototype.updateAttributes=function(t,e){if(this.isOperation(e,{$unset:this.attributeUnset}))for(var r=e.$unset,n=0,i=Array.isArray(r)?r:[r];n<i.length;n++){var o=i[n];this.attributeUnset(t,o,!0)}else for(var a=0,s=Object.entries(e);a<s.length;a++){var u=s[a],c=u[0],l=u[1];this.attributeUpdate(t,c,l)}},t.prototype.obtainDocumentId=function(t){return t||ft.generate()},t.prototype.filterDocument=function(t,e,r){var n=this;void 0===r&&(r={}),r=ht({},r);for(var i=0,o=Object.keys(r).filter((function(t){return t in n.rootFilters}));i<o.length;i++){var a=o[i];if(!this.rootFilters[a](t,e,r[a]))return!1;delete r[a]}return this.filterValue(e,r)},t.prototype.filterValue=function(t,e){var r=this;return void 0===e&&(e={}),w(e)?this.isOperation(e,this.attributeFilters)?this.runOperation(e,this.attributeFilters,{value:t},"value"):!!w(t)&&!Object.entries(e).find((function(e){var n=e[0],i=e[1];return!(r.isOperation(i,r.attributeFilters)?r.runOperation(i,r.attributeFilters,t,n):r.attributeEq(t,n,i))})):this.attributeEq({value:t},"value",e)},t.prototype.isOperation=function(t,e){if(!w(t))return!1;var r=Object.keys(t),n=r[0],i=r.slice(1);return!(!n||0!==i.length||!(n in e))},t.prototype.runOperation=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=Object.entries(t)[0],o=i[0],a=i[1];return e[o].apply(e,r.concat([a]))},t.prototype.requireArrayProperty=function(t,e,r){if(!e||!Array.isArray(e[r]))throw new Error(t+" operator can only be applied to array attributes");return e[r]},t}(),pt=new WeakMap,yt=new WeakMap,vt=new WeakMap,bt=new WeakMap,gt=new WeakMap,wt={get:function(t,e,r){if(t instanceof IDBTransaction){if("done"===e)return yt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||vt.get(t);if("store"===e)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _t(t[e])},set:function(t,e,r){return t[e]=r,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function mt(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(at||(at=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(Et(this),r),_t(pt.get(this))}:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return _t(t.apply(Et(this),r))}:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];var o=t.call.apply(t,[Et(this),e].concat(n));return vt.set(o,e.sort?e.sort():[e]),_t(o)}}function xt(t){return"function"==typeof t?mt(t):(t instanceof IDBTransaction&&function(t){if(!yt.has(t)){var e=new Promise((function(e,r){var n=function(){t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=function(){e(),n()},o=function(){r(t.error||new DOMException("AbortError","AbortError")),n()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));yt.set(t,e)}}(t),e=t,(ot||(ot=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(t){return e instanceof t}))?new Proxy(t,wt):t);var e}function _t(t){if(t instanceof IDBRequest)return function(t){var e=new Promise((function(e,r){var n=function(){t.removeEventListener("success",i),t.removeEventListener("error",o)},i=function(){e(_t(t.result)),n()},o=function(){r(t.error),n()};t.addEventListener("success",i),t.addEventListener("error",o)}));return e.then((function(e){e instanceof IDBCursor&&pt.set(e,t)})).catch((function(){})),gt.set(e,t),e}(t);if(bt.has(t))return bt.get(t);var e=xt(t);return e!==t&&(bt.set(t,e),gt.set(e,t)),e}var Et=function(t){return gt.get(t)};function kt(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.blocked,i=r.upgrade,o=r.blocking,a=r.terminated,s=indexedDB.open(t,e),u=_t(s);return i&&s.addEventListener("upgradeneeded",(function(t){i(_t(s.result),t.oldVersion,t.newVersion,_t(s.transaction))})),n&&s.addEventListener("blocked",(function(){return n()})),u.then((function(t){a&&t.addEventListener("close",(function(){return a()})),o&&t.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),u}function St(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.blocked,n=indexedDB.deleteDatabase(t);return r&&n.addEventListener("blocked",(function(){return r()})),_t(n).then((function(){}))}var Ot=["get","getKey","getAll","getAllKeys","count"],Ct=["put","add","delete","clear"],Rt=new Map;function It(t,e){if(t instanceof IDBDatabase&&!(e in t)&&"string"==typeof e){if(Rt.get(e))return Rt.get(e);var r=e.replace(/FromIndex$/,""),n=e!==r,i=Ct.includes(r);if(r in(n?IDBIndex:IDBObjectStore).prototype&&(i||Ot.includes(r))){var o=function(){var t=c(u().mark((function t(e){var o,a,s,c,l,f,h,d=arguments;return u().wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a=this.transaction(e,i?"readwrite":"readonly"),s=a.store,c=d.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=d[f];if(n&&(s=s.index(l.shift())),h=(o=s)[r].apply(o,l),t.t0=i,!t.t0){t.next=9;break}return t.next=9,a.done;case 9:return t.abrupt("return",h);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();return Rt.set(e,o),o}}}wt=function(t){return s(s({},t),{},{get:function(e,r,n){return It(e,r)||t.get(e,r,n)},has:function(e,r){return!!It(e,r)||t.has(e,r)}})}(wt);var Dt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Tt=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},At=function(){function t(t){void 0===t&&(t=null),this.database=t?"soukai-"+t:"soukai",this.helper=new dt}return t.prototype.purgeDatabase=function(){return Dt(this,void 0,void 0,(function(){var t=this;return Tt(this,(function(e){switch(e.label){case 0:return this.closeConnections(),[4,Promise.all([St(this.database+"-meta",{blocked:function(){return t.throwDatabaseBlockedError()}}),St(this.database,{blocked:function(){return t.throwDatabaseBlockedError()}})])];case 1:return e.sent(),[2]}}))}))},t.prototype.closeConnections=function(){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(t){return this._metadataConnection&&this._metadataConnection.close(),this._documentsConnection&&this._documentsConnection.close(),delete this._metadataConnection,delete this._documentsConnection,[2]}))}))},t.prototype.create=function(t,e,r){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(n){switch(n.label){case 0:return r=this.helper.obtainDocumentId(r),[4,this.documentExists(t,r)];case 1:if(n.sent())throw new ut(r);return[4,this.createDocument(t,r,e)];case 2:return n.sent(),[2,r]}}))}))},t.prototype.readOne=function(t,e){return Dt(this,void 0,void 0,(function(){var r;return Tt(this,(function(n){switch(n.label){case 0:return[4,this.collectionExists(t)];case 1:if(!n.sent())throw new lt(e);return[4,this.getDocument(t,e)];case 2:if(!(r=n.sent()))throw new lt(e);return[2,r]}}))}))},t.prototype.readMany=function(t,e){return Dt(this,void 0,void 0,(function(){var r,n;return Tt(this,(function(i){switch(i.label){case 0:return r={},[4,this.getCollections()];case 1:return-1===(n=i.sent()).indexOf(t)?[2,r]:[4,this.withDocumentsTransaction(n,t,"readonly",(function(t){var e=function t(e){if(e)return r[e.key]=e.value,e.continue().then(t)};return t.store.openCursor().then(e)}))];case 2:return i.sent(),[2,this.helper.filterDocuments(r,e)]}}))}))},t.prototype.update=function(t,e,r){return Dt(this,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return[4,this.getDocument(t,e)];case 1:if(!(n=i.sent()))throw new lt(e);return this.helper.updateAttributes(n,r),[4,this.updateDocument(t,e,n)];case 2:return i.sent(),[2]}}))}))},t.prototype.delete=function(t,e){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(r){switch(r.label){case 0:return[4,this.documentExists(t,e)];case 1:if(!r.sent())throw new lt(e);return[4,this.deleteDocument(t,e)];case 2:return r.sent(),[2]}}))}))},t.prototype.collectionExists=function(t){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return[4,this.getCollections()];case 1:return[2,-1!==e.sent().indexOf(t)]}}))}))},t.prototype.documentExists=function(t,e){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(r){switch(r.label){case 0:return[4,this.getDocument(t,e)];case 1:return[2,!!r.sent()]}}))}))},t.prototype.getDocument=function(t,e){return Dt(this,void 0,void 0,(function(){var r;return Tt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.getCollections()];case 1:return-1===(r=n.sent()).indexOf(t)?[2,null]:[4,this.withDocumentsTransaction(r,t,"readonly",(function(t){return t.store.get(e)}))];case 2:return[2,n.sent()||null];case 3:return n.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.createDocument=function(t,e,r){return Dt(this,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return[4,this.getCollections()];case 1:return-1!==(n=i.sent()).indexOf(t)?[3,3]:[4,this.createCollection(t)];case 2:i.sent(),n.push(t),i.label=3;case 3:return[2,this.withDocumentsTransaction(n,t,"readwrite",(function(t){return t.store.add(r,e),t.done}))]}}))}))},t.prototype.updateDocument=function(t,e,r){return Dt(this,void 0,void 0,(function(){var n;return Tt(this,(function(i){switch(i.label){case 0:return[4,this.getCollections()];case 1:return n=i.sent(),[2,this.withDocumentsTransaction(n,t,"readwrite",(function(t){return t.store.put(r,e),t.done}))]}}))}))},t.prototype.deleteDocument=function(t,e){return Dt(this,void 0,void 0,(function(){var r;return Tt(this,(function(n){switch(n.label){case 0:return[4,this.getCollections()];case 1:return r=n.sent(),[2,this.withDocumentsTransaction(r,t,"readwrite",(function(t){return t.store.delete(e),t.done}))]}}))}))},t.prototype.withMetadataTransaction=function(t,e){return Dt(this,void 0,void 0,(function(){var r,n,i=this;return Tt(this,(function(o){switch(o.label){case 0:return r=this,(n=this._metadataConnection)?[3,2]:[4,kt(this.database+"-meta",1,{upgrade:function(t){t.objectStoreNames.contains("collections")||t.createObjectStore("collections",{keyPath:"name"})},blocked:function(){return i.throwDatabaseBlockedError()}})];case 1:n=o.sent(),o.label=2;case 2:return r._metadataConnection=n,[2,this.retryingOnTransactionInactive((function(){var r=i._metadataConnection.transaction("collections",t);return e(r)}))]}}))}))},t.prototype.withDocumentsTransaction=function(t,e,r,n){return Dt(this,void 0,void 0,(function(){var i,o,a=this;return Tt(this,(function(s){switch(s.label){case 0:return i=this,(o=this._documentsConnection)?[3,2]:[4,kt(this.database,t.length,{upgrade:function(e){for(var r=0,n=t;r<n.length;r++){var i=n[r];e.objectStoreNames.contains(i)||e.createObjectStore(i)}},blocked:function(){return a.throwDatabaseBlockedError()}})];case 1:o=s.sent(),s.label=2;case 2:return i._documentsConnection=o,[2,this.retryingOnTransactionInactive((function(){var t=a._documentsConnection.transaction(e,r);return n(t)}))]}}))}))},t.prototype.retryingOnTransactionInactive=function(t){try{return t()}catch(e){if(!(e instanceof Error)||!e.name.toLowerCase().includes("inactive")&&!e.message.toLowerCase().includes("inactive"))throw e;return t()}},t.prototype.getCollections=function(){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(t){return[2,this.withMetadataTransaction("readonly",(function(t){return t.store.getAllKeys()}))]}))}))},t.prototype.createCollection=function(t){return Dt(this,void 0,void 0,(function(){return Tt(this,(function(e){switch(e.label){case 0:return[4,this.withMetadataTransaction("readwrite",(function(e){return e.store.add({name:t}),e.done}))];case 1:return e.sent(),this._documentsConnection&&(this._documentsConnection.close(),delete this._documentsConnection),[2]}}))}))},t.prototype.throwDatabaseBlockedError=function(){throw new o("An attempt to open an IndexedDB connection has been blocked, remember to call IndexedDBEngine.closeConnections when necessary. Learn more at https://developer.mozilla.org/en-US/docs/Web/API/IDBOpenDBRequest/blocked_event")},t}(),Pt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Nt=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},jt=function(){function t(){this.db={},this.helper=new dt}return Object.defineProperty(t.prototype,"database",{get:function(){return this.db},enumerable:!0,configurable:!0}),t.prototype.create=function(t,e,r){var n=this.collection(t);if((r=this.helper.obtainDocumentId(r))in n)throw new ut(r);return n[r]=e,Promise.resolve(r)},t.prototype.readOne=function(t,e){var r=this.collection(t);return e in r?Promise.resolve(r[e]):Promise.reject(new lt(e))},t.prototype.readMany=function(t,e){return Pt(this,void 0,void 0,(function(){var r;return Nt(this,(function(n){return this.hasCollection(t)?(r=this.collection(t),[2,this.helper.filterDocuments(r,e)]):[2,{}]}))}))},t.prototype.update=function(t,e,r){var n=this.collection(t);if(e in n){var i=n[e];return this.helper.updateAttributes(i,r),Promise.resolve()}return Promise.reject(new lt(e))},t.prototype.delete=function(t,e){var r=this.collection(t);return e in r?(delete r[e],Promise.resolve()):Promise.reject(new lt(e))},t.prototype.hasCollection=function(t){return t in this.db},t.prototype.collection=function(t){return this.hasCollection(t)||(this.db[t]={}),this.db[t]},t}(),Lt=function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new r((function(e){e(t.value)})).then(a,s)}u((n=n.apply(t,e||[])).next())}))},Mt=function(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=n[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ut=function(){function t(t){void 0===t&&(t=""),this.prefix=t,this.helper=new dt}return t.prototype.clear=function(){for(var t=0,e=Object.keys(localStorage);t<e.length;t++){var r=e[t];r.startsWith(this.prefix)&&localStorage.removeItem(r)}},t.prototype.create=function(t,e,r){return Lt(this,void 0,void 0,(function(){var n;return Mt(this,(function(i){if(n=this.readItem(t,{}),(r=this.helper.obtainDocumentId(r))in n)throw new ut(r);return n[r]=this.serializeAttributes(e),this.writeItem(t,n),[2,r]}))}))},t.prototype.readOne=function(t,e){return Lt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){if(r=this.readItem(t,{}),!(e in r))throw new lt(e);return[2,this.deserializeAttributes(r[e])]}))}))},t.prototype.readMany=function(t,e){return Lt(this,void 0,void 0,(function(){var r,n;return Mt(this,(function(i){for(n in r=this.readItem(t,{}))r[n]=this.deserializeAttributes(r[n]);return[2,this.helper.filterDocuments(r,e)]}))}))},t.prototype.update=function(t,e,r){return Lt(this,void 0,void 0,(function(){var n,i;return Mt(this,(function(o){if(n=this.readItem(t,{}),!(e in n))throw new lt(e);return i=this.deserializeAttributes(n[e]),this.helper.updateAttributes(i,r),n[e]=this.serializeAttributes(i),this.writeItem(t,n),[2]}))}))},t.prototype.delete=function(t,e){return Lt(this,void 0,void 0,(function(){var r;return Mt(this,(function(n){if(r=this.readItem(t,{}),!(e in r))throw new lt(e);return delete r[e],this.writeItem(t,r),[2]}))}))},t.prototype.readItem=function(t,e){void 0===e&&(e=null);var r=localStorage.getItem(this.prefix+t);return null!==r?JSON.parse(r):e},t.prototype.writeItem=function(t,e){localStorage.setItem(this.prefix+t,JSON.stringify(e))},t.prototype.serializeAttributes=function(t){for(var e in t){var r=t[e];t[e]=this.serializeAttributeValue(r)}return t},t.prototype.serializeAttributeValue=function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.serializeAttributeValue(t)})):t instanceof Date?{__dateTime:t.getTime()}:"object"==l(t)?this.serializeAttributes(t):t},t.prototype.deserializeAttributes=function(t){for(var e in t){var r=t[e];t[e]=this.deserializeAttributeValue(r)}return t},t.prototype.deserializeAttributeValue=function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.deserializeAttributeValue(t)})):"object"==l(t)&&"__dateTime"in t?new Date(t.__dateTime):t},t}(),Vt=function(){function t(t){this.engine=t}return t.prototype.create=function(t,e,r){return a.log("CREATE",t,e,r),this.engine.create(t,e,r).then((function(t){return a.log("CREATED",t),t})).catch((function(t){throw a.error(t),t}))},t.prototype.readOne=function(t,e){return a.log("READ ONE",t,e),this.engine.readOne(t,e).then((function(t){return a.log("FOUND",t),t})).catch((function(t){throw a.error(t),t}))},t.prototype.readMany=function(t,e){return a.log("READ ALL",t,e),this.engine.readMany(t,e).then((function(t){return a.log("FOUND",t),t})).catch((function(t){throw a.error(t),t}))},t.prototype.update=function(t,e,r){return a.log("UPDATE",t,e,r),this.engine.update(t,e,r).then((function(){return a.log("UPDATED")})).catch((function(t){throw a.error(t),t}))},t.prototype.delete=function(t,e){return a.log("DELETE",t,e),this.engine.delete(t,e).then((function(){return a.log("DELETED")})).catch((function(t){throw a.error(t),t}))},t}();function Bt(t){for(var e={},r=0,n=t.keys();r<n.length;r++){var i=n[r],o=(i.match(/^(?:\.\/)?(.+)\.(j|t)s$/)||[])[1];void 0!==o&&(e[o]=t(i).default)}return e}r.d(e,"definitionsFromContext",(function(){return Bt})),r.d(e,"Model",(function(){return Q})),r.d(e,"Soukai",(function(){return d})),r.d(e,"EngineHelper",(function(){return dt})),r.d(e,"LogEngine",(function(){return Vt})),r.d(e,"InMemoryEngine",(function(){return jt})),r.d(e,"LocalStorageEngine",(function(){return Ut})),r.d(e,"IndexedDBEngine",(function(){return At})),r.d(e,"SoukaiError",(function(){return o})),r.d(e,"DocumentNotFound",(function(){return lt})),r.d(e,"DocumentAlreadyExists",(function(){return ut})),r.d(e,"InvalidModelDefinition",(function(){return y})),r.d(e,"BelongsToManyRelation",(function(){return P})),r.d(e,"BelongsToOneRelation",(function(){return V})),r.d(e,"HasManyRelation",(function(){return J})),r.d(e,"HasOneRelation",(function(){return W})),r.d(e,"MultiModelRelation",(function(){return I})),r.d(e,"Relation",(function(){return C})),r.d(e,"SingleModelRelation",(function(){return j})),r.d(e,"FieldType",(function(){return k})),e.default=d}])}))},66639:function(t,e,r){t.exports=o;var n=r(87041).EventEmitter,i=r(66110);function o(){n.call(this)}i(o,n),o.Readable=r(92345),o.Writable=r(1607),o.Duplex=r(91606),o.Transform=r(32784),o.PassThrough=r(33091),o.finished=r(32626),o.pipeline=r(83329),o.Stream=o,o.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"===typeof t.destroy&&t.destroy())}function c(t){if(l(),0===n.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},52225:function(t,e,r){"use strict";r(21703),r(41539),r(39714),r(47042);var n=r(40837).Buffer,i=n.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a(t){var e=o(t);if("string"!==typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=a(t),this.encoding){case"utf16le":this.text=p,this.end=y,e=4;break;case"utf8":this.fillLast=f,e=4;break;case"base64":this.text=v,this.end=b,e=3;break;default:return this.write=g,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function u(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c(t,e,r){var n=e.length-1;if(n<r)return 0;var i=u(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||-2===i?0:(i=u(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||-2===i?0:(i=u(e[n]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function l(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function f(t){var e=this.lastTotal-this.lastNeed,r=l(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){var r=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function d(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function p(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function y(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function v(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function b(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function g(t){return t.toString(this.encoding)}function w(t){return t&&t.length?this.write(t):""}e.s=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=d,s.prototype.text=h,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},40837:function(t,e,r){r(21703),r(43290);
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var n=r(89914),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function a(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},a.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"===typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},a.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},94728:function(t,e,r){var n=r(50476);function i(t,e){if(o("noDeprecation"))return t;var r=!1;function i(){if(!r){if(o("throwDeprecation"))throw new Error(e);o("traceDeprecation")?n.trace(e):n.warn(e),r=!0}return t.apply(this,arguments)}return i}function o(t){try{if(!r.g.localStorage)return!1}catch(n){return!1}var e=r.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}r(21703),t.exports=i},52361:function(){},94616:function(){}}]);
//# sourceMappingURL=288-legacy.ca44947b.js.map