"use strict";(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[170],{9170:function(e,t,o){o.r(t),o.d(t,{default:function(){return m}});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v("Local: "),o("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"primary"},on:{click:e.download}},[e._v("Download")]),o("b-button",{staticClass:"ml-2",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.openFileUpload()}}},[e._v("Upload Brains")]),o("input",{ref:"fileUpload",attrs:{type:"file",multiple:"",hidden:""},on:{change:e.loadFiles}})],1)},a=[],s=o(1519),l=o(476);class r{constructor(e={}){this.id=(0,s.Z)(),this.type="baseConnector",this.created=Date.now(),Object.assign(this,e)}debug(){l.log(this)}}var i=o(5297),c=o(476);class d extends r{constructor(e={}){super(e),void 0==e["type"]&&(this["type"]="LocalConnector")}async upload(e,t){const o=new FileReader;await o.addEventListener("load",(()=>{t(o.result)})),o.readAsText(e,"UTF-8")}async upload1(e){for(var t=0;t<e.length;t++){let n=e[t],a=n.name;var o=n.name.split(".").pop();const s=new FileReader;s.addEventListener("load",(()=>{var e=s.result;switch(c.log(typeof e,e),o){case"json":var t=JSON.parse(e);c.log(t),void 0!=t.nodes&&(c.log(t),i.Z.commit("soukai/setNeurones",t.nodes));break;default:alert("your file must be a .json file",a)}})),s.readAsText(n)}}downloadFile(e){var t=JSON.stringify(e.content,null,2);c.log("todo: poser la question compresser",t);var o=e.format||"json",n="",a="";let s="Brain_"+Date.now();var l=prompt("Choose a name for the exported file :",s);if(null!=l&&""!=l){switch(o){case"json":n="application/json",a=l+".json";break;case"ttl":n="text/turtle",a=l+".ttl";break;case"jsonld":n="application/ld+json",a=l+".jsonld";break;default:alert("Format de fichier non reconnu",o)}var r=new Blob([t],{type:n}),i=document.createElement("a");i.download=a,i.innerHTML="Download File",-1!=navigator.userAgent.indexOf("Chrome")?i.href=window.URL.createObjectURL(r):(i.href=window.URL.createObjectURL(r),i.target="_blank",i.style.display="none",document.body.appendChild(i));var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(d),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(i)}),1e3)}}}var u=o(476),p={name:"LocalConnectorConnector",data(){return{connector:new d}},mounted(){u.log(this.connector)},methods:{async loadFiles(e){const t=e.target.files;for(const o of t)this.connector.upload(o,this.processFile)},async processFile(e){u.log(e),u.log(e.name);let t=JSON.parse(e);u.log();for await(let o of t.nodes)u.log(o),await this.$newNode(o),await this.$store.dispatch("core/saveNode",o);u.log("end"),await this.$store.dispatch("core/getNodes")},openFileUpload(){this.$refs.fileUpload.click()},download(){u.log("download");let e={format:"json",content:{nodes:this.$store.state.core.nodes,links:this.$store.state.core.links}};this.connector.downloadFile(e)}}},h=p,f=o(1001),w=(0,f.Z)(h,n,a,!1,null,null,null),m=w.exports}}]);
//# sourceMappingURL=170.62f2c102.js.map