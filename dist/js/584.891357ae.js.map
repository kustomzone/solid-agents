{"version":3,"file":"js/584.891357ae.js","mappings":"sJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,SAAW,IAAIC,YAAYP,EAAIQ,GAAG,CAAC,CAACC,IAAI,YAAYC,GAAG,SAASC,GACzL,IAAIC,EAAQD,EAAIC,MAChB,MAAO,CAACR,EAAG,UAAU,CAACE,MAAM,CAAC,QAAU,SAAS,CAACN,EAAIa,GAAGb,EAAIc,GAAGF,EAAM,OAAQA,EAAMG,OAAS,EAAGX,EAAG,UAAU,CAACY,YAAY,OAAOV,MAAM,CAAC,QAAU,SAAS,CAACN,EAAIa,GAAG,MAAMb,EAAIc,GAAGF,EAAMG,OAAS,GAAG,kBAAkBf,EAAIiB,UAAUC,MAAM,CAACC,MAAOnB,EAAS,MAAEoB,SAAS,SAAUC,GAAMrB,EAAIsB,MAAMD,GAAKE,WAAW,YACzSC,EAAkB,GCStB,GACEC,KAAM,aACNC,OACE,MAAJ,CACMJ,MAAO,KAGXK,QAAFA,CACIC,qBACEC,QAAQC,IAAI7B,KAAKqB,OACjB,IAAIS,EAAM9B,KACV,MAAM+B,EAAe/B,KAAKqB,MAAMW,KAAIL,eAA1C,GAIQ,OAHAC,QAAQC,IAAII,GAEZH,EAAII,YAAY,CAAxBC,GAAAA,WAAAA,EAAAA,OACe,IAAIC,SAAQ,SAA3B,KACU,MAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcN,GACrBI,EAAOG,OAASb,iBAEdM,EAAEQ,aAAeJ,EAAOK,OACxBd,QAAQC,IAAII,GACZ,IAAIU,QAAab,EAAIc,SAASX,SAGxBH,EAAIe,OAAOC,SAAS,gBAAiBH,GAC3Cb,EAAIiB,eAAe,CAA/BZ,GAAAA,WAAAA,EAAAA,OAEYa,EAAQL,IAEVN,EAAOY,QAAU,SAAUC,GACzBtB,QAAQC,IAAI,UAAWqB,GACvBC,EAAOD,UAMb,IAAIE,QAAV,eACMxB,QAAQC,IAAIuB,GACZpD,KAAKqB,MAAQ,SACPrB,KAAK6C,OAAOC,SAAS,mBAG/BO,MAAFA,CACIhC,QACMrB,KAAKqB,MAAMP,OAAS,GACtBd,KAAKsD,kBC3DyP,I,UCOlQC,GAAY,OACd,EACAzD,EACAyB,GACA,EACA,KACA,KACA,MAIF,EAAegC,EAAiB","sources":["webpack://agent/./src/views/UploadFile.vue?33cb","webpack://agent/src/views/UploadFile.vue","webpack://agent/./src/views/UploadFile.vue?ba56","webpack://agent/./src/views/UploadFile.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-file',{attrs:{\"multiple\":\"\"},scopedSlots:_vm._u([{key:\"file-name\",fn:function(ref){\nvar names = ref.names;\nreturn [_c('b-badge',{attrs:{\"variant\":\"dark\"}},[_vm._v(_vm._s(names[0]))]),(names.length > 1)?_c('b-badge',{staticClass:\"ml-1\",attrs:{\"variant\":\"dark\"}},[_vm._v(\" + \"+_vm._s(names.length - 1)+\" More files \")]):_vm._e()]}}]),model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-form-file multiple v-model=\"files\">\n    <template slot=\"file-name\" slot-scope=\"{ names }\">\n      <b-badge variant=\"dark\">{{ names[0] }}</b-badge>\n      <b-badge v-if=\"names.length > 1\" variant=\"dark\" class=\"ml-1\">\n        + {{ names.length - 1 }} More files\n      </b-badge>\n    </template>\n  </b-form-file>\n</template>\n\n<script>\nexport default {\n  name: \"UploadFile\",\n  data(){\n    return{\n      files: []\n    }\n  },\n  methods:{\n    async processFiles(){\n      console.log(this.files)\n      let app = this\n      const filePromises = this.files.map(async function(f) {\n        console.log(f)\n        // Return a promise per file\n        app.$spinnerAdd({id: \"loading \"+f.name})\n        return new Promise( function(resolve, reject) {\n          const reader = new FileReader();\n          reader.readAsDataURL(f);\n          reader.onload = async function () {\n            //let base64 = reader.result\n            f.base64 = await reader.result\n            console.log(f)\n            let node = await app.$newNode(f)\n            //  console.log(reader.result);//base64encoded string\n\n            await app.$store.dispatch('core/saveNode', node)\n            app.$spinnerRemove({id: \"loading \"+f.name})\n\n            resolve(node)\n          };\n          reader.onerror = function (error) {\n            console.log('Error: ', error);\n            reject(error)\n          };\n        });\n      });\n\n      // Wait for all promises to be resolved\n      let medias =   await Promise.all(filePromises);\n      console.log(medias)\n      this.files = []\n      await this.$store.dispatch('core/getNodes')\n    },\n  },\n  watch:{\n    files(){\n      if (this.files.length > 0){\n        this.processFiles()\n      }\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadFile.vue?vue&type=template&id=45030350&\"\nimport script from \"./UploadFile.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","scopedSlots","_u","key","fn","ref","names","_v","_s","length","staticClass","_e","model","value","callback","$$v","files","expression","staticRenderFns","name","data","methods","async","console","log","app","filePromises","map","f","$spinnerAdd","id","Promise","reader","FileReader","readAsDataURL","onload","base64","result","node","$newNode","$store","dispatch","$spinnerRemove","resolve","onerror","error","reject","medias","watch","processFiles","component"],"sourceRoot":""}