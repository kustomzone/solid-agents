{"version":3,"file":"js/255-legacy.4b164cbf.js","mappings":"uJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACE,MAAM,CAAC,SAAW,GAAG,KAAO,MAAMC,MAAM,CAACC,MAAOR,EAAS,MAAES,SAAS,SAAUC,GAAMV,EAAIW,MAAMD,GAAKE,WAAW,YAC5NC,EAAkB,G,WCiBtB,G,sDAAA,CACEC,KAAM,aAINC,KALF,WAMI,MAAJ,CACMJ,MAAO,KAGXK,QAAFA,CACI,aADJ,WACA,iKACAC,QAAAA,IAAAA,EAAAA,OACAC,EAAA,EACAC,EAAA,oKACAF,QAAAA,IAAAA,GAEAC,EAAAA,YAAAA,CAAAE,GAAAA,WAAAA,EAAAA,OAHA,kBAIA,2BACA,qBACAC,EAAAA,cAAAA,GACAA,EAAAA,QAAAA,EAAAA,EAAAA,GAAAA,mBAAAA,MAAAA,SAAAA,IAAA,uGAEAA,EAAAA,OAFA,cAEAC,EAAAA,OAFA,OAGAL,QAAAA,IAAAA,GAHA,SAIAC,EAAAA,SAAAA,GAJA,cAIAK,EAJA,gBAOAL,EAAAA,OAAAA,SAAAA,gBAAAA,GAPA,OAQAA,EAAAA,eAAAA,CAAAE,GAAAA,WAAAA,EAAAA,OAEAI,EAAAA,GAVA,4CAYAH,EAAAA,QAAAA,SAAAA,GACAJ,QAAAA,IAAAA,UAAAA,GACAQ,EAAAA,QArBA,kGAHA,SA8BAC,QAAAA,IAAAA,GA9BA,cA8BAC,EA9BA,OA+BAV,QAAAA,IAAAA,GACA,WAhCA,UAiCA,mCAjCA,gDAoCEW,MAAFA,CACIjB,MADJ,WAEUV,KAAKU,MAAMkB,OAAS,GACtB5B,KAAK6B,mBCpEyP,I,UCOlQC,GAAY,OACd,EACAhC,EACAc,GACA,EACA,KACA,KACA,MAIF,EAAekB,EAAiB","sources":["webpack://agent/./src/views/UploadFile.vue?17e7","webpack://agent/src/views/UploadFile.vue","webpack://agent/./src/views/UploadFile.vue?ba56","webpack://agent/./src/views/UploadFile.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-form-file',{attrs:{\"multiple\":\"\",\"size\":\"sm\"},model:{value:(_vm.files),callback:function ($$v) {_vm.files=$$v},expression:\"files\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-form-file multiple v-model=\"files\" size=\"sm\">\n    <!-- <template slot=\"file-name\" slot-scope=\"{ names }\">\n      <b-badge variant=\"dark\">{{ names[0] }}</b-badge>\n      <b-badge v-if=\"names.length > 1\" variant=\"dark\" class=\"ml-1\">\n        + {{ names.length - 1 }} More files\n      </b-badge> \n    </template> -->\n  </b-form-file>\n  <!-- <div>\n\n      <file-select v-model=\"files\"></file-select>\n\n   <p v-if=\"files\">{{files}}</p>\n </div> -->\n</template>\n\n<script>\nexport default {\n  name: \"UploadFile\",\n  // components: {\n  //   'FileSelect': ()=>import('@/components/FileSelect'),\n  // },\n  data(){\n    return{\n      files: []\n    }\n  },\n  methods:{\n    async processFiles(){\n      console.log(this.files)\n      let app = this\n      const filePromises = this.files.map(async function(f) {\n        console.log(f)\n        // Return a promise per file\n        app.$spinnerAdd({id: \"loading \"+f.name})\n        return new Promise( function(resolve, reject) {\n          const reader = new FileReader();\n          reader.readAsDataURL(f);\n          reader.onload = async function () {\n            //let base64 = reader.result\n            f.base64 = await reader.result\n            console.log(f)\n            let node = await app.$newNode(f)\n            //  console.log(reader.result);//base64encoded string\n\n            await app.$store.dispatch('core/saveNode', node)\n            app.$spinnerRemove({id: \"loading \"+f.name})\n\n            resolve(node)\n          };\n          reader.onerror = function (error) {\n            console.log('Error: ', error);\n            reject(error)\n          };\n        });\n      });\n\n      // Wait for all promises to be resolved\n      let medias =   await Promise.all(filePromises);\n      console.log(medias)\n      this.files = []\n      await this.$store.dispatch('core/getNodes')\n    },\n  },\n  watch:{\n    files(){\n      if (this.files.length > 0){\n        this.processFiles()\n      }\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UploadFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadFile.vue?vue&type=template&id=4e1b62c4&\"\nimport script from \"./UploadFile.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","callback","$$v","files","expression","staticRenderFns","name","data","methods","console","app","filePromises","id","reader","f","node","resolve","reject","Promise","medias","watch","length","processFiles","component"],"sourceRoot":""}