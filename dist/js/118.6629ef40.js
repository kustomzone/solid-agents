"use strict";(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[118],{7405:function(e,t,i){i.r(t),i.d(t,{default:function(){return d}});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("vue-fab",{attrs:{mainBtnColor:e.mainBtnColor}},e._l(e.menu,(function(t,o){return i("fab-item",{key:o,attrs:{idx:o,title:t.title,color:t.color,icon:t.icon},on:{clickItem:e.clickItem}})})),1),i("input",{ref:"uploader",staticStyle:{display:"none"},attrs:{type:"file",multiple:"multiple"},on:{change:e.inputChanged}})],1)},n=[],a=i(476),l={name:"FabMenu",components:{},data(){return{files:[],menu:[{icon:"psychology",title:"Add a neurone",color:"#9900ff"},{icon:"add_photo_alternate",title:"Add a media",color:"#ff9900"},{icon:"toc",title:"External source",color:"#ff0099"},{icon:"terminal",title:"Terminal",color:"#999999"}],mainBtnColor:"#3eaf7c"}},methods:{clickItem:function(e){switch(e.idx){case 0:this.$store.dispatch("core/newNode");break;case 1:this.$refs.uploader.click();break;case 2:this.$bvModal.show("modal-external-source");break;case 3:this.$store.commit("terminal/toggleTerminal");break;default:window.alert(e.idx)}},async processFiles(){a.log(this.files);let e=this;const t=Array.from(this.files).map((async function(t){return a.log(t),e.$spinnerAdd({id:"loading "+t.name}),new Promise((function(i,o){const n=new FileReader;n.readAsDataURL(t),n.onload=async function(){t.base64=await n.result,a.log(t);let o=await e.$newNode(t);await e.$store.dispatch("core/saveNode",o),e.$spinnerRemove({id:"loading "+t.name}),i(o)},n.onerror=function(e){a.log("Error: ",e),o(e)}}))}));let i=await Promise.all(t);a.log(i),this.files=[],await this.$store.dispatch("core/getNodes"),a.log(i[0].id);let o=i[0].id,n=await this.$store.state.core.nodes.find((e=>e.id==o));this.$store.commit("core/setCurrentNode",n)},inputChanged(){this.files=this.$refs.uploader.files}},watch:{files(){this.files.length>0&&this.processFiles()}}},s=l,r=i(1001),c=(0,r.Z)(s,o,n,!1,null,null,null),d=c.exports}}]);
//# sourceMappingURL=118.6629ef40.js.map