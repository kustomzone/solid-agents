"use strict";(self["webpackChunkagent"]=self["webpackChunkagent"]||[]).push([[170],{29170:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e._v("Local: "),t("b-button",{staticClass:"ml-2",attrs:{size:"sm",variant:"primary"},on:{click:e.download}},[e._v("Download")]),t("b-button",{staticClass:"ml-2",attrs:{variant:"primary",size:"sm"},on:{click:function(n){return e.openFileUpload()}}},[e._v("Upload Brains")]),t("input",{ref:"fileUpload",attrs:{type:"file",multiple:"",hidden:""},on:{change:e.loadFiles}})],1)},o=[],a=t(67906),s=t(62032),i=t(16198),c=t(29927),l=(t(68309),t(9726)),u=t(76133),d=t(92751),p=t(99418),f=t(49161),v=(t(74916),t(23123),t(38862),t(41539),t(78783),t(33948),t(60285),t(41637),t(61519)),h=t(50476),w=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.Z)(this,e),this.id=(0,v.Z)(),this.type="baseConnector",this.created=Date.now(),Object.assign(this,n)}return(0,d.Z)(e,[{key:"debug",value:function(){h.log(this)}}]),e}(),m=t(25297),k=t(50476),b=function(e){(0,p.Z)(t,e);var n=(0,f.Z)(t);function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,u.Z)(this,t),e=n.call(this,r),void 0==r["type"]&&(e["type"]="LocalConnector"),e}return(0,d.Z)(t,[{key:"upload",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n,t){var r;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=new FileReader,e.next=3,r.addEventListener("load",(function(){t(r.result)}));case 3:r.readAsText(n,"UTF-8");case 4:case"end":return e.stop()}}),e)})));function n(n,t){return e.apply(this,arguments)}return n}()},{key:"upload1",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){var t,r,o;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(t=function(){var e=n[r],t=e.name;o=e.name.split(".").pop();var a=new FileReader;a.addEventListener("load",(function(){var e=a.result;switch(k.log((0,l.Z)(e),e),o){case"json":var n=JSON.parse(e);k.log(n),void 0!=n.nodes&&(k.log(n),m.Z.commit("soukai/setNeurones",n.nodes));break;default:alert("your file must be a .json file",t)}})),a.readAsText(e)},r=0;r<n.length;r++)t();case 2:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()},{key:"downloadFile",value:function(e){var n=JSON.stringify(e.content,null,2);k.log("todo: poser la question compresser",n);var t=e.format||"json",r="",o="",a="Brain_"+Date.now(),s=prompt("Choose a name for the exported file :",a);if(null!=s&&""!=s){switch(t){case"json":r="application/json",o=s+".json";break;case"ttl":r="text/turtle",o=s+".ttl";break;case"jsonld":r="application/ld+json",o=s+".jsonld";break;default:alert("Format de fichier non reconnu",t)}var i=new Blob([n],{type:r}),c=document.createElement("a");c.download=o,c.innerHTML="Download File",-1!=navigator.userAgent.indexOf("Chrome")?c.href=window.URL.createObjectURL(i):(c.href=window.URL.createObjectURL(i),c.target="_blank",c.style.display="none",document.body.appendChild(c));var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(l),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(c)}),1e3)}}}]),t}(w),g=t(50476),Z={name:"LocalConnectorConnector",data:function(){return{connector:new b}},mounted:function(){g.log(this.connector)},methods:{loadFiles:function(e){var n=this;return(0,i.Z)((0,a.Z)().mark((function t(){var r,o,i,c;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.target.files,o=(0,s.Z)(r);try{for(o.s();!(i=o.n()).done;)c=i.value,n.connector.upload(c,n.processFile)}catch(a){o.e(a)}finally{o.f()}case 3:case"end":return t.stop()}}),t)})))()},processFile:function(e){var n=this;return(0,i.Z)((0,a.Z)().mark((function t(){var r,o,s,i,l,u,d;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:g.log(e),g.log(e.name),r=JSON.parse(e),g.log(),o=!1,s=!1,t.prev=6,l=(0,c.Z)(r.nodes);case 8:return t.next=10,l.next();case 10:if(!(o=!(u=t.sent).done)){t.next=20;break}return d=u.value,g.log(d),t.next=15,n.$newNode(d);case 15:return t.next=17,n.$store.dispatch("core/saveNode",d);case 17:o=!1,t.next=8;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](6),s=!0,i=t.t0;case 26:if(t.prev=26,t.prev=27,!o||null==l.return){t.next=31;break}return t.next=31,l.return();case 31:if(t.prev=31,!s){t.next=34;break}throw i;case 34:return t.finish(31);case 35:return t.finish(26);case 36:return g.log("end"),t.next=39,n.$store.dispatch("core/getNodes");case 39:case"end":return t.stop()}}),t,null,[[6,22,26,36],[27,,31,35]])})))()},openFileUpload:function(){this.$refs.fileUpload.click()},download:function(){g.log("download");var e={format:"json",content:{nodes:this.$store.state.core.nodes,links:this.$store.state.core.links}};this.connector.downloadFile(e)}}},x=Z,y=t(1001),j=(0,y.Z)(x,r,o,!1,null,null,null),F=j.exports}}]);
//# sourceMappingURL=170-legacy.3cb9fa5e.js.map